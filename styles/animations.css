/**
 * Animation Queue System - CSS Animations
 *
 * This file contains all CSS for the new animation queue system.
 * Animations are organized by type and follow consistent patterns.
 */

/* =============================================================================
   ANIMATION OVERLAY
   ============================================================================= */

.animation-overlay {
    position: fixed;
    inset: 0;
    z-index: 1000;
    /* TRANSPARENT - the GameScreen renders the snapshot data directly beneath */
    background-color: transparent;
    /* Block all pointer events during animation */
    pointer-events: all;
    /* Prevent text selection during animation */
    user-select: none;
}

/* =============================================================================
   ANIMATED CARD
   ============================================================================= */

.animated-card {
    position: absolute;
    z-index: 2000;
    /* Smooth transitions for position changes */
    will-change: transform, opacity, left, top, width, height;
    /* Ensure card stays within bounds */
    overflow: hidden;
}

/* Inner wrapper - fills the animated-card container */
.animated-card-inner {
    width: 100%;
    height: 100%;
}

.animated-card-inner .card-component {
    /* Fill the container completely */
    width: 100% !important;
    height: 100% !important;
    /* Match in-game card styles */
    font-size: 0.6rem;
}

/* Apply the same in-game card style overrides */
.animated-card-inner .card-front {
    padding: 2px;
}

.animated-card-inner .card-header {
    margin-bottom: 4px;
    gap: 4px;
}

.animated-card-inner .card-protocol {
    padding: 2px 3px 2px 0;
    clip-path: none;
    font-size: 0.9em;
    overflow: visible;
    white-space: nowrap;
    min-width: 0;
    text-overflow: clip;
}

.animated-card-inner .card-value {
    padding: 1px 6px;
    clip-path: polygon(6px 0, 100% 0, 100% 100%, 0% 100%);
    min-width: 30px;
}

.animated-card-inner .card-body {
    gap: 2px;
}

.animated-card-inner .card-rule-box {
    padding: 1px 3px;
    font-size: 0.9em;
    line-height: 1.25;
}

.animated-card-inner .card-rule-box::before,
.animated-card-inner .card-rule-box::after {
    width: 6px;
    height: 6px;
}

.animated-card.is-flying {
    /* During flight animation, use hardware acceleration */
    transform: translateZ(0);
}

/* Highlight phase - red glow border for opponent cards */
.animated-card.is-highlighting {
    /* Strong red glow around the card */
    box-shadow:
        0 0 20px 8px rgba(255, 0, 0, 0.9),
        0 0 40px 15px rgba(255, 0, 0, 0.6),
        0 0 60px 25px rgba(255, 0, 0, 0.3);
    outline: 4px solid #ff0000;
    outline-offset: 2px;
    border-radius: 8px;
}

/* =============================================================================
   ANIMATION TYPE SPECIFIC STYLES
   ============================================================================= */

/* --- PLAY Animation --- */
.animation-play {
    /* Card flies from hand/deck to lane */
}

.animation-play.is-animating {
    animation: card-play-bounce 400ms ease-out;
}

@keyframes card-play-bounce {
    0% {
        transform: scale(0.8);
    }
    50% {
        transform: scale(1.05);
    }
    100% {
        transform: scale(1);
    }
}

/* --- DELETE Animation --- */
.animation-delete {
    /* Card fades and shrinks to trash */
}

.animation-delete.is-animating {
    animation: card-delete-fade 400ms ease-in forwards;
}

@keyframes card-delete-fade {
    0% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
    }
    100% {
        opacity: 0;
        transform: scale(0.5) rotate(-15deg);
    }
}

/* --- FLIP Animation --- */
.animation-flip {
    /* Card flips to reveal other side */
    perspective: 1000px;
}

.animation-flip .card-component {
    transform-style: preserve-3d;
    transition: transform 300ms ease-in-out;
}

.animation-flip.is-animating .card-component {
    animation: card-flip-rotate 300ms ease-in-out;
}

@keyframes card-flip-rotate {
    0% {
        transform: rotateY(0deg);
    }
    50% {
        transform: rotateY(90deg);
    }
    100% {
        transform: rotateY(180deg);
    }
}

/* --- SHIFT Animation --- */
.animation-shift {
    /* Card moves between lanes */
}

.animation-shift.is-animating {
    animation: card-shift-slide 500ms ease-in-out;
}

@keyframes card-shift-slide {
    0% {
        transform: translateY(0);
    }
    25% {
        transform: translateY(-20px);
    }
    75% {
        transform: translateY(-20px);
    }
    100% {
        transform: translateY(0);
    }
}

/* --- RETURN Animation --- */
.animation-return {
    /* Card returns from board to hand */
}

.animation-return.is-animating {
    animation: card-return-lift 400ms ease-out;
}

@keyframes card-return-lift {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.1) translateY(-10px);
    }
    100% {
        transform: scale(1);
    }
}

/* --- DISCARD Animation --- */
.animation-discard {
    /* Card moves from hand to trash */
}

.animation-discard.is-animating {
    animation: card-discard-fade 300ms ease-in forwards;
}

@keyframes card-discard-fade {
    0% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
    100% {
        opacity: 0;
        transform: scale(0.8) translateY(40px);
    }
}

/* --- DRAW Animation --- */
.animation-draw {
    /* Card moves from deck to hand */
}

.animation-draw.is-animating {
    animation: card-draw-appear 300ms ease-out;
}

@keyframes card-draw-appear {
    0% {
        opacity: 0;
        transform: scale(0.8) translateY(-20px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* --- COMPILE Animation --- */
.animation-compile {
    /* Protocol compiles - cards go to trash with glow effect */
}

.animation-compile.is-animating {
    animation: card-compile-glow 800ms ease-in-out forwards;
}

@keyframes card-compile-glow {
    0% {
        opacity: 1;
        transform: scale(1);
        box-shadow: 0 0 0 rgba(0, 188, 212, 0);
    }
    30% {
        opacity: 1;
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(0, 188, 212, 0.8);
    }
    100% {
        opacity: 0;
        transform: scale(0.5);
        box-shadow: 0 0 0 rgba(0, 188, 212, 0);
    }
}

/* --- GIVE Animation --- */
.animation-give {
    /* Card moves to opponent's hand */
}

.animation-give.is-animating {
    animation: card-give-fly 500ms ease-in-out;
}

@keyframes card-give-fly {
    0% {
        transform: scale(1) rotate(0deg);
    }
    50% {
        transform: scale(0.9) rotate(10deg);
    }
    100% {
        transform: scale(1) rotate(0deg);
    }
}

/* --- REVEAL Animation --- */
.animation-reveal {
    /* Card is briefly shown */
}

.animation-reveal.is-animating {
    animation: card-reveal-pulse 600ms ease-in-out;
}

@keyframes card-reveal-pulse {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 rgba(255, 215, 0, 0);
    }
    30% {
        transform: scale(1.1);
        box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
    }
    70% {
        transform: scale(1.1);
        box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 rgba(255, 215, 0, 0);
    }
}

/* --- SWAP Animation --- */
.animation-swap {
    /* Protocols swap positions */
}

/* --- REFRESH Animation --- */
.animation-refresh {
    /* Hand refill animation */
}

.animation-refresh.is-animating {
    animation: card-refresh-cascade 500ms ease-out;
}

@keyframes card-refresh-cascade {
    0% {
        opacity: 0;
        transform: translateY(-30px) scale(0.8);
    }
    60% {
        opacity: 1;
        transform: translateY(5px) scale(1.02);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* =============================================================================
   FADE OUT HELPER (for cards being removed)
   ============================================================================= */

.animation-fade-out.is-animating {
    animation: fade-out 400ms ease-in forwards;
}

@keyframes fade-out {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

/* =============================================================================
   ANIMATING CARD HIDDEN (for source location)
   ============================================================================= */

/* Hide the source card during animation - it's being animated separately.
   We use opacity: 0 (not visibility: hidden) because child elements with
   visibility: visible would override the parent's visibility: hidden.
   Opacity 0 cannot be overridden by children and preserves DOM layout. */
.animating-hidden {
    opacity: 0 !important;
    pointer-events: none !important;
}

/* =============================================================================
   RESPONSIVE ADJUSTMENTS
   ============================================================================= */

/* SnapshotRenderer verwendet die gleichen Klassen wie das echte GameBoard,
   daher gelten die responsive Stile aus game-screen.css automatisch. */
