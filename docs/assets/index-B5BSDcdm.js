(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))r(d);new MutationObserver(d=>{for(const o of d)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function u(d){const o={};return d.integrity&&(o.integrity=d.integrity),d.referrerPolicy&&(o.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?o.credentials="include":d.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(d){if(d.ep)return;d.ep=!0;const o=u(d);fetch(d.href,o)}})();function P_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Li={exports:{}},Wn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ff;function J_(){if(Ff)return Wn;Ff=1;var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function u(r,d,o){var f=null;if(o!==void 0&&(f=""+o),d.key!==void 0&&(f=""+d.key),"key"in d){o={};for(var h in d)h!=="key"&&(o[h]=d[h])}else o=d;return d=o.ref,{$$typeof:n,type:r,key:f,ref:d!==void 0?d:null,props:o}}return Wn.Fragment=s,Wn.jsx=u,Wn.jsxs=u,Wn}var Zf;function I_(){return Zf||(Zf=1,Li.exports=J_()),Li.exports}var v=I_(),Yi={exports:{}},de={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf;function W_(){if(Kf)return de;Kf=1;var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),S=Symbol.iterator;function b(w){return w===null||typeof w!="object"?null:(w=S&&w[S]||w["@@iterator"],typeof w=="function"?w:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,D={};function M(w,H,F){this.props=w,this.context=H,this.refs=D,this.updater=F||R}M.prototype.isReactComponent={},M.prototype.setState=function(w,H){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,H,"setState")},M.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function X(){}X.prototype=M.prototype;function W(w,H,F){this.props=w,this.context=H,this.refs=D,this.updater=F||R}var L=W.prototype=new X;L.constructor=W,T(L,M.prototype),L.isPureReactComponent=!0;var J=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function se(w,H,F,Q,I,me){return F=me.ref,{$$typeof:n,type:w,key:H,ref:F!==void 0?F:null,props:me}}function fe(w,H){return se(w.type,H,void 0,void 0,void 0,w.props)}function te(w){return typeof w=="object"&&w!==null&&w.$$typeof===n}function le(w){var H={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(F){return H[F]})}var re=/\/+/g;function Se(w,H){return typeof w=="object"&&w!==null&&w.key!=null?le(""+w.key):H.toString(36)}function Me(){}function xe(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(Me,Me):(w.status="pending",w.then(function(H){w.status==="pending"&&(w.status="fulfilled",w.value=H)},function(H){w.status==="pending"&&(w.status="rejected",w.reason=H)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function ye(w,H,F,Q,I){var me=typeof w;(me==="undefined"||me==="boolean")&&(w=null);var ne=!1;if(w===null)ne=!0;else switch(me){case"bigint":case"string":case"number":ne=!0;break;case"object":switch(w.$$typeof){case n:case s:ne=!0;break;case m:return ne=w._init,ye(ne(w._payload),H,F,Q,I)}}if(ne)return I=I(w),ne=Q===""?"."+Se(w,0):Q,J(I)?(F="",ne!=null&&(F=ne.replace(re,"$&/")+"/"),ye(I,H,F,"",function(Ct){return Ct})):I!=null&&(te(I)&&(I=fe(I,F+(I.key==null||w&&w.key===I.key?"":(""+I.key).replace(re,"$&/")+"/")+ne)),H.push(I)),1;ne=0;var Ve=Q===""?".":Q+":";if(J(w))for(var qe=0;qe<w.length;qe++)Q=w[qe],me=Ve+Se(Q,qe),ne+=ye(Q,H,F,me,I);else if(qe=b(w),typeof qe=="function")for(w=qe.call(w),qe=0;!(Q=w.next()).done;)Q=Q.value,me=Ve+Se(Q,qe++),ne+=ye(Q,H,F,me,I);else if(me==="object"){if(typeof w.then=="function")return ye(xe(w),H,F,Q,I);throw H=String(w),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ne}function z(w,H,F){if(w==null)return w;var Q=[],I=0;return ye(w,Q,"","",function(me){return H.call(F,me,I++)}),Q}function q(w){if(w._status===-1){var H=w._result;H=H(),H.then(function(F){(w._status===0||w._status===-1)&&(w._status=1,w._result=F)},function(F){(w._status===0||w._status===-1)&&(w._status=2,w._result=F)}),w._status===-1&&(w._status=0,w._result=H)}if(w._status===1)return w._result.default;throw w._result}var j=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function V(){}return de.Children={map:z,forEach:function(w,H,F){z(w,function(){H.apply(this,arguments)},F)},count:function(w){var H=0;return z(w,function(){H++}),H},toArray:function(w){return z(w,function(H){return H})||[]},only:function(w){if(!te(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},de.Component=M,de.Fragment=u,de.Profiler=d,de.PureComponent=W,de.StrictMode=r,de.Suspense=_,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,de.__COMPILER_RUNTIME={__proto__:null,c:function(w){return k.H.useMemoCache(w)}},de.cache=function(w){return function(){return w.apply(null,arguments)}},de.cloneElement=function(w,H,F){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var Q=T({},w.props),I=w.key,me=void 0;if(H!=null)for(ne in H.ref!==void 0&&(me=void 0),H.key!==void 0&&(I=""+H.key),H)!Z.call(H,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&H.ref===void 0||(Q[ne]=H[ne]);var ne=arguments.length-2;if(ne===1)Q.children=F;else if(1<ne){for(var Ve=Array(ne),qe=0;qe<ne;qe++)Ve[qe]=arguments[qe+2];Q.children=Ve}return se(w.type,I,void 0,void 0,me,Q)},de.createContext=function(w){return w={$$typeof:f,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:o,_context:w},w},de.createElement=function(w,H,F){var Q,I={},me=null;if(H!=null)for(Q in H.key!==void 0&&(me=""+H.key),H)Z.call(H,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(I[Q]=H[Q]);var ne=arguments.length-2;if(ne===1)I.children=F;else if(1<ne){for(var Ve=Array(ne),qe=0;qe<ne;qe++)Ve[qe]=arguments[qe+2];I.children=Ve}if(w&&w.defaultProps)for(Q in ne=w.defaultProps,ne)I[Q]===void 0&&(I[Q]=ne[Q]);return se(w,me,void 0,void 0,null,I)},de.createRef=function(){return{current:null}},de.forwardRef=function(w){return{$$typeof:h,render:w}},de.isValidElement=te,de.lazy=function(w){return{$$typeof:m,_payload:{_status:-1,_result:w},_init:q}},de.memo=function(w,H){return{$$typeof:p,type:w,compare:H===void 0?null:H}},de.startTransition=function(w){var H=k.T,F={};k.T=F;try{var Q=w(),I=k.S;I!==null&&I(F,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(V,j)}catch(me){j(me)}finally{k.T=H}},de.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},de.use=function(w){return k.H.use(w)},de.useActionState=function(w,H,F){return k.H.useActionState(w,H,F)},de.useCallback=function(w,H){return k.H.useCallback(w,H)},de.useContext=function(w){return k.H.useContext(w)},de.useDebugValue=function(){},de.useDeferredValue=function(w,H){return k.H.useDeferredValue(w,H)},de.useEffect=function(w,H,F){var Q=k.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(w,H)},de.useId=function(){return k.H.useId()},de.useImperativeHandle=function(w,H,F){return k.H.useImperativeHandle(w,H,F)},de.useInsertionEffect=function(w,H){return k.H.useInsertionEffect(w,H)},de.useLayoutEffect=function(w,H){return k.H.useLayoutEffect(w,H)},de.useMemo=function(w,H){return k.H.useMemo(w,H)},de.useOptimistic=function(w,H){return k.H.useOptimistic(w,H)},de.useReducer=function(w,H,F){return k.H.useReducer(w,H,F)},de.useRef=function(w){return k.H.useRef(w)},de.useState=function(w){return k.H.useState(w)},de.useSyncExternalStore=function(w,H,F){return k.H.useSyncExternalStore(w,H,F)},de.useTransition=function(){return k.H.useTransition()},de.version="19.1.1",de}var Pf;function tu(){return Pf||(Pf=1,Yi.exports=W_()),Yi.exports}var K=tu();const ey=P_(K);var Bi={exports:{}},ec={},Vi={exports:{}},Gi={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf;function ty(){return Jf||(Jf=1,(function(n){function s(z,q){var j=z.length;z.push(q);e:for(;0<j;){var V=j-1>>>1,w=z[V];if(0<d(w,q))z[V]=q,z[j]=w,j=V;else break e}}function u(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var q=z[0],j=z.pop();if(j!==q){z[0]=j;e:for(var V=0,w=z.length,H=w>>>1;V<H;){var F=2*(V+1)-1,Q=z[F],I=F+1,me=z[I];if(0>d(Q,j))I<w&&0>d(me,Q)?(z[V]=me,z[I]=j,V=I):(z[V]=Q,z[F]=j,V=F);else if(I<w&&0>d(me,j))z[V]=me,z[I]=j,V=I;else break e}}return q}function d(z,q){var j=z.sortIndex-q.sortIndex;return j!==0?j:z.id-q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var f=Date,h=f.now();n.unstable_now=function(){return f.now()-h}}var _=[],p=[],m=1,S=null,b=3,R=!1,T=!1,D=!1,M=!1,X=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function J(z){for(var q=u(p);q!==null;){if(q.callback===null)r(p);else if(q.startTime<=z)r(p),q.sortIndex=q.expirationTime,s(_,q);else break;q=u(p)}}function k(z){if(D=!1,J(z),!T)if(u(_)!==null)T=!0,Z||(Z=!0,Se());else{var q=u(p);q!==null&&ye(k,q.startTime-z)}}var Z=!1,se=-1,fe=5,te=-1;function le(){return M?!0:!(n.unstable_now()-te<fe)}function re(){if(M=!1,Z){var z=n.unstable_now();te=z;var q=!0;try{e:{T=!1,D&&(D=!1,W(se),se=-1),R=!0;var j=b;try{t:{for(J(z),S=u(_);S!==null&&!(S.expirationTime>z&&le());){var V=S.callback;if(typeof V=="function"){S.callback=null,b=S.priorityLevel;var w=V(S.expirationTime<=z);if(z=n.unstable_now(),typeof w=="function"){S.callback=w,J(z),q=!0;break t}S===u(_)&&r(_),J(z)}else r(_);S=u(_)}if(S!==null)q=!0;else{var H=u(p);H!==null&&ye(k,H.startTime-z),q=!1}}break e}finally{S=null,b=j,R=!1}q=void 0}}finally{q?Se():Z=!1}}}var Se;if(typeof L=="function")Se=function(){L(re)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,xe=Me.port2;Me.port1.onmessage=re,Se=function(){xe.postMessage(null)}}else Se=function(){X(re,0)};function ye(z,q){se=X(function(){z(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(z){switch(b){case 1:case 2:case 3:var q=3;break;default:q=b}var j=b;b=q;try{return z()}finally{b=j}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var j=b;b=z;try{return q()}finally{b=j}},n.unstable_scheduleCallback=function(z,q,j){var V=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?V+j:V):j=V,z){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=j+w,z={id:m++,callback:q,priorityLevel:z,startTime:j,expirationTime:w,sortIndex:-1},j>V?(z.sortIndex=j,s(p,z),u(_)===null&&z===u(p)&&(D?(W(se),se=-1):D=!0,ye(k,j-V))):(z.sortIndex=w,s(_,z),T||R||(T=!0,Z||(Z=!0,Se()))),z},n.unstable_shouldYield=le,n.unstable_wrapCallback=function(z){var q=b;return function(){var j=b;b=q;try{return z.apply(this,arguments)}finally{b=j}}}})(Gi)),Gi}var If;function ay(){return If||(If=1,Vi.exports=ty()),Vi.exports}var $i={exports:{}},ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf;function ly(){if(Wf)return ct;Wf=1;var n=tu();function s(_){var p="https://react.dev/errors/"+_;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+_+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var r={d:{f:u,r:function(){throw Error(s(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},d=Symbol.for("react.portal");function o(_,p,m){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:S==null?null:""+S,children:_,containerInfo:p,implementation:m}}var f=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(_,p){if(_==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ct.createPortal=function(_,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(s(299));return o(_,p,null,m)},ct.flushSync=function(_){var p=f.T,m=r.p;try{if(f.T=null,r.p=2,_)return _()}finally{f.T=p,r.p=m,r.d.f()}},ct.preconnect=function(_,p){typeof _=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(_,p))},ct.prefetchDNS=function(_){typeof _=="string"&&r.d.D(_)},ct.preinit=function(_,p){if(typeof _=="string"&&p&&typeof p.as=="string"){var m=p.as,S=h(m,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?r.d.S(_,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:S,integrity:b,fetchPriority:R}):m==="script"&&r.d.X(_,{crossOrigin:S,integrity:b,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ct.preinitModule=function(_,p){if(typeof _=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=h(p.as,p.crossOrigin);r.d.M(_,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(_)},ct.preload=function(_,p){if(typeof _=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,S=h(m,p.crossOrigin);r.d.L(_,m,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ct.preloadModule=function(_,p){if(typeof _=="string")if(p){var m=h(p.as,p.crossOrigin);r.d.m(_,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(_)},ct.requestFormReset=function(_){r.d.r(_)},ct.unstable_batchedUpdates=function(_,p){return _(p)},ct.useFormState=function(_,p,m){return f.H.useFormState(_,p,m)},ct.useFormStatus=function(){return f.H.useHostTransitionStatus()},ct.version="19.1.1",ct}var ep;function ny(){if(ep)return $i.exports;ep=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),$i.exports=ly(),$i.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function cy(){if(tp)return ec;tp=1;var n=ay(),s=tu(),u=ny();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(o(e)!==e)throw Error(r(188))}function _(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(r(188));return t!==e?null:e}for(var a=e,l=t;;){var c=a.return;if(c===null)break;var i=c.alternate;if(i===null){if(l=c.return,l!==null){a=l;continue}break}if(c.child===i.child){for(i=c.child;i;){if(i===a)return h(c),e;if(i===l)return h(c),t;i=i.sibling}throw Error(r(188))}if(a.return!==l.return)a=c,l=i;else{for(var y=!1,g=c.child;g;){if(g===a){y=!0,a=c,l=i;break}if(g===l){y=!0,l=c,a=i;break}g=g.sibling}if(!y){for(g=i.child;g;){if(g===a){y=!0,a=i,l=c;break}if(g===l){y=!0,l=i,a=c;break}g=g.sibling}if(!y)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var m=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),L=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function Se(e){return e===null||typeof e!="object"?null:(e=re&&e[re]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Symbol.for("react.client.reference");function xe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Me?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case M:return"Profiler";case D:return"StrictMode";case k:return"Suspense";case Z:return"SuspenseList";case te:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case R:return"Portal";case L:return(e.displayName||"Context")+".Provider";case W:return(e._context.displayName||"Context")+".Consumer";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case se:return t=e.displayName||null,t!==null?t:xe(e.type)||"Memo";case fe:t=e._payload,e=e._init;try{return xe(e(t))}catch{}}return null}var ye=Array.isArray,z=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},V=[],w=-1;function H(e){return{current:e}}function F(e){0>w||(e.current=V[w],V[w]=null,w--)}function Q(e,t){w++,V[w]=e.current,e.current=t}var I=H(null),me=H(null),ne=H(null),Ve=H(null);function qe(e,t){switch(Q(ne,t),Q(me,e),Q(I,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?bf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=bf(t),e=wf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(I),Q(I,e)}function Ct(){F(I),F(me),F(ne)}function Wl(e){e.memoizedState!==null&&Q(Ve,e);var t=I.current,a=wf(t,e.type);t!==a&&(Q(me,e),Q(I,a))}function Ba(e){me.current===e&&(F(I),F(me)),Ve.current===e&&(F(Ve),Zn._currentValue=j)}var ol=Object.prototype.hasOwnProperty,en=n.unstable_scheduleCallback,tn=n.unstable_cancelCallback,Rr=n.unstable_shouldYield,Ar=n.unstable_requestPaint,Rt=n.unstable_now,lc=n.unstable_getCurrentPriorityLevel,nc=n.unstable_ImmediatePriority,cc=n.unstable_UserBlockingPriority,il=n.unstable_NormalPriority,xr=n.unstable_LowPriority,an=n.unstable_IdlePriority,rc=n.log,oc=n.unstable_setDisableYieldValue,P=null,ue=null;function ze(e){if(typeof rc=="function"&&oc(e),ue&&typeof ue.setStrictMode=="function")try{ue.setStrictMode(P,e)}catch{}}var je=Math.clz32?Math.clz32:ul,ha=Math.log,Ft=Math.LN2;function ul(e){return e>>>=0,e===0?32:31-(ha(e)/Ft|0)|0}var _a=256,Zt=4194304;function Mt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ya(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var c=0,i=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var g=l&134217727;return g!==0?(l=g&~i,l!==0?c=Mt(l):(y&=g,y!==0?c=Mt(y):a||(a=g&~e,a!==0&&(c=Mt(a))))):(g=l&~i,g!==0?c=Mt(g):y!==0?c=Mt(y):a||(a=l&~e,a!==0&&(c=Mt(a)))),c===0?0:t!==0&&t!==c&&(t&i)===0&&(i=c&-c,a=t&-t,i>=a||i===32&&(a&4194048)!==0)?t:c}function Lt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ht(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qr(){var e=_a;return _a<<=1,(_a&4194048)===0&&(_a=256),e}function ic(){var e=Zt;return Zt<<=1,(Zt&62914560)===0&&(Zt=4194304),e}function Kt(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ln(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function kp(e,t,a,l,c,i){var y=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var g=e.entanglements,C=e.expirationTimes,N=e.hiddenUpdates;for(a=y&~a;0<a;){var Y=31-je(a),G=1<<Y;g[Y]=0,C[Y]=-1;var O=N[Y];if(O!==null)for(N[Y]=null,Y=0;Y<O.length;Y++){var U=O[Y];U!==null&&(U.lane&=-536870913)}a&=~G}l!==0&&cu(e,l,0),i!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=i&~(y&~t))}function cu(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-je(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function ru(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-je(a),c=1<<l;c&t|e[l]&t&&(e[l]|=t),a&=~c}}function Dr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Tr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ou(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:Bf(e.type))}function Lp(e,t){var a=q.p;try{return q.p=e,t()}finally{q.p=a}}var ma=Math.random().toString(36).slice(2),lt="__reactFiber$"+ma,it="__reactProps$"+ma,sl="__reactContainer$"+ma,Er="__reactEvents$"+ma,Yp="__reactListeners$"+ma,Bp="__reactHandles$"+ma,iu="__reactResources$"+ma,nn="__reactMarker$"+ma;function Nr(e){delete e[lt],delete e[it],delete e[Er],delete e[Yp],delete e[Bp]}function dl(e){var t=e[lt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[sl]||a[lt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=xf(e);e!==null;){if(a=e[lt])return a;e=xf(e)}return t}e=a,a=e.parentNode}return null}function fl(e){if(e=e[lt]||e[sl]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function cn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function pl(e){var t=e[iu];return t||(t=e[iu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[nn]=!0}var uu=new Set,su={};function Va(e,t){hl(e,t),hl(e+"Capture",t)}function hl(e,t){for(su[e]=t,e=0;e<t.length;e++)uu.add(t[e])}var Vp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),du={},fu={};function Gp(e){return ol.call(fu,e)?!0:ol.call(du,e)?!1:Vp.test(e)?fu[e]=!0:(du[e]=!0,!1)}function uc(e,t,a){if(Gp(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function sc(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Pt(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}var Or,pu;function _l(e){if(Or===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Or=t&&t[1]||"",pu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Or+e+pu}var Ur=!1;function jr(e,t){if(!e||Ur)return"";Ur=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(U){var O=U}Reflect.construct(e,[],G)}else{try{G.call()}catch(U){O=U}e.call(G.prototype)}}else{try{throw Error()}catch(U){O=U}(G=e())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(U){if(U&&O&&typeof U.stack=="string")return[U.stack,O.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=l.DetermineComponentFrameRoot(),y=i[0],g=i[1];if(y&&g){var C=y.split(`
`),N=g.split(`
`);for(c=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;c<N.length&&!N[c].includes("DetermineComponentFrameRoot");)c++;if(l===C.length||c===N.length)for(l=C.length-1,c=N.length-1;1<=l&&0<=c&&C[l]!==N[c];)c--;for(;1<=l&&0<=c;l--,c--)if(C[l]!==N[c]){if(l!==1||c!==1)do if(l--,c--,0>c||C[l]!==N[c]){var Y=`
`+C[l].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=l&&0<=c);break}}}finally{Ur=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?_l(a):""}function $p(e){switch(e.tag){case 26:case 27:case 5:return _l(e.type);case 16:return _l("Lazy");case 13:return _l("Suspense");case 19:return _l("SuspenseList");case 0:case 15:return jr(e.type,!1);case 11:return jr(e.type.render,!1);case 1:return jr(e.type,!0);case 31:return _l("Activity");default:return""}}function hu(e){try{var t="";do t+=$p(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function At(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _u(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xp(e){var t=_u(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,i=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){l=""+y,i.call(this,y)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dc(e){e._valueTracker||(e._valueTracker=Xp(e))}function yu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=_u(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function fc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Qp=/[\n"\\]/g;function xt(e){return e.replace(Qp,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Mr(e,t,a,l,c,i,y,g){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+At(t)):e.value!==""+At(t)&&(e.value=""+At(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?zr(e,y,At(t)):a!=null?zr(e,y,At(a)):l!=null&&e.removeAttribute("value"),c==null&&i!=null&&(e.defaultChecked=!!i),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.name=""+At(g):e.removeAttribute("name")}function mu(e,t,a,l,c,i,y,g){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||a!=null){if(!(i!=="submit"&&i!=="reset"||t!=null))return;a=a!=null?""+At(a):"",t=t!=null?""+At(t):a,g||t===e.value||(e.value=t),e.defaultValue=t}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=g?e.checked:!!l,e.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y)}function zr(e,t,a){t==="number"&&fc(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function yl(e,t,a,l){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&l&&(e[a].defaultSelected=!0)}else{for(a=""+At(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function vu(e,t,a){if(t!=null&&(t=""+At(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+At(a):""}function gu(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(r(92));if(ye(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=At(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function ml(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Fp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Su(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||Fp.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function bu(e,t,a){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var c in t)l=t[c],t.hasOwnProperty(c)&&a[c]!==l&&Su(e,c,l)}else for(var i in t)t.hasOwnProperty(i)&&Su(e,i,t[i])}function Hr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pc(e){return Kp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var kr=null;function Lr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vl=null,gl=null;function wu(e){var t=fl(e);if(t&&(e=t.stateNode)){var a=e[it]||null;e:switch(e=t.stateNode,t.type){case"input":if(Mr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+xt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var c=l[it]||null;if(!c)throw Error(r(90));Mr(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&yu(l)}break e;case"textarea":vu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&yl(e,!!a.multiple,t,!1)}}}var Yr=!1;function Cu(e,t,a){if(Yr)return e(t,a);Yr=!0;try{var l=e(t);return l}finally{if(Yr=!1,(vl!==null||gl!==null)&&(Ic(),vl&&(t=vl,e=gl,gl=vl=null,wu(t),e)))for(t=0;t<e.length;t++)wu(e[t])}}function rn(e,t){var a=e.stateNode;if(a===null)return null;var l=a[it]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,t,typeof a));return a}var Jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Br=!1;if(Jt)try{var on={};Object.defineProperty(on,"passive",{get:function(){Br=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{Br=!1}var va=null,Vr=null,hc=null;function Ru(){if(hc)return hc;var e,t=Vr,a=t.length,l,c="value"in va?va.value:va.textContent,i=c.length;for(e=0;e<a&&t[e]===c[e];e++);var y=a-e;for(l=1;l<=y&&t[a-l]===c[i-l];l++);return hc=c.slice(e,1<l?1-l:void 0)}function _c(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yc(){return!0}function Au(){return!1}function ut(e){function t(a,l,c,i,y){this._reactName=a,this._targetInst=c,this.type=l,this.nativeEvent=i,this.target=y,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(a=e[g],this[g]=a?a(i):i[g]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yc:Au,this.isPropagationStopped=Au,this}return m(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),t}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mc=ut(Ga),un=m({},Ga,{view:0,detail:0}),Pp=ut(un),Gr,$r,sn,vc=m({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&e.type==="mousemove"?(Gr=e.screenX-sn.screenX,$r=e.screenY-sn.screenY):$r=Gr=0,sn=e),Gr)},movementY:function(e){return"movementY"in e?e.movementY:$r}}),xu=ut(vc),Jp=m({},vc,{dataTransfer:0}),Ip=ut(Jp),Wp=m({},un,{relatedTarget:0}),Xr=ut(Wp),eh=m({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),th=ut(eh),ah=m({},Ga,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lh=ut(ah),nh=m({},Ga,{data:0}),qu=ut(nh),ch={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ih(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oh[e])?!!t[e]:!1}function Qr(){return ih}var uh=m({},un,{key:function(e){if(e.key){var t=ch[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_c(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qr,charCode:function(e){return e.type==="keypress"?_c(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_c(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sh=ut(uh),dh=m({},vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Du=ut(dh),fh=m({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qr}),ph=ut(fh),hh=m({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),_h=ut(hh),yh=m({},vc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mh=ut(yh),vh=m({},Ga,{newState:0,oldState:0}),gh=ut(vh),Sh=[9,13,27,32],Fr=Jt&&"CompositionEvent"in window,dn=null;Jt&&"documentMode"in document&&(dn=document.documentMode);var bh=Jt&&"TextEvent"in window&&!dn,Tu=Jt&&(!Fr||dn&&8<dn&&11>=dn),Eu=" ",Nu=!1;function Ou(e,t){switch(e){case"keyup":return Sh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sl=!1;function wh(e,t){switch(e){case"compositionend":return Uu(t);case"keypress":return t.which!==32?null:(Nu=!0,Eu);case"textInput":return e=t.data,e===Eu&&Nu?null:e;default:return null}}function Ch(e,t){if(Sl)return e==="compositionend"||!Fr&&Ou(e,t)?(e=Ru(),hc=Vr=va=null,Sl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tu&&t.locale!=="ko"?null:t.data;default:return null}}var Rh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ju(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Rh[e.type]:t==="textarea"}function Mu(e,t,a,l){vl?gl?gl.push(l):gl=[l]:vl=l,t=nr(t,"onChange"),0<t.length&&(a=new mc("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var fn=null,pn=null;function Ah(e){yf(e,0)}function gc(e){var t=cn(e);if(yu(t))return e}function zu(e,t){if(e==="change")return t}var Hu=!1;if(Jt){var Zr;if(Jt){var Kr="oninput"in document;if(!Kr){var ku=document.createElement("div");ku.setAttribute("oninput","return;"),Kr=typeof ku.oninput=="function"}Zr=Kr}else Zr=!1;Hu=Zr&&(!document.documentMode||9<document.documentMode)}function Lu(){fn&&(fn.detachEvent("onpropertychange",Yu),pn=fn=null)}function Yu(e){if(e.propertyName==="value"&&gc(pn)){var t=[];Mu(t,pn,e,Lr(e)),Cu(Ah,t)}}function xh(e,t,a){e==="focusin"?(Lu(),fn=t,pn=a,fn.attachEvent("onpropertychange",Yu)):e==="focusout"&&Lu()}function qh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gc(pn)}function Dh(e,t){if(e==="click")return gc(t)}function Th(e,t){if(e==="input"||e==="change")return gc(t)}function Eh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:Eh;function hn(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var c=a[l];if(!ol.call(t,c)||!_t(e[c],t[c]))return!1}return!0}function Bu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vu(e,t){var a=Bu(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bu(a)}}function Gu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $u(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=fc(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=fc(e.document)}return t}function Pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Nh=Jt&&"documentMode"in document&&11>=document.documentMode,bl=null,Jr=null,_n=null,Ir=!1;function Xu(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ir||bl==null||bl!==fc(l)||(l=bl,"selectionStart"in l&&Pr(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),_n&&hn(_n,l)||(_n=l,l=nr(Jr,"onSelect"),0<l.length&&(t=new mc("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=bl)))}function $a(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var wl={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionrun:$a("Transition","TransitionRun"),transitionstart:$a("Transition","TransitionStart"),transitioncancel:$a("Transition","TransitionCancel"),transitionend:$a("Transition","TransitionEnd")},Wr={},Qu={};Jt&&(Qu=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function Xa(e){if(Wr[e])return Wr[e];if(!wl[e])return e;var t=wl[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Qu)return Wr[e]=t[a];return e}var Fu=Xa("animationend"),Zu=Xa("animationiteration"),Ku=Xa("animationstart"),Oh=Xa("transitionrun"),Uh=Xa("transitionstart"),jh=Xa("transitioncancel"),Pu=Xa("transitionend"),Ju=new Map,eo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");eo.push("scrollEnd");function zt(e,t){Ju.set(e,t),Va(t,[e])}var Iu=new WeakMap;function qt(e,t){if(typeof e=="object"&&e!==null){var a=Iu.get(e);return a!==void 0?a:(t={value:e,source:t,stack:hu(t)},Iu.set(e,t),t)}return{value:e,source:t,stack:hu(t)}}var Dt=[],Cl=0,to=0;function Sc(){for(var e=Cl,t=to=Cl=0;t<e;){var a=Dt[t];Dt[t++]=null;var l=Dt[t];Dt[t++]=null;var c=Dt[t];Dt[t++]=null;var i=Dt[t];if(Dt[t++]=null,l!==null&&c!==null){var y=l.pending;y===null?c.next=c:(c.next=y.next,y.next=c),l.pending=c}i!==0&&Wu(a,c,i)}}function bc(e,t,a,l){Dt[Cl++]=e,Dt[Cl++]=t,Dt[Cl++]=a,Dt[Cl++]=l,to|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function ao(e,t,a,l){return bc(e,t,a,l),wc(e)}function Rl(e,t){return bc(e,null,null,t),wc(e)}function Wu(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var c=!1,i=e.return;i!==null;)i.childLanes|=a,l=i.alternate,l!==null&&(l.childLanes|=a),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(c=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,c&&t!==null&&(c=31-je(a),e=i.hiddenUpdates,l=e[c],l===null?e[c]=[t]:l.push(t),t.lane=a|536870912),i):null}function wc(e){if(50<Yn)throw Yn=0,ui=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Al={};function Mh(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(e,t,a,l){return new Mh(e,t,a,l)}function lo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function It(e,t){var a=e.alternate;return a===null?(a=yt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function es(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Cc(e,t,a,l,c,i){var y=0;if(l=e,typeof e=="function")lo(e)&&(y=1);else if(typeof e=="string")y=H_(e,a,I.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case te:return e=yt(31,a,t,c),e.elementType=te,e.lanes=i,e;case T:return Qa(a.children,c,i,t);case D:y=8,c|=24;break;case M:return e=yt(12,a,t,c|2),e.elementType=M,e.lanes=i,e;case k:return e=yt(13,a,t,c),e.elementType=k,e.lanes=i,e;case Z:return e=yt(19,a,t,c),e.elementType=Z,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:case L:y=10;break e;case W:y=9;break e;case J:y=11;break e;case se:y=14;break e;case fe:y=16,l=null;break e}y=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return t=yt(y,a,t,c),t.elementType=e,t.type=l,t.lanes=i,t}function Qa(e,t,a,l){return e=yt(7,e,l,t),e.lanes=a,e}function no(e,t,a){return e=yt(6,e,null,t),e.lanes=a,e}function co(e,t,a){return t=yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var xl=[],ql=0,Rc=null,Ac=0,Tt=[],Et=0,Fa=null,Wt=1,ea="";function Za(e,t){xl[ql++]=Ac,xl[ql++]=Rc,Rc=e,Ac=t}function ts(e,t,a){Tt[Et++]=Wt,Tt[Et++]=ea,Tt[Et++]=Fa,Fa=e;var l=Wt;e=ea;var c=32-je(l)-1;l&=~(1<<c),a+=1;var i=32-je(t)+c;if(30<i){var y=c-c%5;i=(l&(1<<y)-1).toString(32),l>>=y,c-=y,Wt=1<<32-je(t)+c|a<<c|l,ea=i+e}else Wt=1<<i|a<<c|l,ea=e}function ro(e){e.return!==null&&(Za(e,1),ts(e,1,0))}function oo(e){for(;e===Rc;)Rc=xl[--ql],xl[ql]=null,Ac=xl[--ql],xl[ql]=null;for(;e===Fa;)Fa=Tt[--Et],Tt[Et]=null,ea=Tt[--Et],Tt[Et]=null,Wt=Tt[--Et],Tt[Et]=null}var rt=null,Le=null,Ce=!1,Ka=null,Yt=!1,io=Error(r(519));function Pa(e){var t=Error(r(418,""));throw vn(qt(t,e)),io}function as(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[lt]=e,t[it]=l,a){case"dialog":ge("cancel",t),ge("close",t);break;case"iframe":case"object":case"embed":ge("load",t);break;case"video":case"audio":for(a=0;a<Vn.length;a++)ge(Vn[a],t);break;case"source":ge("error",t);break;case"img":case"image":case"link":ge("error",t),ge("load",t);break;case"details":ge("toggle",t);break;case"input":ge("invalid",t),mu(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),dc(t);break;case"select":ge("invalid",t);break;case"textarea":ge("invalid",t),gu(t,l.value,l.defaultValue,l.children),dc(t)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||Sf(t.textContent,a)?(l.popover!=null&&(ge("beforetoggle",t),ge("toggle",t)),l.onScroll!=null&&ge("scroll",t),l.onScrollEnd!=null&&ge("scrollend",t),l.onClick!=null&&(t.onclick=cr),t=!0):t=!1,t||Pa(e)}function ls(e){for(rt=e.return;rt;)switch(rt.tag){case 5:case 13:Yt=!1;return;case 27:case 3:Yt=!0;return;default:rt=rt.return}}function yn(e){if(e!==rt)return!1;if(!Ce)return ls(e),Ce=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ai(e.type,e.memoizedProps)),a=!a),a&&Le&&Pa(e),ls(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Le=kt(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Le=null}}else t===27?(t=Le,ja(e.type)?(e=Ti,Ti=null,Le=e):Le=t):Le=rt?kt(e.stateNode.nextSibling):null;return!0}function mn(){Le=rt=null,Ce=!1}function ns(){var e=Ka;return e!==null&&(ft===null?ft=e:ft.push.apply(ft,e),Ka=null),e}function vn(e){Ka===null?Ka=[e]:Ka.push(e)}var uo=H(null),Ja=null,ta=null;function ga(e,t,a){Q(uo,t._currentValue),t._currentValue=a}function aa(e){e._currentValue=uo.current,F(uo)}function so(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function fo(e,t,a,l){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var i=c.dependencies;if(i!==null){var y=c.child;i=i.firstContext;e:for(;i!==null;){var g=i;i=c;for(var C=0;C<t.length;C++)if(g.context===t[C]){i.lanes|=a,g=i.alternate,g!==null&&(g.lanes|=a),so(i.return,a,e),l||(y=null);break e}i=g.next}}else if(c.tag===18){if(y=c.return,y===null)throw Error(r(341));y.lanes|=a,i=y.alternate,i!==null&&(i.lanes|=a),so(y,a,e),y=null}else y=c.child;if(y!==null)y.return=c;else for(y=c;y!==null;){if(y===e){y=null;break}if(c=y.sibling,c!==null){c.return=y.return,y=c;break}y=y.return}c=y}}function gn(e,t,a,l){e=null;for(var c=t,i=!1;c!==null;){if(!i){if((c.flags&524288)!==0)i=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var y=c.alternate;if(y===null)throw Error(r(387));if(y=y.memoizedProps,y!==null){var g=c.type;_t(c.pendingProps.value,y.value)||(e!==null?e.push(g):e=[g])}}else if(c===Ve.current){if(y=c.alternate,y===null)throw Error(r(387));y.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Zn):e=[Zn])}c=c.return}e!==null&&fo(t,e,a,l),t.flags|=262144}function xc(e){for(e=e.firstContext;e!==null;){if(!_t(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ia(e){Ja=e,ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function nt(e){return cs(Ja,e)}function qc(e,t){return Ja===null&&Ia(e),cs(e,t)}function cs(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ta===null){if(e===null)throw Error(r(308));ta=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ta=ta.next=t;return a}var zh=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Hh=n.unstable_scheduleCallback,kh=n.unstable_NormalPriority,Fe={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function po(){return{controller:new zh,data:new Map,refCount:0}}function Sn(e){e.refCount--,e.refCount===0&&Hh(kh,function(){e.controller.abort()})}var bn=null,ho=0,Dl=0,Tl=null;function Lh(e,t){if(bn===null){var a=bn=[];ho=0,Dl=yi(),Tl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ho++,t.then(rs,rs),t}function rs(){if(--ho===0&&bn!==null){Tl!==null&&(Tl.status="fulfilled");var e=bn;bn=null,Dl=0,Tl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Yh(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(l.status="rejected",l.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),l}var os=z.S;z.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Lh(e,t),os!==null&&os(e,t)};var Wa=H(null);function _o(){var e=Wa.current;return e!==null?e:Ue.pooledCache}function Dc(e,t){t===null?Q(Wa,Wa.current):Q(Wa,t.pool)}function is(){var e=_o();return e===null?null:{parent:Fe._currentValue,pool:e}}var wn=Error(r(460)),us=Error(r(474)),Tc=Error(r(542)),yo={then:function(){}};function ss(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ec(){}function ds(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Ec,Ec),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ps(e),e;default:if(typeof t.status=="string")t.then(Ec,Ec);else{if(e=Ue,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=l}},function(l){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ps(e),e}throw Cn=t,wn}}var Cn=null;function fs(){if(Cn===null)throw Error(r(459));var e=Cn;return Cn=null,e}function ps(e){if(e===wn||e===Tc)throw Error(r(483))}var Sa=!1;function mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wa(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Re&2)!==0){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,t=wc(e),Wu(e,null,a),t}return bc(e,l,t,a),wc(e)}function Rn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,ru(e,a)}}function go(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var c=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};i===null?c=i=y:i=i.next=y,a=a.next}while(a!==null);i===null?c=i=t:i=i.next=t}else c=i=t;a={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:i,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var So=!1;function An(){if(So){var e=Tl;if(e!==null)throw e}}function xn(e,t,a,l){So=!1;var c=e.updateQueue;Sa=!1;var i=c.firstBaseUpdate,y=c.lastBaseUpdate,g=c.shared.pending;if(g!==null){c.shared.pending=null;var C=g,N=C.next;C.next=null,y===null?i=N:y.next=N,y=C;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,g=Y.lastBaseUpdate,g!==y&&(g===null?Y.firstBaseUpdate=N:g.next=N,Y.lastBaseUpdate=C))}if(i!==null){var G=c.baseState;y=0,Y=N=C=null,g=i;do{var O=g.lane&-536870913,U=O!==g.lane;if(U?(be&O)===O:(l&O)===O){O!==0&&O===Dl&&(So=!0),Y!==null&&(Y=Y.next={lane:0,tag:g.tag,payload:g.payload,callback:null,next:null});e:{var ie=e,ce=g;O=t;var Ee=a;switch(ce.tag){case 1:if(ie=ce.payload,typeof ie=="function"){G=ie.call(Ee,G,O);break e}G=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=ce.payload,O=typeof ie=="function"?ie.call(Ee,G,O):ie,O==null)break e;G=m({},G,O);break e;case 2:Sa=!0}}O=g.callback,O!==null&&(e.flags|=64,U&&(e.flags|=8192),U=c.callbacks,U===null?c.callbacks=[O]:U.push(O))}else U={lane:O,tag:g.tag,payload:g.payload,callback:g.callback,next:null},Y===null?(N=Y=U,C=G):Y=Y.next=U,y|=O;if(g=g.next,g===null){if(g=c.shared.pending,g===null)break;U=g,g=U.next,U.next=null,c.lastBaseUpdate=U,c.shared.pending=null}}while(!0);Y===null&&(C=G),c.baseState=C,c.firstBaseUpdate=N,c.lastBaseUpdate=Y,i===null&&(c.shared.lanes=0),Ea|=y,e.lanes=y,e.memoizedState=G}}function hs(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function _s(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)hs(a[e],t)}var El=H(null),Nc=H(0);function ys(e,t){e=ua,Q(Nc,e),Q(El,t),ua=e|t.baseLanes}function bo(){Q(Nc,ua),Q(El,El.current)}function wo(){ua=Nc.current,F(El),F(Nc)}var Ca=0,pe=null,De=null,Xe=null,Oc=!1,Nl=!1,el=!1,Uc=0,qn=0,Ol=null,Bh=0;function Ge(){throw Error(r(321))}function Co(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!_t(e[a],t[a]))return!1;return!0}function Ro(e,t,a,l,c,i){return Ca=i,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z.H=e===null||e.memoizedState===null?Ws:ed,el=!1,i=a(l,c),el=!1,Nl&&(i=vs(t,a,l,c)),ms(e),i}function ms(e){z.H=Lc;var t=De!==null&&De.next!==null;if(Ca=0,Xe=De=pe=null,Oc=!1,qn=0,Ol=null,t)throw Error(r(300));e===null||Pe||(e=e.dependencies,e!==null&&xc(e)&&(Pe=!0))}function vs(e,t,a,l){pe=e;var c=0;do{if(Nl&&(Ol=null),qn=0,Nl=!1,25<=c)throw Error(r(301));if(c+=1,Xe=De=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}z.H=Zh,i=t(a,l)}while(Nl);return i}function Vh(){var e=z.H,t=e.useState()[0];return t=typeof t.then=="function"?Dn(t):t,e=e.useState()[0],(De!==null?De.memoizedState:null)!==e&&(pe.flags|=1024),t}function Ao(){var e=Uc!==0;return Uc=0,e}function xo(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function qo(e){if(Oc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Oc=!1}Ca=0,Xe=De=pe=null,Nl=!1,qn=Uc=0,Ol=null}function st(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?pe.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Qe(){if(De===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var t=Xe===null?pe.memoizedState:Xe.next;if(t!==null)Xe=t,De=e;else{if(e===null)throw pe.alternate===null?Error(r(467)):Error(r(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Xe===null?pe.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function Do(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dn(e){var t=qn;return qn+=1,Ol===null&&(Ol=[]),e=ds(Ol,e,t),t=pe,(Xe===null?t.memoizedState:Xe.next)===null&&(t=t.alternate,z.H=t===null||t.memoizedState===null?Ws:ed),e}function jc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Dn(e);if(e.$$typeof===L)return nt(e)}throw Error(r(438,String(e)))}function To(e){var t=null,a=pe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=pe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Do(),pe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=le;return t.index++,a}function la(e,t){return typeof t=="function"?t(e):t}function Mc(e){var t=Qe();return Eo(t,De,e)}function Eo(e,t,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var c=e.baseQueue,i=l.pending;if(i!==null){if(c!==null){var y=c.next;c.next=i.next,i.next=y}t.baseQueue=c=i,l.pending=null}if(i=e.baseState,c===null)e.memoizedState=i;else{t=c.next;var g=y=null,C=null,N=t,Y=!1;do{var G=N.lane&-536870913;if(G!==N.lane?(be&G)===G:(Ca&G)===G){var O=N.revertLane;if(O===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),G===Dl&&(Y=!0);else if((Ca&O)===O){N=N.next,O===Dl&&(Y=!0);continue}else G={lane:0,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},C===null?(g=C=G,y=i):C=C.next=G,pe.lanes|=O,Ea|=O;G=N.action,el&&a(i,G),i=N.hasEagerState?N.eagerState:a(i,G)}else O={lane:G,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},C===null?(g=C=O,y=i):C=C.next=O,pe.lanes|=G,Ea|=G;N=N.next}while(N!==null&&N!==t);if(C===null?y=i:C.next=g,!_t(i,e.memoizedState)&&(Pe=!0,Y&&(a=Tl,a!==null)))throw a;e.memoizedState=i,e.baseState=y,e.baseQueue=C,l.lastRenderedState=i}return c===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function No(e){var t=Qe(),a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,c=a.pending,i=t.memoizedState;if(c!==null){a.pending=null;var y=c=c.next;do i=e(i,y.action),y=y.next;while(y!==c);_t(i,t.memoizedState)||(Pe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),a.lastRenderedState=i}return[i,l]}function gs(e,t,a){var l=pe,c=Qe(),i=Ce;if(i){if(a===void 0)throw Error(r(407));a=a()}else a=t();var y=!_t((De||c).memoizedState,a);y&&(c.memoizedState=a,Pe=!0),c=c.queue;var g=ws.bind(null,l,c,e);if(Tn(2048,8,g,[e]),c.getSnapshot!==t||y||Xe!==null&&Xe.memoizedState.tag&1){if(l.flags|=2048,Ul(9,zc(),bs.bind(null,l,c,a,t),null),Ue===null)throw Error(r(349));i||(Ca&124)!==0||Ss(l,t,a)}return a}function Ss(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=pe.updateQueue,t===null?(t=Do(),pe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function bs(e,t,a,l){t.value=a,t.getSnapshot=l,Cs(t)&&Rs(e)}function ws(e,t,a){return a(function(){Cs(t)&&Rs(e)})}function Cs(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!_t(e,a)}catch{return!0}}function Rs(e){var t=Rl(e,2);t!==null&&bt(t,e,2)}function Oo(e){var t=st();if(typeof e=="function"){var a=e;if(e=a(),el){ze(!0);try{a()}finally{ze(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:e},t}function As(e,t,a,l){return e.baseState=a,Eo(e,De,typeof l=="function"?l:la)}function Gh(e,t,a,l,c){if(kc(e))throw Error(r(485));if(e=t.action,e!==null){var i={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){i.listeners.push(y)}};z.T!==null?a(!0):i.isTransition=!1,l(i),a=t.pending,a===null?(i.next=t.pending=i,xs(t,i)):(i.next=a.next,t.pending=a.next=i)}}function xs(e,t){var a=t.action,l=t.payload,c=e.state;if(t.isTransition){var i=z.T,y={};z.T=y;try{var g=a(c,l),C=z.S;C!==null&&C(y,g),qs(e,t,g)}catch(N){Uo(e,t,N)}finally{z.T=i}}else try{i=a(c,l),qs(e,t,i)}catch(N){Uo(e,t,N)}}function qs(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ds(e,t,l)},function(l){return Uo(e,t,l)}):Ds(e,t,a)}function Ds(e,t,a){t.status="fulfilled",t.value=a,Ts(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,xs(e,a)))}function Uo(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,Ts(t),t=t.next;while(t!==l)}e.action=null}function Ts(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Es(e,t){return t}function Ns(e,t){if(Ce){var a=Ue.formState;if(a!==null){e:{var l=pe;if(Ce){if(Le){t:{for(var c=Le,i=Yt;c.nodeType!==8;){if(!i){c=null;break t}if(c=kt(c.nextSibling),c===null){c=null;break t}}i=c.data,c=i==="F!"||i==="F"?c:null}if(c){Le=kt(c.nextSibling),l=c.data==="F!";break e}}Pa(l)}l=!1}l&&(t=a[0])}}return a=st(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:t},a.queue=l,a=Ps.bind(null,pe,l),l.dispatch=a,l=Oo(!1),i=ko.bind(null,pe,!1,l.queue),l=st(),c={state:t,dispatch:null,action:e,pending:null},l.queue=c,a=Gh.bind(null,pe,c,i,a),c.dispatch=a,l.memoizedState=e,[t,a,!1]}function Os(e){var t=Qe();return Us(t,De,e)}function Us(e,t,a){if(t=Eo(e,t,Es)[0],e=Mc(la)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Dn(t)}catch(y){throw y===wn?Tc:y}else l=t;t=Qe();var c=t.queue,i=c.dispatch;return a!==t.memoizedState&&(pe.flags|=2048,Ul(9,zc(),$h.bind(null,c,a),null)),[l,i,e]}function $h(e,t){e.action=t}function js(e){var t=Qe(),a=De;if(a!==null)return Us(t,a,e);Qe(),t=t.memoizedState,a=Qe();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function Ul(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=pe.updateQueue,t===null&&(t=Do(),pe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function zc(){return{destroy:void 0,resource:void 0}}function Ms(){return Qe().memoizedState}function Hc(e,t,a,l){var c=st();l=l===void 0?null:l,pe.flags|=e,c.memoizedState=Ul(1|t,zc(),a,l)}function Tn(e,t,a,l){var c=Qe();l=l===void 0?null:l;var i=c.memoizedState.inst;De!==null&&l!==null&&Co(l,De.memoizedState.deps)?c.memoizedState=Ul(t,i,a,l):(pe.flags|=e,c.memoizedState=Ul(1|t,i,a,l))}function zs(e,t){Hc(8390656,8,e,t)}function Hs(e,t){Tn(2048,8,e,t)}function ks(e,t){return Tn(4,2,e,t)}function Ls(e,t){return Tn(4,4,e,t)}function Ys(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bs(e,t,a){a=a!=null?a.concat([e]):null,Tn(4,4,Ys.bind(null,t,e),a)}function jo(){}function Vs(e,t){var a=Qe();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&Co(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function Gs(e,t){var a=Qe();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&Co(t,l[1]))return l[0];if(l=e(),el){ze(!0);try{e()}finally{ze(!1)}}return a.memoizedState=[l,t],l}function Mo(e,t,a){return a===void 0||(Ca&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=Qd(),pe.lanes|=e,Ea|=e,a)}function $s(e,t,a,l){return _t(a,t)?a:El.current!==null?(e=Mo(e,a,l),_t(e,t)||(Pe=!0),e):(Ca&42)===0?(Pe=!0,e.memoizedState=a):(e=Qd(),pe.lanes|=e,Ea|=e,t)}function Xs(e,t,a,l,c){var i=q.p;q.p=i!==0&&8>i?i:8;var y=z.T,g={};z.T=g,ko(e,!1,t,a);try{var C=c(),N=z.S;if(N!==null&&N(g,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Y=Yh(C,l);En(e,t,Y,St(e))}else En(e,t,l,St(e))}catch(G){En(e,t,{then:function(){},status:"rejected",reason:G},St())}finally{q.p=i,z.T=y}}function Xh(){}function zo(e,t,a,l){if(e.tag!==5)throw Error(r(476));var c=Qs(e).queue;Xs(e,c,t,j,a===null?Xh:function(){return Fs(e),a(l)})}function Qs(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:j},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Fs(e){var t=Qs(e).next.queue;En(e,t,{},St())}function Ho(){return nt(Zn)}function Zs(){return Qe().memoizedState}function Ks(){return Qe().memoizedState}function Qh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=St();e=ba(a);var l=wa(t,e,a);l!==null&&(bt(l,t,a),Rn(l,t,a)),t={cache:po()},e.payload=t;return}t=t.return}}function Fh(e,t,a){var l=St();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},kc(e)?Js(t,a):(a=ao(e,t,a,l),a!==null&&(bt(a,e,l),Is(a,t,l)))}function Ps(e,t,a){var l=St();En(e,t,a,l)}function En(e,t,a,l){var c={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(kc(e))Js(t,c);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var y=t.lastRenderedState,g=i(y,a);if(c.hasEagerState=!0,c.eagerState=g,_t(g,y))return bc(e,t,c,0),Ue===null&&Sc(),!1}catch{}finally{}if(a=ao(e,t,c,l),a!==null)return bt(a,e,l),Is(a,t,l),!0}return!1}function ko(e,t,a,l){if(l={lane:2,revertLane:yi(),action:l,hasEagerState:!1,eagerState:null,next:null},kc(e)){if(t)throw Error(r(479))}else t=ao(e,a,l,2),t!==null&&bt(t,e,2)}function kc(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function Js(e,t){Nl=Oc=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Is(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,ru(e,a)}}var Lc={readContext:nt,use:jc,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge},Ws={readContext:nt,use:jc,useCallback:function(e,t){return st().memoizedState=[e,t===void 0?null:t],e},useContext:nt,useEffect:zs,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Hc(4194308,4,Ys.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Hc(4194308,4,e,t)},useInsertionEffect:function(e,t){Hc(4,2,e,t)},useMemo:function(e,t){var a=st();t=t===void 0?null:t;var l=e();if(el){ze(!0);try{e()}finally{ze(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=st();if(a!==void 0){var c=a(t);if(el){ze(!0);try{a(t)}finally{ze(!1)}}}else c=t;return l.memoizedState=l.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},l.queue=e,e=e.dispatch=Fh.bind(null,pe,e),[l.memoizedState,e]},useRef:function(e){var t=st();return e={current:e},t.memoizedState=e},useState:function(e){e=Oo(e);var t=e.queue,a=Ps.bind(null,pe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:jo,useDeferredValue:function(e,t){var a=st();return Mo(a,e,t)},useTransition:function(){var e=Oo(!1);return e=Xs.bind(null,pe,e.queue,!0,!1),st().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=pe,c=st();if(Ce){if(a===void 0)throw Error(r(407));a=a()}else{if(a=t(),Ue===null)throw Error(r(349));(be&124)!==0||Ss(l,t,a)}c.memoizedState=a;var i={value:a,getSnapshot:t};return c.queue=i,zs(ws.bind(null,l,i,e),[e]),l.flags|=2048,Ul(9,zc(),bs.bind(null,l,i,a,t),null),a},useId:function(){var e=st(),t=Ue.identifierPrefix;if(Ce){var a=ea,l=Wt;a=(l&~(1<<32-je(l)-1)).toString(32)+a,t=""+t+"R"+a,a=Uc++,0<a&&(t+="H"+a.toString(32)),t+=""}else a=Bh++,t=""+t+"r"+a.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Ho,useFormState:Ns,useActionState:Ns,useOptimistic:function(e){var t=st();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=ko.bind(null,pe,!0,a),a.dispatch=t,[e,t]},useMemoCache:To,useCacheRefresh:function(){return st().memoizedState=Qh.bind(null,pe)}},ed={readContext:nt,use:jc,useCallback:Vs,useContext:nt,useEffect:Hs,useImperativeHandle:Bs,useInsertionEffect:ks,useLayoutEffect:Ls,useMemo:Gs,useReducer:Mc,useRef:Ms,useState:function(){return Mc(la)},useDebugValue:jo,useDeferredValue:function(e,t){var a=Qe();return $s(a,De.memoizedState,e,t)},useTransition:function(){var e=Mc(la)[0],t=Qe().memoizedState;return[typeof e=="boolean"?e:Dn(e),t]},useSyncExternalStore:gs,useId:Zs,useHostTransitionStatus:Ho,useFormState:Os,useActionState:Os,useOptimistic:function(e,t){var a=Qe();return As(a,De,e,t)},useMemoCache:To,useCacheRefresh:Ks},Zh={readContext:nt,use:jc,useCallback:Vs,useContext:nt,useEffect:Hs,useImperativeHandle:Bs,useInsertionEffect:ks,useLayoutEffect:Ls,useMemo:Gs,useReducer:No,useRef:Ms,useState:function(){return No(la)},useDebugValue:jo,useDeferredValue:function(e,t){var a=Qe();return De===null?Mo(a,e,t):$s(a,De.memoizedState,e,t)},useTransition:function(){var e=No(la)[0],t=Qe().memoizedState;return[typeof e=="boolean"?e:Dn(e),t]},useSyncExternalStore:gs,useId:Zs,useHostTransitionStatus:Ho,useFormState:js,useActionState:js,useOptimistic:function(e,t){var a=Qe();return De!==null?As(a,De,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:To,useCacheRefresh:Ks},jl=null,Nn=0;function Yc(e){var t=Nn;return Nn+=1,jl===null&&(jl=[]),ds(jl,e,t)}function On(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Bc(e,t){throw t.$$typeof===S?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function td(e){var t=e._init;return t(e._payload)}function ad(e){function t(x,A){if(e){var E=x.deletions;E===null?(x.deletions=[A],x.flags|=16):E.push(A)}}function a(x,A){if(!e)return null;for(;A!==null;)t(x,A),A=A.sibling;return null}function l(x){for(var A=new Map;x!==null;)x.key!==null?A.set(x.key,x):A.set(x.index,x),x=x.sibling;return A}function c(x,A){return x=It(x,A),x.index=0,x.sibling=null,x}function i(x,A,E){return x.index=E,e?(E=x.alternate,E!==null?(E=E.index,E<A?(x.flags|=67108866,A):E):(x.flags|=67108866,A)):(x.flags|=1048576,A)}function y(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function g(x,A,E,B){return A===null||A.tag!==6?(A=no(E,x.mode,B),A.return=x,A):(A=c(A,E),A.return=x,A)}function C(x,A,E,B){var ee=E.type;return ee===T?Y(x,A,E.props.children,B,E.key):A!==null&&(A.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===fe&&td(ee)===A.type)?(A=c(A,E.props),On(A,E),A.return=x,A):(A=Cc(E.type,E.key,E.props,null,x.mode,B),On(A,E),A.return=x,A)}function N(x,A,E,B){return A===null||A.tag!==4||A.stateNode.containerInfo!==E.containerInfo||A.stateNode.implementation!==E.implementation?(A=co(E,x.mode,B),A.return=x,A):(A=c(A,E.children||[]),A.return=x,A)}function Y(x,A,E,B,ee){return A===null||A.tag!==7?(A=Qa(E,x.mode,B,ee),A.return=x,A):(A=c(A,E),A.return=x,A)}function G(x,A,E){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=no(""+A,x.mode,E),A.return=x,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case b:return E=Cc(A.type,A.key,A.props,null,x.mode,E),On(E,A),E.return=x,E;case R:return A=co(A,x.mode,E),A.return=x,A;case fe:var B=A._init;return A=B(A._payload),G(x,A,E)}if(ye(A)||Se(A))return A=Qa(A,x.mode,E,null),A.return=x,A;if(typeof A.then=="function")return G(x,Yc(A),E);if(A.$$typeof===L)return G(x,qc(x,A),E);Bc(x,A)}return null}function O(x,A,E,B){var ee=A!==null?A.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return ee!==null?null:g(x,A,""+E,B);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case b:return E.key===ee?C(x,A,E,B):null;case R:return E.key===ee?N(x,A,E,B):null;case fe:return ee=E._init,E=ee(E._payload),O(x,A,E,B)}if(ye(E)||Se(E))return ee!==null?null:Y(x,A,E,B,null);if(typeof E.then=="function")return O(x,A,Yc(E),B);if(E.$$typeof===L)return O(x,A,qc(x,E),B);Bc(x,E)}return null}function U(x,A,E,B,ee){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return x=x.get(E)||null,g(A,x,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return x=x.get(B.key===null?E:B.key)||null,C(A,x,B,ee);case R:return x=x.get(B.key===null?E:B.key)||null,N(A,x,B,ee);case fe:var _e=B._init;return B=_e(B._payload),U(x,A,E,B,ee)}if(ye(B)||Se(B))return x=x.get(E)||null,Y(A,x,B,ee,null);if(typeof B.then=="function")return U(x,A,E,Yc(B),ee);if(B.$$typeof===L)return U(x,A,E,qc(A,B),ee);Bc(A,B)}return null}function ie(x,A,E,B){for(var ee=null,_e=null,ae=A,oe=A=0,Ie=null;ae!==null&&oe<E.length;oe++){ae.index>oe?(Ie=ae,ae=null):Ie=ae.sibling;var we=O(x,ae,E[oe],B);if(we===null){ae===null&&(ae=Ie);break}e&&ae&&we.alternate===null&&t(x,ae),A=i(we,A,oe),_e===null?ee=we:_e.sibling=we,_e=we,ae=Ie}if(oe===E.length)return a(x,ae),Ce&&Za(x,oe),ee;if(ae===null){for(;oe<E.length;oe++)ae=G(x,E[oe],B),ae!==null&&(A=i(ae,A,oe),_e===null?ee=ae:_e.sibling=ae,_e=ae);return Ce&&Za(x,oe),ee}for(ae=l(ae);oe<E.length;oe++)Ie=U(ae,x,oe,E[oe],B),Ie!==null&&(e&&Ie.alternate!==null&&ae.delete(Ie.key===null?oe:Ie.key),A=i(Ie,A,oe),_e===null?ee=Ie:_e.sibling=Ie,_e=Ie);return e&&ae.forEach(function(La){return t(x,La)}),Ce&&Za(x,oe),ee}function ce(x,A,E,B){if(E==null)throw Error(r(151));for(var ee=null,_e=null,ae=A,oe=A=0,Ie=null,we=E.next();ae!==null&&!we.done;oe++,we=E.next()){ae.index>oe?(Ie=ae,ae=null):Ie=ae.sibling;var La=O(x,ae,we.value,B);if(La===null){ae===null&&(ae=Ie);break}e&&ae&&La.alternate===null&&t(x,ae),A=i(La,A,oe),_e===null?ee=La:_e.sibling=La,_e=La,ae=Ie}if(we.done)return a(x,ae),Ce&&Za(x,oe),ee;if(ae===null){for(;!we.done;oe++,we=E.next())we=G(x,we.value,B),we!==null&&(A=i(we,A,oe),_e===null?ee=we:_e.sibling=we,_e=we);return Ce&&Za(x,oe),ee}for(ae=l(ae);!we.done;oe++,we=E.next())we=U(ae,x,oe,we.value,B),we!==null&&(e&&we.alternate!==null&&ae.delete(we.key===null?oe:we.key),A=i(we,A,oe),_e===null?ee=we:_e.sibling=we,_e=we);return e&&ae.forEach(function(K_){return t(x,K_)}),Ce&&Za(x,oe),ee}function Ee(x,A,E,B){if(typeof E=="object"&&E!==null&&E.type===T&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case b:e:{for(var ee=E.key;A!==null;){if(A.key===ee){if(ee=E.type,ee===T){if(A.tag===7){a(x,A.sibling),B=c(A,E.props.children),B.return=x,x=B;break e}}else if(A.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===fe&&td(ee)===A.type){a(x,A.sibling),B=c(A,E.props),On(B,E),B.return=x,x=B;break e}a(x,A);break}else t(x,A);A=A.sibling}E.type===T?(B=Qa(E.props.children,x.mode,B,E.key),B.return=x,x=B):(B=Cc(E.type,E.key,E.props,null,x.mode,B),On(B,E),B.return=x,x=B)}return y(x);case R:e:{for(ee=E.key;A!==null;){if(A.key===ee)if(A.tag===4&&A.stateNode.containerInfo===E.containerInfo&&A.stateNode.implementation===E.implementation){a(x,A.sibling),B=c(A,E.children||[]),B.return=x,x=B;break e}else{a(x,A);break}else t(x,A);A=A.sibling}B=co(E,x.mode,B),B.return=x,x=B}return y(x);case fe:return ee=E._init,E=ee(E._payload),Ee(x,A,E,B)}if(ye(E))return ie(x,A,E,B);if(Se(E)){if(ee=Se(E),typeof ee!="function")throw Error(r(150));return E=ee.call(E),ce(x,A,E,B)}if(typeof E.then=="function")return Ee(x,A,Yc(E),B);if(E.$$typeof===L)return Ee(x,A,qc(x,E),B);Bc(x,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,A!==null&&A.tag===6?(a(x,A.sibling),B=c(A,E),B.return=x,x=B):(a(x,A),B=no(E,x.mode,B),B.return=x,x=B),y(x)):a(x,A)}return function(x,A,E,B){try{Nn=0;var ee=Ee(x,A,E,B);return jl=null,ee}catch(ae){if(ae===wn||ae===Tc)throw ae;var _e=yt(29,ae,null,x.mode);return _e.lanes=B,_e.return=x,_e}finally{}}}var Ml=ad(!0),ld=ad(!1),Nt=H(null),Bt=null;function Ra(e){var t=e.alternate;Q(Ze,Ze.current&1),Q(Nt,e),Bt===null&&(t===null||El.current!==null||t.memoizedState!==null)&&(Bt=e)}function nd(e){if(e.tag===22){if(Q(Ze,Ze.current),Q(Nt,e),Bt===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Bt=e)}}else Aa()}function Aa(){Q(Ze,Ze.current),Q(Nt,Nt.current)}function na(e){F(Nt),Bt===e&&(Bt=null),F(Ze)}var Ze=H(0);function Vc(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Di(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Lo(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:m({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Yo={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=St(),c=ba(l);c.payload=t,a!=null&&(c.callback=a),t=wa(e,c,l),t!==null&&(bt(t,e,l),Rn(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=St(),c=ba(l);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=wa(e,c,l),t!==null&&(bt(t,e,l),Rn(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=St(),l=ba(a);l.tag=2,t!=null&&(l.callback=t),t=wa(e,l,a),t!==null&&(bt(t,e,a),Rn(t,e,a))}};function cd(e,t,a,l,c,i,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,i,y):t.prototype&&t.prototype.isPureReactComponent?!hn(a,l)||!hn(c,i):!0}function rd(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&Yo.enqueueReplaceState(t,t.state,null)}function tl(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=m({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}var Gc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function od(e){Gc(e)}function id(e){console.error(e)}function ud(e){Gc(e)}function $c(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function sd(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Bo(e,t,a){return a=ba(a),a.tag=3,a.payload={element:null},a.callback=function(){$c(e,t)},a}function dd(e){return e=ba(e),e.tag=3,e}function fd(e,t,a,l){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var i=l.value;e.payload=function(){return c(i)},e.callback=function(){sd(t,a,l)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){sd(t,a,l),typeof c!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var g=l.stack;this.componentDidCatch(l.value,{componentStack:g!==null?g:""})})}function Kh(e,t,a,l,c){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&gn(t,a,c,!0),a=Nt.current,a!==null){switch(a.tag){case 13:return Bt===null?di():a.alternate===null&&Ye===0&&(Ye=3),a.flags&=-257,a.flags|=65536,a.lanes=c,l===yo?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),pi(e,l,c)),!1;case 22:return a.flags|=65536,l===yo?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),pi(e,l,c)),!1}throw Error(r(435,a.tag))}return pi(e,l,c),di(),!1}if(Ce)return t=Nt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,l!==io&&(e=Error(r(422),{cause:l}),vn(qt(e,a)))):(l!==io&&(t=Error(r(423),{cause:l}),vn(qt(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,l=qt(l,a),c=Bo(e.stateNode,l,c),go(e,c),Ye!==4&&(Ye=2)),!1;var i=Error(r(520),{cause:l});if(i=qt(i,a),Ln===null?Ln=[i]:Ln.push(i),Ye!==4&&(Ye=2),t===null)return!0;l=qt(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Bo(a.stateNode,l,e),go(a,e),!1;case 1:if(t=a.type,i=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Na===null||!Na.has(i))))return a.flags|=65536,c&=-c,a.lanes|=c,c=dd(c),fd(c,e,a,l),go(a,c),!1}a=a.return}while(a!==null);return!1}var pd=Error(r(461)),Pe=!1;function We(e,t,a,l){t.child=e===null?ld(t,null,a,l):Ml(t,e.child,a,l)}function hd(e,t,a,l,c){a=a.render;var i=t.ref;if("ref"in l){var y={};for(var g in l)g!=="ref"&&(y[g]=l[g])}else y=l;return Ia(t),l=Ro(e,t,a,y,i,c),g=Ao(),e!==null&&!Pe?(xo(e,t,c),ca(e,t,c)):(Ce&&g&&ro(t),t.flags|=1,We(e,t,l,c),t.child)}function _d(e,t,a,l,c){if(e===null){var i=a.type;return typeof i=="function"&&!lo(i)&&i.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=i,yd(e,t,i,l,c)):(e=Cc(a.type,null,l,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!Ko(e,c)){var y=i.memoizedProps;if(a=a.compare,a=a!==null?a:hn,a(y,l)&&e.ref===t.ref)return ca(e,t,c)}return t.flags|=1,e=It(i,l),e.ref=t.ref,e.return=t,t.child=e}function yd(e,t,a,l,c){if(e!==null){var i=e.memoizedProps;if(hn(i,l)&&e.ref===t.ref)if(Pe=!1,t.pendingProps=l=i,Ko(e,c))(e.flags&131072)!==0&&(Pe=!0);else return t.lanes=e.lanes,ca(e,t,c)}return Vo(e,t,a,l,c)}function md(e,t,a){var l=t.pendingProps,c=l.children,i=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=i!==null?i.baseLanes|a:a,e!==null){for(c=t.child=e.child,i=0;c!==null;)i=i|c.lanes|c.childLanes,c=c.sibling;t.childLanes=i&~l}else t.childLanes=0,t.child=null;return vd(e,t,l,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Dc(t,i!==null?i.cachePool:null),i!==null?ys(t,i):bo(),nd(t);else return t.lanes=t.childLanes=536870912,vd(e,t,i!==null?i.baseLanes|a:a,a)}else i!==null?(Dc(t,i.cachePool),ys(t,i),Aa(),t.memoizedState=null):(e!==null&&Dc(t,null),bo(),Aa());return We(e,t,c,a),t.child}function vd(e,t,a,l){var c=_o();return c=c===null?null:{parent:Fe._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&Dc(t,null),bo(),nd(t),e!==null&&gn(e,t,l,!0),null}function Xc(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Vo(e,t,a,l,c){return Ia(t),a=Ro(e,t,a,l,void 0,c),l=Ao(),e!==null&&!Pe?(xo(e,t,c),ca(e,t,c)):(Ce&&l&&ro(t),t.flags|=1,We(e,t,a,c),t.child)}function gd(e,t,a,l,c,i){return Ia(t),t.updateQueue=null,a=vs(t,l,a,c),ms(e),l=Ao(),e!==null&&!Pe?(xo(e,t,i),ca(e,t,i)):(Ce&&l&&ro(t),t.flags|=1,We(e,t,a,i),t.child)}function Sd(e,t,a,l,c){if(Ia(t),t.stateNode===null){var i=Al,y=a.contextType;typeof y=="object"&&y!==null&&(i=nt(y)),i=new a(l,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Yo,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=l,i.state=t.memoizedState,i.refs={},mo(t),y=a.contextType,i.context=typeof y=="object"&&y!==null?nt(y):Al,i.state=t.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(Lo(t,a,y,l),i.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(y=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),y!==i.state&&Yo.enqueueReplaceState(i,i.state,null),xn(t,l,i,c),An(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){i=t.stateNode;var g=t.memoizedProps,C=tl(a,g);i.props=C;var N=i.context,Y=a.contextType;y=Al,typeof Y=="object"&&Y!==null&&(y=nt(Y));var G=a.getDerivedStateFromProps;Y=typeof G=="function"||typeof i.getSnapshotBeforeUpdate=="function",g=t.pendingProps!==g,Y||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(g||N!==y)&&rd(t,i,l,y),Sa=!1;var O=t.memoizedState;i.state=O,xn(t,l,i,c),An(),N=t.memoizedState,g||O!==N||Sa?(typeof G=="function"&&(Lo(t,a,G,l),N=t.memoizedState),(C=Sa||cd(t,a,C,l,O,N,y))?(Y||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=N),i.props=l,i.state=N,i.context=y,l=C):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{i=t.stateNode,vo(e,t),y=t.memoizedProps,Y=tl(a,y),i.props=Y,G=t.pendingProps,O=i.context,N=a.contextType,C=Al,typeof N=="object"&&N!==null&&(C=nt(N)),g=a.getDerivedStateFromProps,(N=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(y!==G||O!==C)&&rd(t,i,l,C),Sa=!1,O=t.memoizedState,i.state=O,xn(t,l,i,c),An();var U=t.memoizedState;y!==G||O!==U||Sa||e!==null&&e.dependencies!==null&&xc(e.dependencies)?(typeof g=="function"&&(Lo(t,a,g,l),U=t.memoizedState),(Y=Sa||cd(t,a,Y,l,O,U,C)||e!==null&&e.dependencies!==null&&xc(e.dependencies))?(N||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(l,U,C),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(l,U,C)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||y===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=U),i.props=l,i.state=U,i.context=C,l=Y):(typeof i.componentDidUpdate!="function"||y===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),l=!1)}return i=l,Xc(e,t),l=(t.flags&128)!==0,i||l?(i=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&l?(t.child=Ml(t,e.child,null,c),t.child=Ml(t,null,a,c)):We(e,t,a,c),t.memoizedState=i.state,e=t.child):e=ca(e,t,c),e}function bd(e,t,a,l){return mn(),t.flags|=256,We(e,t,a,l),t.child}var Go={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $o(e){return{baseLanes:e,cachePool:is()}}function Xo(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ot),e}function wd(e,t,a){var l=t.pendingProps,c=!1,i=(t.flags&128)!==0,y;if((y=i)||(y=e!==null&&e.memoizedState===null?!1:(Ze.current&2)!==0),y&&(c=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ce){if(c?Ra(t):Aa(),Ce){var g=Le,C;if(C=g){e:{for(C=g,g=Yt;C.nodeType!==8;){if(!g){g=null;break e}if(C=kt(C.nextSibling),C===null){g=null;break e}}g=C}g!==null?(t.memoizedState={dehydrated:g,treeContext:Fa!==null?{id:Wt,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},C=yt(18,null,null,0),C.stateNode=g,C.return=t,t.child=C,rt=t,Le=null,C=!0):C=!1}C||Pa(t)}if(g=t.memoizedState,g!==null&&(g=g.dehydrated,g!==null))return Di(g)?t.lanes=32:t.lanes=536870912,null;na(t)}return g=l.children,l=l.fallback,c?(Aa(),c=t.mode,g=Qc({mode:"hidden",children:g},c),l=Qa(l,c,a,null),g.return=t,l.return=t,g.sibling=l,t.child=g,c=t.child,c.memoizedState=$o(a),c.childLanes=Xo(e,y,a),t.memoizedState=Go,l):(Ra(t),Qo(t,g))}if(C=e.memoizedState,C!==null&&(g=C.dehydrated,g!==null)){if(i)t.flags&256?(Ra(t),t.flags&=-257,t=Fo(e,t,a)):t.memoizedState!==null?(Aa(),t.child=e.child,t.flags|=128,t=null):(Aa(),c=l.fallback,g=t.mode,l=Qc({mode:"visible",children:l.children},g),c=Qa(c,g,a,null),c.flags|=2,l.return=t,c.return=t,l.sibling=c,t.child=l,Ml(t,e.child,null,a),l=t.child,l.memoizedState=$o(a),l.childLanes=Xo(e,y,a),t.memoizedState=Go,t=c);else if(Ra(t),Di(g)){if(y=g.nextSibling&&g.nextSibling.dataset,y)var N=y.dgst;y=N,l=Error(r(419)),l.stack="",l.digest=y,vn({value:l,source:null,stack:null}),t=Fo(e,t,a)}else if(Pe||gn(e,t,a,!1),y=(a&e.childLanes)!==0,Pe||y){if(y=Ue,y!==null&&(l=a&-a,l=(l&42)!==0?1:Dr(l),l=(l&(y.suspendedLanes|a))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,Rl(e,l),bt(y,e,l),pd;g.data==="$?"||di(),t=Fo(e,t,a)}else g.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=C.treeContext,Le=kt(g.nextSibling),rt=t,Ce=!0,Ka=null,Yt=!1,e!==null&&(Tt[Et++]=Wt,Tt[Et++]=ea,Tt[Et++]=Fa,Wt=e.id,ea=e.overflow,Fa=t),t=Qo(t,l.children),t.flags|=4096);return t}return c?(Aa(),c=l.fallback,g=t.mode,C=e.child,N=C.sibling,l=It(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,N!==null?c=It(N,c):(c=Qa(c,g,a,null),c.flags|=2),c.return=t,l.return=t,l.sibling=c,t.child=l,l=c,c=t.child,g=e.child.memoizedState,g===null?g=$o(a):(C=g.cachePool,C!==null?(N=Fe._currentValue,C=C.parent!==N?{parent:N,pool:N}:C):C=is(),g={baseLanes:g.baseLanes|a,cachePool:C}),c.memoizedState=g,c.childLanes=Xo(e,y,a),t.memoizedState=Go,l):(Ra(t),a=e.child,e=a.sibling,a=It(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=a,t.memoizedState=null,a)}function Qo(e,t){return t=Qc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Qc(e,t){return e=yt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Fo(e,t,a){return Ml(t,e.child,null,a),e=Qo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cd(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),so(e.return,t,a)}function Zo(e,t,a,l,c){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:c}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=l,i.tail=a,i.tailMode=c)}function Rd(e,t,a){var l=t.pendingProps,c=l.revealOrder,i=l.tail;if(We(e,t,l.children,a),l=Ze.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cd(e,a,t);else if(e.tag===19)Cd(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(Q(Ze,l),c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&Vc(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),Zo(t,!1,c,a,i);break;case"backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Vc(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}Zo(t,!0,a,null,i);break;case"together":Zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ca(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ea|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(gn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,a=It(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=It(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Ko(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&xc(e)))}function Ph(e,t,a){switch(t.tag){case 3:qe(t,t.stateNode.containerInfo),ga(t,Fe,e.memoizedState.cache),mn();break;case 27:case 5:Wl(t);break;case 4:qe(t,t.stateNode.containerInfo);break;case 10:ga(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Ra(t),t.flags|=128,null):(a&t.child.childLanes)!==0?wd(e,t,a):(Ra(t),e=ca(e,t,a),e!==null?e.sibling:null);Ra(t);break;case 19:var c=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(gn(e,t,a,!1),l=(a&t.childLanes)!==0),c){if(l)return Rd(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Q(Ze,Ze.current),l)break;return null;case 22:case 23:return t.lanes=0,md(e,t,a);case 24:ga(t,Fe,e.memoizedState.cache)}return ca(e,t,a)}function Ad(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Pe=!0;else{if(!Ko(e,a)&&(t.flags&128)===0)return Pe=!1,Ph(e,t,a);Pe=(e.flags&131072)!==0}else Pe=!1,Ce&&(t.flags&1048576)!==0&&ts(t,Ac,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,c=l._init;if(l=c(l._payload),t.type=l,typeof l=="function")lo(l)?(e=tl(l,e),t.tag=1,t=Sd(null,t,l,e,a)):(t.tag=0,t=Vo(null,t,l,e,a));else{if(l!=null){if(c=l.$$typeof,c===J){t.tag=11,t=hd(null,t,l,e,a);break e}else if(c===se){t.tag=14,t=_d(null,t,l,e,a);break e}}throw t=xe(l)||l,Error(r(306,t,""))}}return t;case 0:return Vo(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,c=tl(l,t.pendingProps),Sd(e,t,l,c,a);case 3:e:{if(qe(t,t.stateNode.containerInfo),e===null)throw Error(r(387));l=t.pendingProps;var i=t.memoizedState;c=i.element,vo(e,t),xn(t,l,null,a);var y=t.memoizedState;if(l=y.cache,ga(t,Fe,l),l!==i.cache&&fo(t,[Fe],a,!0),An(),l=y.element,i.isDehydrated)if(i={element:l,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=bd(e,t,l,a);break e}else if(l!==c){c=qt(Error(r(424)),t),vn(c),t=bd(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Le=kt(e.firstChild),rt=t,Ce=!0,Ka=null,Yt=!0,a=ld(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(mn(),l===c){t=ca(e,t,a);break e}We(e,t,l,a)}t=t.child}return t;case 26:return Xc(e,t),e===null?(a=Ef(t.type,null,t.pendingProps,null))?t.memoizedState=a:Ce||(a=t.type,e=t.pendingProps,l=rr(ne.current).createElement(a),l[lt]=t,l[it]=e,tt(l,a,e),Ke(l),t.stateNode=l):t.memoizedState=Ef(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Wl(t),e===null&&Ce&&(l=t.stateNode=qf(t.type,t.pendingProps,ne.current),rt=t,Yt=!0,c=Le,ja(t.type)?(Ti=c,Le=kt(l.firstChild)):Le=c),We(e,t,t.pendingProps.children,a),Xc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ce&&((c=l=Le)&&(l=R_(l,t.type,t.pendingProps,Yt),l!==null?(t.stateNode=l,rt=t,Le=kt(l.firstChild),Yt=!1,c=!0):c=!1),c||Pa(t)),Wl(t),c=t.type,i=t.pendingProps,y=e!==null?e.memoizedProps:null,l=i.children,Ai(c,i)?l=null:y!==null&&Ai(c,y)&&(t.flags|=32),t.memoizedState!==null&&(c=Ro(e,t,Vh,null,null,a),Zn._currentValue=c),Xc(e,t),We(e,t,l,a),t.child;case 6:return e===null&&Ce&&((e=a=Le)&&(a=A_(a,t.pendingProps,Yt),a!==null?(t.stateNode=a,rt=t,Le=null,e=!0):e=!1),e||Pa(t)),null;case 13:return wd(e,t,a);case 4:return qe(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Ml(t,null,l,a):We(e,t,l,a),t.child;case 11:return hd(e,t,t.type,t.pendingProps,a);case 7:return We(e,t,t.pendingProps,a),t.child;case 8:return We(e,t,t.pendingProps.children,a),t.child;case 12:return We(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,ga(t,t.type,l.value),We(e,t,l.children,a),t.child;case 9:return c=t.type._context,l=t.pendingProps.children,Ia(t),c=nt(c),l=l(c),t.flags|=1,We(e,t,l,a),t.child;case 14:return _d(e,t,t.type,t.pendingProps,a);case 15:return yd(e,t,t.type,t.pendingProps,a);case 19:return Rd(e,t,a);case 31:return l=t.pendingProps,a=t.mode,l={mode:l.mode,children:l.children},e===null?(a=Qc(l,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=It(e.child,l),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return md(e,t,a);case 24:return Ia(t),l=nt(Fe),e===null?(c=_o(),c===null&&(c=Ue,i=po(),c.pooledCache=i,i.refCount++,i!==null&&(c.pooledCacheLanes|=a),c=i),t.memoizedState={parent:l,cache:c},mo(t),ga(t,Fe,c)):((e.lanes&a)!==0&&(vo(e,t),xn(t,null,null,a),An()),c=e.memoizedState,i=t.memoizedState,c.parent!==l?(c={parent:l,cache:l},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),ga(t,Fe,l)):(l=i.cache,ga(t,Fe,l),l!==c.cache&&fo(t,[Fe],a,!0))),We(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function ra(e){e.flags|=4}function xd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Mf(t)){if(t=Nt.current,t!==null&&((be&4194048)===be?Bt!==null:(be&62914560)!==be&&(be&536870912)===0||t!==Bt))throw Cn=yo,us;e.flags|=8192}}function Fc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ic():536870912,e.lanes|=t,Ll|=t)}function Un(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function Jh(e,t,a){var l=t.pendingProps;switch(oo(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(t),null;case 1:return ke(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),aa(Fe),Ct(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(yn(t)?ra(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ns())),ke(t),null;case 26:return a=t.memoizedState,e===null?(ra(t),a!==null?(ke(t),xd(t,a)):(ke(t),t.flags&=-16777217)):a?a!==e.memoizedState?(ra(t),ke(t),xd(t,a)):(ke(t),t.flags&=-16777217):(e.memoizedProps!==l&&ra(t),ke(t),t.flags&=-16777217),null;case 27:Ba(t),a=ne.current;var c=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ra(t);else{if(!l){if(t.stateNode===null)throw Error(r(166));return ke(t),null}e=I.current,yn(t)?as(t):(e=qf(c,l,a),t.stateNode=e,ra(t))}return ke(t),null;case 5:if(Ba(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ra(t);else{if(!l){if(t.stateNode===null)throw Error(r(166));return ke(t),null}if(e=I.current,yn(t))as(t);else{switch(c=rr(ne.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?c.createElement(a,{is:l.is}):c.createElement(a)}}e[lt]=t,e[it]=l;e:for(c=t.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}t.stateNode=e;e:switch(tt(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ra(t)}}return ke(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ra(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(r(166));if(e=ne.current,yn(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,c=rt,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}e[lt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Sf(e.nodeValue,a)),e||Pa(t)}else e=rr(e).createTextNode(l),e[lt]=t,t.stateNode=e}return ke(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=yn(t),l!==null&&l.dehydrated!==null){if(e===null){if(!c)throw Error(r(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));c[lt]=t}else mn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ke(t),c=!1}else c=ns(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(na(t),t):(na(t),null)}if(na(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=t.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var i=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==c&&(l.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Fc(t,t.updateQueue),ke(t),null;case 4:return Ct(),e===null&&Si(t.stateNode.containerInfo),ke(t),null;case 10:return aa(t.type),ke(t),null;case 19:if(F(Ze),c=t.memoizedState,c===null)return ke(t),null;if(l=(t.flags&128)!==0,i=c.rendering,i===null)if(l)Un(c,!1);else{if(Ye!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Vc(e),i!==null){for(t.flags|=128,Un(c,!1),e=i.updateQueue,t.updateQueue=e,Fc(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)es(a,e),a=a.sibling;return Q(Ze,Ze.current&1|2),t.child}e=e.sibling}c.tail!==null&&Rt()>Pc&&(t.flags|=128,l=!0,Un(c,!1),t.lanes=4194304)}else{if(!l)if(e=Vc(i),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Fc(t,e),Un(c,!0),c.tail===null&&c.tailMode==="hidden"&&!i.alternate&&!Ce)return ke(t),null}else 2*Rt()-c.renderingStartTime>Pc&&a!==536870912&&(t.flags|=128,l=!0,Un(c,!1),t.lanes=4194304);c.isBackwards?(i.sibling=t.child,t.child=i):(e=c.last,e!==null?e.sibling=i:t.child=i,c.last=i)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Rt(),t.sibling=null,e=Ze.current,Q(Ze,l?e&1|2:e&1),t):(ke(t),null);case 22:case 23:return na(t),wo(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(ke(t),t.subtreeFlags&6&&(t.flags|=8192)):ke(t),a=t.updateQueue,a!==null&&Fc(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&F(Wa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),aa(Fe),ke(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function Ih(e,t){switch(oo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return aa(Fe),Ct(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ba(t),null;case 13:if(na(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));mn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return F(Ze),null;case 4:return Ct(),null;case 10:return aa(t.type),null;case 22:case 23:return na(t),wo(),e!==null&&F(Wa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return aa(Fe),null;case 25:return null;default:return null}}function qd(e,t){switch(oo(t),t.tag){case 3:aa(Fe),Ct();break;case 26:case 27:case 5:Ba(t);break;case 4:Ct();break;case 13:na(t);break;case 19:F(Ze);break;case 10:aa(t.type);break;case 22:case 23:na(t),wo(),e!==null&&F(Wa);break;case 24:aa(Fe)}}function jn(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var c=l.next;a=c;do{if((a.tag&e)===e){l=void 0;var i=a.create,y=a.inst;l=i(),y.destroy=l}a=a.next}while(a!==c)}}catch(g){Oe(t,t.return,g)}}function xa(e,t,a){try{var l=t.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var i=c.next;l=i;do{if((l.tag&e)===e){var y=l.inst,g=y.destroy;if(g!==void 0){y.destroy=void 0,c=t;var C=a,N=g;try{N()}catch(Y){Oe(c,C,Y)}}}l=l.next}while(l!==i)}}catch(Y){Oe(t,t.return,Y)}}function Dd(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{_s(t,a)}catch(l){Oe(e,e.return,l)}}}function Td(e,t,a){a.props=tl(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Oe(e,t,l)}}function Mn(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(c){Oe(e,t,c)}}function Vt(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(c){Oe(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Oe(e,t,c)}else a.current=null}function Ed(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(c){Oe(e,e.return,c)}}function Po(e,t,a){try{var l=e.stateNode;g_(l,e.type,a,t),l[it]=t}catch(c){Oe(e,e.return,c)}}function Nd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ja(e.type)||e.tag===4}function Jo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ja(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Io(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=cr));else if(l!==4&&(l===27&&ja(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Io(e,t,a),e=e.sibling;e!==null;)Io(e,t,a),e=e.sibling}function Zc(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&ja(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Zc(e,t,a),e=e.sibling;e!==null;)Zc(e,t,a),e=e.sibling}function Od(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);tt(t,l,a),t[lt]=e,t[it]=a}catch(i){Oe(e,e.return,i)}}var oa=!1,$e=!1,Wo=!1,Ud=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Wh(e,t){if(e=e.containerInfo,Ci=fr,e=$u(e),Pr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var c=l.anchorOffset,i=l.focusNode;l=l.focusOffset;try{a.nodeType,i.nodeType}catch{a=null;break e}var y=0,g=-1,C=-1,N=0,Y=0,G=e,O=null;t:for(;;){for(var U;G!==a||c!==0&&G.nodeType!==3||(g=y+c),G!==i||l!==0&&G.nodeType!==3||(C=y+l),G.nodeType===3&&(y+=G.nodeValue.length),(U=G.firstChild)!==null;)O=G,G=U;for(;;){if(G===e)break t;if(O===a&&++N===c&&(g=y),O===i&&++Y===l&&(C=y),(U=G.nextSibling)!==null)break;G=O,O=G.parentNode}G=U}a=g===-1||C===-1?null:{start:g,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ri={focusedElem:e,selectionRange:a},fr=!1,Je=t;Je!==null;)if(t=Je,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Je=e;else for(;Je!==null;){switch(t=Je,i=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,a=t,c=i.memoizedProps,i=i.memoizedState,l=a.stateNode;try{var ie=tl(a.type,c,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(ie,i),l.__reactInternalSnapshotBeforeUpdate=e}catch(ce){Oe(a,a.return,ce)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)qi(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":qi(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,Je=e;break}Je=t.return}}function jd(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:qa(e,a),l&4&&jn(5,a);break;case 1:if(qa(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(y){Oe(a,a.return,y)}else{var c=tl(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Oe(a,a.return,y)}}l&64&&Dd(a),l&512&&Mn(a,a.return);break;case 3:if(qa(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{_s(e,t)}catch(y){Oe(a,a.return,y)}}break;case 27:t===null&&l&4&&Od(a);case 26:case 5:qa(e,a),t===null&&l&4&&Ed(a),l&512&&Mn(a,a.return);break;case 12:qa(e,a);break;case 13:qa(e,a),l&4&&Hd(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=i_.bind(null,a),x_(e,a))));break;case 22:if(l=a.memoizedState!==null||oa,!l){t=t!==null&&t.memoizedState!==null||$e,c=oa;var i=$e;oa=l,($e=t)&&!i?Da(e,a,(a.subtreeFlags&8772)!==0):qa(e,a),oa=c,$e=i}break;case 30:break;default:qa(e,a)}}function Md(e){var t=e.alternate;t!==null&&(e.alternate=null,Md(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Nr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var He=null,dt=!1;function ia(e,t,a){for(a=a.child;a!==null;)zd(e,t,a),a=a.sibling}function zd(e,t,a){if(ue&&typeof ue.onCommitFiberUnmount=="function")try{ue.onCommitFiberUnmount(P,a)}catch{}switch(a.tag){case 26:$e||Vt(a,t),ia(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:$e||Vt(a,t);var l=He,c=dt;ja(a.type)&&(He=a.stateNode,dt=!1),ia(e,t,a),$n(a.stateNode),He=l,dt=c;break;case 5:$e||Vt(a,t);case 6:if(l=He,c=dt,He=null,ia(e,t,a),He=l,dt=c,He!==null)if(dt)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(a.stateNode)}catch(i){Oe(a,t,i)}else try{He.removeChild(a.stateNode)}catch(i){Oe(a,t,i)}break;case 18:He!==null&&(dt?(e=He,Af(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),In(e)):Af(He,a.stateNode));break;case 4:l=He,c=dt,He=a.stateNode.containerInfo,dt=!0,ia(e,t,a),He=l,dt=c;break;case 0:case 11:case 14:case 15:$e||xa(2,a,t),$e||xa(4,a,t),ia(e,t,a);break;case 1:$e||(Vt(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Td(a,t,l)),ia(e,t,a);break;case 21:ia(e,t,a);break;case 22:$e=(l=$e)||a.memoizedState!==null,ia(e,t,a),$e=l;break;default:ia(e,t,a)}}function Hd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{In(e)}catch(a){Oe(t,t.return,a)}}function e_(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ud),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ud),t;default:throw Error(r(435,e.tag))}}function ei(e,t){var a=e_(e);t.forEach(function(l){var c=u_.bind(null,e,l);a.has(l)||(a.add(l),l.then(c,c))})}function mt(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var c=a[l],i=e,y=t,g=y;e:for(;g!==null;){switch(g.tag){case 27:if(ja(g.type)){He=g.stateNode,dt=!1;break e}break;case 5:He=g.stateNode,dt=!1;break e;case 3:case 4:He=g.stateNode.containerInfo,dt=!0;break e}g=g.return}if(He===null)throw Error(r(160));zd(i,y,c),He=null,dt=!1,i=c.alternate,i!==null&&(i.return=null),c.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)kd(t,e),t=t.sibling}var Ht=null;function kd(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:mt(t,e),vt(e),l&4&&(xa(3,e,e.return),jn(3,e),xa(5,e,e.return));break;case 1:mt(t,e),vt(e),l&512&&($e||a===null||Vt(a,a.return)),l&64&&oa&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var c=Ht;if(mt(t,e),vt(e),l&512&&($e||a===null||Vt(a,a.return)),l&4){var i=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":i=c.getElementsByTagName("title")[0],(!i||i[nn]||i[lt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=c.createElement(l),c.head.insertBefore(i,c.querySelector("head > title"))),tt(i,l,a),i[lt]=e,Ke(i),l=i;break e;case"link":var y=Uf("link","href",c).get(l+(a.href||""));if(y){for(var g=0;g<y.length;g++)if(i=y[g],i.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&i.getAttribute("rel")===(a.rel==null?null:a.rel)&&i.getAttribute("title")===(a.title==null?null:a.title)&&i.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(g,1);break t}}i=c.createElement(l),tt(i,l,a),c.head.appendChild(i);break;case"meta":if(y=Uf("meta","content",c).get(l+(a.content||""))){for(g=0;g<y.length;g++)if(i=y[g],i.getAttribute("content")===(a.content==null?null:""+a.content)&&i.getAttribute("name")===(a.name==null?null:a.name)&&i.getAttribute("property")===(a.property==null?null:a.property)&&i.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&i.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(g,1);break t}}i=c.createElement(l),tt(i,l,a),c.head.appendChild(i);break;default:throw Error(r(468,l))}i[lt]=e,Ke(i),l=i}e.stateNode=l}else jf(c,e.type,e.stateNode);else e.stateNode=Of(c,l,e.memoizedProps);else i!==l?(i===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):i.count--,l===null?jf(c,e.type,e.stateNode):Of(c,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Po(e,e.memoizedProps,a.memoizedProps)}break;case 27:mt(t,e),vt(e),l&512&&($e||a===null||Vt(a,a.return)),a!==null&&l&4&&Po(e,e.memoizedProps,a.memoizedProps);break;case 5:if(mt(t,e),vt(e),l&512&&($e||a===null||Vt(a,a.return)),e.flags&32){c=e.stateNode;try{ml(c,"")}catch(U){Oe(e,e.return,U)}}l&4&&e.stateNode!=null&&(c=e.memoizedProps,Po(e,c,a!==null?a.memoizedProps:c)),l&1024&&(Wo=!0);break;case 6:if(mt(t,e),vt(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(U){Oe(e,e.return,U)}}break;case 3:if(ur=null,c=Ht,Ht=or(t.containerInfo),mt(t,e),Ht=c,vt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{In(t.containerInfo)}catch(U){Oe(e,e.return,U)}Wo&&(Wo=!1,Ld(e));break;case 4:l=Ht,Ht=or(e.stateNode.containerInfo),mt(t,e),vt(e),Ht=l;break;case 12:mt(t,e),vt(e);break;case 13:mt(t,e),vt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ri=Rt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ei(e,l)));break;case 22:c=e.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,N=oa,Y=$e;if(oa=N||c,$e=Y||C,mt(t,e),$e=Y,oa=N,vt(e),l&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||C||oa||$e||al(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){C=a=t;try{if(i=C.stateNode,c)y=i.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{g=C.stateNode;var G=C.memoizedProps.style,O=G!=null&&G.hasOwnProperty("display")?G.display:null;g.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(U){Oe(C,C.return,U)}}}else if(t.tag===6){if(a===null){C=t;try{C.stateNode.nodeValue=c?"":C.memoizedProps}catch(U){Oe(C,C.return,U)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ei(e,a))));break;case 19:mt(t,e),vt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ei(e,l)));break;case 30:break;case 21:break;default:mt(t,e),vt(e)}}function vt(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(Nd(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var c=a.stateNode,i=Jo(e);Zc(e,i,c);break;case 5:var y=a.stateNode;a.flags&32&&(ml(y,""),a.flags&=-33);var g=Jo(e);Zc(e,g,y);break;case 3:case 4:var C=a.stateNode.containerInfo,N=Jo(e);Io(e,N,C);break;default:throw Error(r(161))}}catch(Y){Oe(e,e.return,Y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ld(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ld(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function qa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)jd(e,t.alternate,t),t=t.sibling}function al(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:xa(4,t,t.return),al(t);break;case 1:Vt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Td(t,t.return,a),al(t);break;case 27:$n(t.stateNode);case 26:case 5:Vt(t,t.return),al(t);break;case 22:t.memoizedState===null&&al(t);break;case 30:al(t);break;default:al(t)}e=e.sibling}}function Da(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,c=e,i=t,y=i.flags;switch(i.tag){case 0:case 11:case 15:Da(c,i,a),jn(4,i);break;case 1:if(Da(c,i,a),l=i,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(N){Oe(l,l.return,N)}if(l=i,c=l.updateQueue,c!==null){var g=l.stateNode;try{var C=c.shared.hiddenCallbacks;if(C!==null)for(c.shared.hiddenCallbacks=null,c=0;c<C.length;c++)hs(C[c],g)}catch(N){Oe(l,l.return,N)}}a&&y&64&&Dd(i),Mn(i,i.return);break;case 27:Od(i);case 26:case 5:Da(c,i,a),a&&l===null&&y&4&&Ed(i),Mn(i,i.return);break;case 12:Da(c,i,a);break;case 13:Da(c,i,a),a&&y&4&&Hd(c,i);break;case 22:i.memoizedState===null&&Da(c,i,a),Mn(i,i.return);break;case 30:break;default:Da(c,i,a)}t=t.sibling}}function ti(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Sn(a))}function ai(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Sn(e))}function Gt(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Yd(e,t,a,l),t=t.sibling}function Yd(e,t,a,l){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Gt(e,t,a,l),c&2048&&jn(9,t);break;case 1:Gt(e,t,a,l);break;case 3:Gt(e,t,a,l),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Sn(e)));break;case 12:if(c&2048){Gt(e,t,a,l),e=t.stateNode;try{var i=t.memoizedProps,y=i.id,g=i.onPostCommit;typeof g=="function"&&g(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Oe(t,t.return,C)}}else Gt(e,t,a,l);break;case 13:Gt(e,t,a,l);break;case 23:break;case 22:i=t.stateNode,y=t.alternate,t.memoizedState!==null?i._visibility&2?Gt(e,t,a,l):zn(e,t):i._visibility&2?Gt(e,t,a,l):(i._visibility|=2,zl(e,t,a,l,(t.subtreeFlags&10256)!==0)),c&2048&&ti(y,t);break;case 24:Gt(e,t,a,l),c&2048&&ai(t.alternate,t);break;default:Gt(e,t,a,l)}}function zl(e,t,a,l,c){for(c=c&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var i=e,y=t,g=a,C=l,N=y.flags;switch(y.tag){case 0:case 11:case 15:zl(i,y,g,C,c),jn(8,y);break;case 23:break;case 22:var Y=y.stateNode;y.memoizedState!==null?Y._visibility&2?zl(i,y,g,C,c):zn(i,y):(Y._visibility|=2,zl(i,y,g,C,c)),c&&N&2048&&ti(y.alternate,y);break;case 24:zl(i,y,g,C,c),c&&N&2048&&ai(y.alternate,y);break;default:zl(i,y,g,C,c)}t=t.sibling}}function zn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,c=l.flags;switch(l.tag){case 22:zn(a,l),c&2048&&ti(l.alternate,l);break;case 24:zn(a,l),c&2048&&ai(l.alternate,l);break;default:zn(a,l)}t=t.sibling}}var Hn=8192;function Hl(e){if(e.subtreeFlags&Hn)for(e=e.child;e!==null;)Bd(e),e=e.sibling}function Bd(e){switch(e.tag){case 26:Hl(e),e.flags&Hn&&e.memoizedState!==null&&L_(Ht,e.memoizedState,e.memoizedProps);break;case 5:Hl(e);break;case 3:case 4:var t=Ht;Ht=or(e.stateNode.containerInfo),Hl(e),Ht=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Hn,Hn=16777216,Hl(e),Hn=t):Hl(e));break;default:Hl(e)}}function Vd(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function kn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];Je=l,$d(l,e)}Vd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gd(e),e=e.sibling}function Gd(e){switch(e.tag){case 0:case 11:case 15:kn(e),e.flags&2048&&xa(9,e,e.return);break;case 3:kn(e);break;case 12:kn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Kc(e)):kn(e);break;default:kn(e)}}function Kc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];Je=l,$d(l,e)}Vd(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:xa(8,t,t.return),Kc(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Kc(t));break;default:Kc(t)}e=e.sibling}}function $d(e,t){for(;Je!==null;){var a=Je;switch(a.tag){case 0:case 11:case 15:xa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Sn(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Je=l;else e:for(a=e;Je!==null;){l=Je;var c=l.sibling,i=l.return;if(Md(l),l===a){Je=null;break e}if(c!==null){c.return=i,Je=c;break e}Je=i}}}var t_={getCacheForType:function(e){var t=nt(Fe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},a_=typeof WeakMap=="function"?WeakMap:Map,Re=0,Ue=null,ve=null,be=0,Ae=0,gt=null,Ta=!1,kl=!1,li=!1,ua=0,Ye=0,Ea=0,ll=0,ni=0,Ot=0,Ll=0,Ln=null,ft=null,ci=!1,ri=0,Pc=1/0,Jc=null,Na=null,et=0,Oa=null,Yl=null,Bl=0,oi=0,ii=null,Xd=null,Yn=0,ui=null;function St(){if((Re&2)!==0&&be!==0)return be&-be;if(z.T!==null){var e=Dl;return e!==0?e:yi()}return ou()}function Qd(){Ot===0&&(Ot=(be&536870912)===0||Ce?qr():536870912);var e=Nt.current;return e!==null&&(e.flags|=32),Ot}function bt(e,t,a){(e===Ue&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)&&(Vl(e,0),Ua(e,be,Ot,!1)),ln(e,a),((Re&2)===0||e!==Ue)&&(e===Ue&&((Re&2)===0&&(ll|=a),Ye===4&&Ua(e,be,Ot,!1)),$t(e))}function Fd(e,t,a){if((Re&6)!==0)throw Error(r(327));var l=!a&&(t&124)===0&&(t&e.expiredLanes)===0||Lt(e,t),c=l?c_(e,t):fi(e,t,!0),i=l;do{if(c===0){kl&&!l&&Ua(e,t,0,!1);break}else{if(a=e.current.alternate,i&&!l_(a)){c=fi(e,t,!1),i=!1;continue}if(c===2){if(i=t,e.errorRecoveryDisabledLanes&i)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var g=e;c=Ln;var C=g.current.memoizedState.isDehydrated;if(C&&(Vl(g,y).flags|=256),y=fi(g,y,!1),y!==2){if(li&&!C){g.errorRecoveryDisabledLanes|=i,ll|=i,c=4;break e}i=ft,ft=c,i!==null&&(ft===null?ft=i:ft.push.apply(ft,i))}c=y}if(i=!1,c!==2)continue}}if(c===1){Vl(e,0),Ua(e,t,0,!0);break}e:{switch(l=e,i=c,i){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:Ua(l,t,Ot,!Ta);break e;case 2:ft=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(c=ri+300-Rt(),10<c)){if(Ua(l,t,Ot,!Ta),ya(l,0,!0)!==0)break e;l.timeoutHandle=Cf(Zd.bind(null,l,a,ft,Jc,ci,t,Ot,ll,Ll,Ta,i,2,-0,0),c);break e}Zd(l,a,ft,Jc,ci,t,Ot,ll,Ll,Ta,i,0,-0,0)}}break}while(!0);$t(e)}function Zd(e,t,a,l,c,i,y,g,C,N,Y,G,O,U){if(e.timeoutHandle=-1,G=t.subtreeFlags,(G&8192||(G&16785408)===16785408)&&(Fn={stylesheets:null,count:0,unsuspend:k_},Bd(t),G=Y_(),G!==null)){e.cancelPendingCommit=G(tf.bind(null,e,t,i,a,l,c,y,g,C,Y,1,O,U)),Ua(e,i,y,!N);return}tf(e,t,i,a,l,c,y,g,C)}function l_(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var c=a[l],i=c.getSnapshot;c=c.value;try{if(!_t(i(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ua(e,t,a,l){t&=~ni,t&=~ll,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var c=t;0<c;){var i=31-je(c),y=1<<i;l[i]=-1,c&=~y}a!==0&&cu(e,a,t)}function Ic(){return(Re&6)===0?(Bn(0),!1):!0}function si(){if(ve!==null){if(Ae===0)var e=ve.return;else e=ve,ta=Ja=null,qo(e),jl=null,Nn=0,e=ve;for(;e!==null;)qd(e.alternate,e),e=e.return;ve=null}}function Vl(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,b_(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),si(),Ue=e,ve=a=It(e.current,null),be=t,Ae=0,gt=null,Ta=!1,kl=Lt(e,t),li=!1,Ll=Ot=ni=ll=Ea=Ye=0,ft=Ln=null,ci=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var c=31-je(l),i=1<<c;t|=e[c],l&=~i}return ua=t,Sc(),a}function Kd(e,t){pe=null,z.H=Lc,t===wn||t===Tc?(t=fs(),Ae=3):t===us?(t=fs(),Ae=4):Ae=t===pd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,gt=t,ve===null&&(Ye=1,$c(e,qt(t,e.current)))}function Pd(){var e=z.H;return z.H=Lc,e===null?Lc:e}function Jd(){var e=z.A;return z.A=t_,e}function di(){Ye=4,Ta||(be&4194048)!==be&&Nt.current!==null||(kl=!0),(Ea&134217727)===0&&(ll&134217727)===0||Ue===null||Ua(Ue,be,Ot,!1)}function fi(e,t,a){var l=Re;Re|=2;var c=Pd(),i=Jd();(Ue!==e||be!==t)&&(Jc=null,Vl(e,t)),t=!1;var y=Ye;e:do try{if(Ae!==0&&ve!==null){var g=ve,C=gt;switch(Ae){case 8:si(),y=6;break e;case 3:case 2:case 9:case 6:Nt.current===null&&(t=!0);var N=Ae;if(Ae=0,gt=null,Gl(e,g,C,N),a&&kl){y=0;break e}break;default:N=Ae,Ae=0,gt=null,Gl(e,g,C,N)}}n_(),y=Ye;break}catch(Y){Kd(e,Y)}while(!0);return t&&e.shellSuspendCounter++,ta=Ja=null,Re=l,z.H=c,z.A=i,ve===null&&(Ue=null,be=0,Sc()),y}function n_(){for(;ve!==null;)Id(ve)}function c_(e,t){var a=Re;Re|=2;var l=Pd(),c=Jd();Ue!==e||be!==t?(Jc=null,Pc=Rt()+500,Vl(e,t)):kl=Lt(e,t);e:do try{if(Ae!==0&&ve!==null){t=ve;var i=gt;t:switch(Ae){case 1:Ae=0,gt=null,Gl(e,t,i,1);break;case 2:case 9:if(ss(i)){Ae=0,gt=null,Wd(t);break}t=function(){Ae!==2&&Ae!==9||Ue!==e||(Ae=7),$t(e)},i.then(t,t);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:ss(i)?(Ae=0,gt=null,Wd(t)):(Ae=0,gt=null,Gl(e,t,i,7));break;case 5:var y=null;switch(ve.tag){case 26:y=ve.memoizedState;case 5:case 27:var g=ve;if(!y||Mf(y)){Ae=0,gt=null;var C=g.sibling;if(C!==null)ve=C;else{var N=g.return;N!==null?(ve=N,Wc(N)):ve=null}break t}}Ae=0,gt=null,Gl(e,t,i,5);break;case 6:Ae=0,gt=null,Gl(e,t,i,6);break;case 8:si(),Ye=6;break e;default:throw Error(r(462))}}r_();break}catch(Y){Kd(e,Y)}while(!0);return ta=Ja=null,z.H=l,z.A=c,Re=a,ve!==null?0:(Ue=null,be=0,Sc(),Ye)}function r_(){for(;ve!==null&&!Rr();)Id(ve)}function Id(e){var t=Ad(e.alternate,e,ua);e.memoizedProps=e.pendingProps,t===null?Wc(e):ve=t}function Wd(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=gd(a,t,t.pendingProps,t.type,void 0,be);break;case 11:t=gd(a,t,t.pendingProps,t.type.render,t.ref,be);break;case 5:qo(t);default:qd(a,t),t=ve=es(t,ua),t=Ad(a,t,ua)}e.memoizedProps=e.pendingProps,t===null?Wc(e):ve=t}function Gl(e,t,a,l){ta=Ja=null,qo(t),jl=null,Nn=0;var c=t.return;try{if(Kh(e,c,t,a,be)){Ye=1,$c(e,qt(a,e.current)),ve=null;return}}catch(i){if(c!==null)throw ve=c,i;Ye=1,$c(e,qt(a,e.current)),ve=null;return}t.flags&32768?(Ce||l===1?e=!0:kl||(be&536870912)!==0?e=!1:(Ta=e=!0,(l===2||l===9||l===3||l===6)&&(l=Nt.current,l!==null&&l.tag===13&&(l.flags|=16384))),ef(t,e)):Wc(t)}function Wc(e){var t=e;do{if((t.flags&32768)!==0){ef(t,Ta);return}e=t.return;var a=Jh(t.alternate,t,ua);if(a!==null){ve=a;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);Ye===0&&(Ye=5)}function ef(e,t){do{var a=Ih(e.alternate,e);if(a!==null){a.flags&=32767,ve=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ve=e;return}ve=e=a}while(e!==null);Ye=6,ve=null}function tf(e,t,a,l,c,i,y,g,C){e.cancelPendingCommit=null;do er();while(et!==0);if((Re&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(i=t.lanes|t.childLanes,i|=to,kp(e,a,i,y,g,C),e===Ue&&(ve=Ue=null,be=0),Yl=t,Oa=e,Bl=a,oi=i,ii=c,Xd=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,s_(il,function(){return rf(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=z.T,z.T=null,c=q.p,q.p=2,y=Re,Re|=4;try{Wh(e,t,a)}finally{Re=y,q.p=c,z.T=l}}et=1,af(),lf(),nf()}}function af(){if(et===1){et=0;var e=Oa,t=Yl,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var l=q.p;q.p=2;var c=Re;Re|=4;try{kd(t,e);var i=Ri,y=$u(e.containerInfo),g=i.focusedElem,C=i.selectionRange;if(y!==g&&g&&g.ownerDocument&&Gu(g.ownerDocument.documentElement,g)){if(C!==null&&Pr(g)){var N=C.start,Y=C.end;if(Y===void 0&&(Y=N),"selectionStart"in g)g.selectionStart=N,g.selectionEnd=Math.min(Y,g.value.length);else{var G=g.ownerDocument||document,O=G&&G.defaultView||window;if(O.getSelection){var U=O.getSelection(),ie=g.textContent.length,ce=Math.min(C.start,ie),Ee=C.end===void 0?ce:Math.min(C.end,ie);!U.extend&&ce>Ee&&(y=Ee,Ee=ce,ce=y);var x=Vu(g,ce),A=Vu(g,Ee);if(x&&A&&(U.rangeCount!==1||U.anchorNode!==x.node||U.anchorOffset!==x.offset||U.focusNode!==A.node||U.focusOffset!==A.offset)){var E=G.createRange();E.setStart(x.node,x.offset),U.removeAllRanges(),ce>Ee?(U.addRange(E),U.extend(A.node,A.offset)):(E.setEnd(A.node,A.offset),U.addRange(E))}}}}for(G=[],U=g;U=U.parentNode;)U.nodeType===1&&G.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<G.length;g++){var B=G[g];B.element.scrollLeft=B.left,B.element.scrollTop=B.top}}fr=!!Ci,Ri=Ci=null}finally{Re=c,q.p=l,z.T=a}}e.current=t,et=2}}function lf(){if(et===2){et=0;var e=Oa,t=Yl,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var l=q.p;q.p=2;var c=Re;Re|=4;try{jd(e,t.alternate,t)}finally{Re=c,q.p=l,z.T=a}}et=3}}function nf(){if(et===4||et===3){et=0,Ar();var e=Oa,t=Yl,a=Bl,l=Xd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?et=5:(et=0,Yl=Oa=null,cf(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Na=null),Tr(a),t=t.stateNode,ue&&typeof ue.onCommitFiberRoot=="function")try{ue.onCommitFiberRoot(P,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=z.T,c=q.p,q.p=2,z.T=null;try{for(var i=e.onRecoverableError,y=0;y<l.length;y++){var g=l[y];i(g.value,{componentStack:g.stack})}}finally{z.T=t,q.p=c}}(Bl&3)!==0&&er(),$t(e),c=e.pendingLanes,(a&4194090)!==0&&(c&42)!==0?e===ui?Yn++:(Yn=0,ui=e):Yn=0,Bn(0)}}function cf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Sn(t)))}function er(e){return af(),lf(),nf(),rf()}function rf(){if(et!==5)return!1;var e=Oa,t=oi;oi=0;var a=Tr(Bl),l=z.T,c=q.p;try{q.p=32>a?32:a,z.T=null,a=ii,ii=null;var i=Oa,y=Bl;if(et=0,Yl=Oa=null,Bl=0,(Re&6)!==0)throw Error(r(331));var g=Re;if(Re|=4,Gd(i.current),Yd(i,i.current,y,a),Re=g,Bn(0,!1),ue&&typeof ue.onPostCommitFiberRoot=="function")try{ue.onPostCommitFiberRoot(P,i)}catch{}return!0}finally{q.p=c,z.T=l,cf(e,t)}}function of(e,t,a){t=qt(a,t),t=Bo(e.stateNode,t,2),e=wa(e,t,2),e!==null&&(ln(e,2),$t(e))}function Oe(e,t,a){if(e.tag===3)of(e,e,a);else for(;t!==null;){if(t.tag===3){of(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Na===null||!Na.has(l))){e=qt(a,e),a=dd(2),l=wa(t,a,2),l!==null&&(fd(a,l,t,e),ln(l,2),$t(l));break}}t=t.return}}function pi(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new a_;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(a)||(li=!0,c.add(a),e=o_.bind(null,e,t,a),t.then(e,e))}function o_(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ue===e&&(be&a)===a&&(Ye===4||Ye===3&&(be&62914560)===be&&300>Rt()-ri?(Re&2)===0&&Vl(e,0):ni|=a,Ll===be&&(Ll=0)),$t(e)}function uf(e,t){t===0&&(t=ic()),e=Rl(e,t),e!==null&&(ln(e,t),$t(e))}function i_(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),uf(e,a)}function u_(e,t){var a=0;switch(e.tag){case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(t),uf(e,a)}function s_(e,t){return en(e,t)}var tr=null,$l=null,hi=!1,ar=!1,_i=!1,nl=0;function $t(e){e!==$l&&e.next===null&&($l===null?tr=$l=e:$l=$l.next=e),ar=!0,hi||(hi=!0,f_())}function Bn(e,t){if(!_i&&ar){_i=!0;do for(var a=!1,l=tr;l!==null;){if(e!==0){var c=l.pendingLanes;if(c===0)var i=0;else{var y=l.suspendedLanes,g=l.pingedLanes;i=(1<<31-je(42|e)+1)-1,i&=c&~(y&~g),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(a=!0,pf(l,i))}else i=be,i=ya(l,l===Ue?i:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(i&3)===0||Lt(l,i)||(a=!0,pf(l,i));l=l.next}while(a);_i=!1}}function d_(){sf()}function sf(){ar=hi=!1;var e=0;nl!==0&&(S_()&&(e=nl),nl=0);for(var t=Rt(),a=null,l=tr;l!==null;){var c=l.next,i=df(l,t);i===0?(l.next=null,a===null?tr=c:a.next=c,c===null&&($l=a)):(a=l,(e!==0||(i&3)!==0)&&(ar=!0)),l=c}Bn(e)}function df(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var y=31-je(i),g=1<<y,C=c[y];C===-1?((g&a)===0||(g&l)!==0)&&(c[y]=ht(g,t)):C<=t&&(e.expiredLanes|=g),i&=~g}if(t=Ue,a=be,a=ya(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&tn(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Lt(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&tn(l),Tr(a)){case 2:case 8:a=cc;break;case 32:a=il;break;case 268435456:a=an;break;default:a=il}return l=ff.bind(null,e),a=en(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&tn(l),e.callbackPriority=2,e.callbackNode=null,2}function ff(e,t){if(et!==0&&et!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(er()&&e.callbackNode!==a)return null;var l=be;return l=ya(e,e===Ue?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Fd(e,l,t),df(e,Rt()),e.callbackNode!=null&&e.callbackNode===a?ff.bind(null,e):null)}function pf(e,t){if(er())return null;Fd(e,t,!0)}function f_(){w_(function(){(Re&6)!==0?en(nc,d_):sf()})}function yi(){return nl===0&&(nl=qr()),nl}function hf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:pc(""+e)}function _f(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function p_(e,t,a,l,c){if(t==="submit"&&a&&a.stateNode===c){var i=hf((c[it]||null).action),y=l.submitter;y&&(t=(t=y[it]||null)?hf(t.formAction):y.getAttribute("formAction"),t!==null&&(i=t,y=null));var g=new mc("action","action",null,l,c);e.push({event:g,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(nl!==0){var C=y?_f(c,y):new FormData(c);zo(a,{pending:!0,data:C,method:c.method,action:i},null,C)}}else typeof i=="function"&&(g.preventDefault(),C=y?_f(c,y):new FormData(c),zo(a,{pending:!0,data:C,method:c.method,action:i},i,C))},currentTarget:c}]})}}for(var mi=0;mi<eo.length;mi++){var vi=eo[mi],h_=vi.toLowerCase(),__=vi[0].toUpperCase()+vi.slice(1);zt(h_,"on"+__)}zt(Fu,"onAnimationEnd"),zt(Zu,"onAnimationIteration"),zt(Ku,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(Oh,"onTransitionRun"),zt(Uh,"onTransitionStart"),zt(jh,"onTransitionCancel"),zt(Pu,"onTransitionEnd"),hl("onMouseEnter",["mouseout","mouseover"]),hl("onMouseLeave",["mouseout","mouseover"]),hl("onPointerEnter",["pointerout","pointerover"]),hl("onPointerLeave",["pointerout","pointerover"]),Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Va("onBeforeInput",["compositionend","keypress","textInput","paste"]),Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vn));function yf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],c=l.event;l=l.listeners;e:{var i=void 0;if(t)for(var y=l.length-1;0<=y;y--){var g=l[y],C=g.instance,N=g.currentTarget;if(g=g.listener,C!==i&&c.isPropagationStopped())break e;i=g,c.currentTarget=N;try{i(c)}catch(Y){Gc(Y)}c.currentTarget=null,i=C}else for(y=0;y<l.length;y++){if(g=l[y],C=g.instance,N=g.currentTarget,g=g.listener,C!==i&&c.isPropagationStopped())break e;i=g,c.currentTarget=N;try{i(c)}catch(Y){Gc(Y)}c.currentTarget=null,i=C}}}}function ge(e,t){var a=t[Er];a===void 0&&(a=t[Er]=new Set);var l=e+"__bubble";a.has(l)||(mf(t,e,2,!1),a.add(l))}function gi(e,t,a){var l=0;t&&(l|=4),mf(a,e,l,t)}var lr="_reactListening"+Math.random().toString(36).slice(2);function Si(e){if(!e[lr]){e[lr]=!0,uu.forEach(function(a){a!=="selectionchange"&&(y_.has(a)||gi(a,!1,e),gi(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[lr]||(t[lr]=!0,gi("selectionchange",!1,t))}}function mf(e,t,a,l){switch(Bf(t)){case 2:var c=G_;break;case 8:c=$_;break;default:c=ji}a=c.bind(null,t,a,e),c=void 0,!Br||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function bi(e,t,a,l,c){var i=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var g=l.stateNode.containerInfo;if(g===c)break;if(y===4)for(y=l.return;y!==null;){var C=y.tag;if((C===3||C===4)&&y.stateNode.containerInfo===c)return;y=y.return}for(;g!==null;){if(y=dl(g),y===null)return;if(C=y.tag,C===5||C===6||C===26||C===27){l=i=y;continue e}g=g.parentNode}}l=l.return}Cu(function(){var N=i,Y=Lr(a),G=[];e:{var O=Ju.get(e);if(O!==void 0){var U=mc,ie=e;switch(e){case"keypress":if(_c(a)===0)break e;case"keydown":case"keyup":U=sh;break;case"focusin":ie="focus",U=Xr;break;case"focusout":ie="blur",U=Xr;break;case"beforeblur":case"afterblur":U=Xr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=Ip;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=ph;break;case Fu:case Zu:case Ku:U=th;break;case Pu:U=_h;break;case"scroll":case"scrollend":U=Pp;break;case"wheel":U=mh;break;case"copy":case"cut":case"paste":U=lh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Du;break;case"toggle":case"beforetoggle":U=gh}var ce=(t&4)!==0,Ee=!ce&&(e==="scroll"||e==="scrollend"),x=ce?O!==null?O+"Capture":null:O;ce=[];for(var A=N,E;A!==null;){var B=A;if(E=B.stateNode,B=B.tag,B!==5&&B!==26&&B!==27||E===null||x===null||(B=rn(A,x),B!=null&&ce.push(Gn(A,B,E))),Ee)break;A=A.return}0<ce.length&&(O=new U(O,ie,null,a,Y),G.push({event:O,listeners:ce}))}}if((t&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",O&&a!==kr&&(ie=a.relatedTarget||a.fromElement)&&(dl(ie)||ie[sl]))break e;if((U||O)&&(O=Y.window===Y?Y:(O=Y.ownerDocument)?O.defaultView||O.parentWindow:window,U?(ie=a.relatedTarget||a.toElement,U=N,ie=ie?dl(ie):null,ie!==null&&(Ee=o(ie),ce=ie.tag,ie!==Ee||ce!==5&&ce!==27&&ce!==6)&&(ie=null)):(U=null,ie=N),U!==ie)){if(ce=xu,B="onMouseLeave",x="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(ce=Du,B="onPointerLeave",x="onPointerEnter",A="pointer"),Ee=U==null?O:cn(U),E=ie==null?O:cn(ie),O=new ce(B,A+"leave",U,a,Y),O.target=Ee,O.relatedTarget=E,B=null,dl(Y)===N&&(ce=new ce(x,A+"enter",ie,a,Y),ce.target=E,ce.relatedTarget=Ee,B=ce),Ee=B,U&&ie)t:{for(ce=U,x=ie,A=0,E=ce;E;E=Xl(E))A++;for(E=0,B=x;B;B=Xl(B))E++;for(;0<A-E;)ce=Xl(ce),A--;for(;0<E-A;)x=Xl(x),E--;for(;A--;){if(ce===x||x!==null&&ce===x.alternate)break t;ce=Xl(ce),x=Xl(x)}ce=null}else ce=null;U!==null&&vf(G,O,U,ce,!1),ie!==null&&Ee!==null&&vf(G,Ee,ie,ce,!0)}}e:{if(O=N?cn(N):window,U=O.nodeName&&O.nodeName.toLowerCase(),U==="select"||U==="input"&&O.type==="file")var ee=zu;else if(ju(O))if(Hu)ee=Th;else{ee=qh;var _e=xh}else U=O.nodeName,!U||U.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?N&&Hr(N.elementType)&&(ee=zu):ee=Dh;if(ee&&(ee=ee(e,N))){Mu(G,ee,a,Y);break e}_e&&_e(e,O,N),e==="focusout"&&N&&O.type==="number"&&N.memoizedProps.value!=null&&zr(O,"number",O.value)}switch(_e=N?cn(N):window,e){case"focusin":(ju(_e)||_e.contentEditable==="true")&&(bl=_e,Jr=N,_n=null);break;case"focusout":_n=Jr=bl=null;break;case"mousedown":Ir=!0;break;case"contextmenu":case"mouseup":case"dragend":Ir=!1,Xu(G,a,Y);break;case"selectionchange":if(Nh)break;case"keydown":case"keyup":Xu(G,a,Y)}var ae;if(Fr)e:{switch(e){case"compositionstart":var oe="onCompositionStart";break e;case"compositionend":oe="onCompositionEnd";break e;case"compositionupdate":oe="onCompositionUpdate";break e}oe=void 0}else Sl?Ou(e,a)&&(oe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(oe="onCompositionStart");oe&&(Tu&&a.locale!=="ko"&&(Sl||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&Sl&&(ae=Ru()):(va=Y,Vr="value"in va?va.value:va.textContent,Sl=!0)),_e=nr(N,oe),0<_e.length&&(oe=new qu(oe,e,null,a,Y),G.push({event:oe,listeners:_e}),ae?oe.data=ae:(ae=Uu(a),ae!==null&&(oe.data=ae)))),(ae=bh?wh(e,a):Ch(e,a))&&(oe=nr(N,"onBeforeInput"),0<oe.length&&(_e=new qu("onBeforeInput","beforeinput",null,a,Y),G.push({event:_e,listeners:oe}),_e.data=ae)),p_(G,e,N,a,Y)}yf(G,t)})}function Gn(e,t,a){return{instance:e,listener:t,currentTarget:a}}function nr(e,t){for(var a=t+"Capture",l=[];e!==null;){var c=e,i=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||i===null||(c=rn(e,a),c!=null&&l.unshift(Gn(e,c,i)),c=rn(e,t),c!=null&&l.push(Gn(e,c,i))),e.tag===3)return l;e=e.return}return[]}function Xl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vf(e,t,a,l,c){for(var i=t._reactName,y=[];a!==null&&a!==l;){var g=a,C=g.alternate,N=g.stateNode;if(g=g.tag,C!==null&&C===l)break;g!==5&&g!==26&&g!==27||N===null||(C=N,c?(N=rn(a,i),N!=null&&y.unshift(Gn(a,N,C))):c||(N=rn(a,i),N!=null&&y.push(Gn(a,N,C)))),a=a.return}y.length!==0&&e.push({event:t,listeners:y})}var m_=/\r\n?/g,v_=/\u0000|\uFFFD/g;function gf(e){return(typeof e=="string"?e:""+e).replace(m_,`
`).replace(v_,"")}function Sf(e,t){return t=gf(t),gf(e)===t}function cr(){}function Te(e,t,a,l,c,i){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||ml(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&ml(e,""+l);break;case"className":sc(e,"class",l);break;case"tabIndex":sc(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":sc(e,a,l);break;case"style":bu(e,l,i);break;case"data":if(t!=="object"){sc(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=pc(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(a==="formAction"?(t!=="input"&&Te(e,t,"name",c.name,c,null),Te(e,t,"formEncType",c.formEncType,c,null),Te(e,t,"formMethod",c.formMethod,c,null),Te(e,t,"formTarget",c.formTarget,c,null)):(Te(e,t,"encType",c.encType,c,null),Te(e,t,"method",c.method,c,null),Te(e,t,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=pc(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=cr);break;case"onScroll":l!=null&&ge("scroll",e);break;case"onScrollEnd":l!=null&&ge("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=pc(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":ge("beforetoggle",e),ge("toggle",e),uc(e,"popover",l);break;case"xlinkActuate":Pt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":uc(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Zp.get(a)||a,uc(e,a,l))}}function wi(e,t,a,l,c,i){switch(a){case"style":bu(e,l,i);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?ml(e,l):(typeof l=="number"||typeof l=="bigint")&&ml(e,""+l);break;case"onScroll":l!=null&&ge("scroll",e);break;case"onScrollEnd":l!=null&&ge("scrollend",e);break;case"onClick":l!=null&&(e.onclick=cr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!su.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),i=e[it]||null,i=i!=null?i[a]:null,typeof i=="function"&&e.removeEventListener(t,i,c),typeof l=="function")){typeof i!="function"&&i!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,c);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):uc(e,a,l)}}}function tt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ge("error",e),ge("load",e);var l=!1,c=!1,i;for(i in a)if(a.hasOwnProperty(i)){var y=a[i];if(y!=null)switch(i){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Te(e,t,i,y,a,null)}}c&&Te(e,t,"srcSet",a.srcSet,a,null),l&&Te(e,t,"src",a.src,a,null);return;case"input":ge("invalid",e);var g=i=y=c=null,C=null,N=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":c=Y;break;case"type":y=Y;break;case"checked":C=Y;break;case"defaultChecked":N=Y;break;case"value":i=Y;break;case"defaultValue":g=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,t));break;default:Te(e,t,l,Y,a,null)}}mu(e,i,g,C,N,y,c,!1),dc(e);return;case"select":ge("invalid",e),l=y=i=null;for(c in a)if(a.hasOwnProperty(c)&&(g=a[c],g!=null))switch(c){case"value":i=g;break;case"defaultValue":y=g;break;case"multiple":l=g;default:Te(e,t,c,g,a,null)}t=i,a=y,e.multiple=!!l,t!=null?yl(e,!!l,t,!1):a!=null&&yl(e,!!l,a,!0);return;case"textarea":ge("invalid",e),i=c=l=null;for(y in a)if(a.hasOwnProperty(y)&&(g=a[y],g!=null))switch(y){case"value":l=g;break;case"defaultValue":c=g;break;case"children":i=g;break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:Te(e,t,y,g,a,null)}gu(e,l,c,i),dc(e);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Te(e,t,C,l,a,null)}return;case"dialog":ge("beforetoggle",e),ge("toggle",e),ge("cancel",e),ge("close",e);break;case"iframe":case"object":ge("load",e);break;case"video":case"audio":for(l=0;l<Vn.length;l++)ge(Vn[l],e);break;case"image":ge("error",e),ge("load",e);break;case"details":ge("toggle",e);break;case"embed":case"source":case"link":ge("error",e),ge("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Te(e,t,N,l,a,null)}return;default:if(Hr(t)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&wi(e,t,Y,l,a,void 0));return}}for(g in a)a.hasOwnProperty(g)&&(l=a[g],l!=null&&Te(e,t,g,l,a,null))}function g_(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,i=null,y=null,g=null,C=null,N=null,Y=null;for(U in a){var G=a[U];if(a.hasOwnProperty(U)&&G!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":C=G;default:l.hasOwnProperty(U)||Te(e,t,U,null,l,G)}}for(var O in l){var U=l[O];if(G=a[O],l.hasOwnProperty(O)&&(U!=null||G!=null))switch(O){case"type":i=U;break;case"name":c=U;break;case"checked":N=U;break;case"defaultChecked":Y=U;break;case"value":y=U;break;case"defaultValue":g=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(137,t));break;default:U!==G&&Te(e,t,O,U,l,G)}}Mr(e,y,g,C,N,Y,i,c);return;case"select":U=y=g=O=null;for(i in a)if(C=a[i],a.hasOwnProperty(i)&&C!=null)switch(i){case"value":break;case"multiple":U=C;default:l.hasOwnProperty(i)||Te(e,t,i,null,l,C)}for(c in l)if(i=l[c],C=a[c],l.hasOwnProperty(c)&&(i!=null||C!=null))switch(c){case"value":O=i;break;case"defaultValue":g=i;break;case"multiple":y=i;default:i!==C&&Te(e,t,c,i,l,C)}t=g,a=y,l=U,O!=null?yl(e,!!a,O,!1):!!l!=!!a&&(t!=null?yl(e,!!a,t,!0):yl(e,!!a,a?[]:"",!1));return;case"textarea":U=O=null;for(g in a)if(c=a[g],a.hasOwnProperty(g)&&c!=null&&!l.hasOwnProperty(g))switch(g){case"value":break;case"children":break;default:Te(e,t,g,null,l,c)}for(y in l)if(c=l[y],i=a[y],l.hasOwnProperty(y)&&(c!=null||i!=null))switch(y){case"value":O=c;break;case"defaultValue":U=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(r(91));break;default:c!==i&&Te(e,t,y,c,l,i)}vu(e,O,U);return;case"option":for(var ie in a)if(O=a[ie],a.hasOwnProperty(ie)&&O!=null&&!l.hasOwnProperty(ie))switch(ie){case"selected":e.selected=!1;break;default:Te(e,t,ie,null,l,O)}for(C in l)if(O=l[C],U=a[C],l.hasOwnProperty(C)&&O!==U&&(O!=null||U!=null))switch(C){case"selected":e.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Te(e,t,C,O,l,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in a)O=a[ce],a.hasOwnProperty(ce)&&O!=null&&!l.hasOwnProperty(ce)&&Te(e,t,ce,null,l,O);for(N in l)if(O=l[N],U=a[N],l.hasOwnProperty(N)&&O!==U&&(O!=null||U!=null))switch(N){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(137,t));break;default:Te(e,t,N,O,l,U)}return;default:if(Hr(t)){for(var Ee in a)O=a[Ee],a.hasOwnProperty(Ee)&&O!==void 0&&!l.hasOwnProperty(Ee)&&wi(e,t,Ee,void 0,l,O);for(Y in l)O=l[Y],U=a[Y],!l.hasOwnProperty(Y)||O===U||O===void 0&&U===void 0||wi(e,t,Y,O,l,U);return}}for(var x in a)O=a[x],a.hasOwnProperty(x)&&O!=null&&!l.hasOwnProperty(x)&&Te(e,t,x,null,l,O);for(G in l)O=l[G],U=a[G],!l.hasOwnProperty(G)||O===U||O==null&&U==null||Te(e,t,G,O,l,U)}var Ci=null,Ri=null;function rr(e){return e.nodeType===9?e:e.ownerDocument}function bf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ai(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xi=null;function S_(){var e=window.event;return e&&e.type==="popstate"?e===xi?!1:(xi=e,!0):(xi=null,!1)}var Cf=typeof setTimeout=="function"?setTimeout:void 0,b_=typeof clearTimeout=="function"?clearTimeout:void 0,Rf=typeof Promise=="function"?Promise:void 0,w_=typeof queueMicrotask=="function"?queueMicrotask:typeof Rf<"u"?function(e){return Rf.resolve(null).then(e).catch(C_)}:Cf;function C_(e){setTimeout(function(){throw e})}function ja(e){return e==="head"}function Af(e,t){var a=t,l=0,c=0;do{var i=a.nextSibling;if(e.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(0<l&&8>l){a=l;var y=e.ownerDocument;if(a&1&&$n(y.documentElement),a&2&&$n(y.body),a&4)for(a=y.head,$n(a),y=a.firstChild;y;){var g=y.nextSibling,C=y.nodeName;y[nn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=g}}if(c===0){e.removeChild(i),In(t);return}c--}else a==="$"||a==="$?"||a==="$!"?c++:l=a.charCodeAt(0)-48;else l=0;a=i}while(a);In(t)}function qi(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":qi(a),Nr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function R_(e,t,a,l){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[nn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=kt(e.nextSibling),e===null)break}return null}function A_(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=kt(e.nextSibling),e===null))return null;return e}function Di(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function x_(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function kt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Ti=null;function xf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function qf(e,t,a){switch(t=rr(a),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function $n(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Nr(e)}var Ut=new Map,Df=new Set;function or(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var sa=q.d;q.d={f:q_,r:D_,D:T_,C:E_,L:N_,m:O_,X:j_,S:U_,M:M_};function q_(){var e=sa.f(),t=Ic();return e||t}function D_(e){var t=fl(e);t!==null&&t.tag===5&&t.type==="form"?Fs(t):sa.r(e)}var Ql=typeof document>"u"?null:document;function Tf(e,t,a){var l=Ql;if(l&&typeof t=="string"&&t){var c=xt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Df.has(c)||(Df.add(c),e={rel:e,crossOrigin:a,href:t},l.querySelector(c)===null&&(t=l.createElement("link"),tt(t,"link",e),Ke(t),l.head.appendChild(t)))}}function T_(e){sa.D(e),Tf("dns-prefetch",e,null)}function E_(e,t){sa.C(e,t),Tf("preconnect",e,t)}function N_(e,t,a){sa.L(e,t,a);var l=Ql;if(l&&e&&t){var c='link[rel="preload"][as="'+xt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+xt(a.imageSizes)+'"]')):c+='[href="'+xt(e)+'"]';var i=c;switch(t){case"style":i=Fl(e);break;case"script":i=Zl(e)}Ut.has(i)||(e=m({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Ut.set(i,e),l.querySelector(c)!==null||t==="style"&&l.querySelector(Xn(i))||t==="script"&&l.querySelector(Qn(i))||(t=l.createElement("link"),tt(t,"link",e),Ke(t),l.head.appendChild(t)))}}function O_(e,t){sa.m(e,t);var a=Ql;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+xt(l)+'"][href="'+xt(e)+'"]',i=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Zl(e)}if(!Ut.has(i)&&(e=m({rel:"modulepreload",href:e},t),Ut.set(i,e),a.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Qn(i)))return}l=a.createElement("link"),tt(l,"link",e),Ke(l),a.head.appendChild(l)}}}function U_(e,t,a){sa.S(e,t,a);var l=Ql;if(l&&e){var c=pl(l).hoistableStyles,i=Fl(e);t=t||"default";var y=c.get(i);if(!y){var g={loading:0,preload:null};if(y=l.querySelector(Xn(i)))g.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Ut.get(i))&&Ei(e,a);var C=y=l.createElement("link");Ke(C),tt(C,"link",e),C._p=new Promise(function(N,Y){C.onload=N,C.onerror=Y}),C.addEventListener("load",function(){g.loading|=1}),C.addEventListener("error",function(){g.loading|=2}),g.loading|=4,ir(y,t,l)}y={type:"stylesheet",instance:y,count:1,state:g},c.set(i,y)}}}function j_(e,t){sa.X(e,t);var a=Ql;if(a&&e){var l=pl(a).hoistableScripts,c=Zl(e),i=l.get(c);i||(i=a.querySelector(Qn(c)),i||(e=m({src:e,async:!0},t),(t=Ut.get(c))&&Ni(e,t),i=a.createElement("script"),Ke(i),tt(i,"link",e),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},l.set(c,i))}}function M_(e,t){sa.M(e,t);var a=Ql;if(a&&e){var l=pl(a).hoistableScripts,c=Zl(e),i=l.get(c);i||(i=a.querySelector(Qn(c)),i||(e=m({src:e,async:!0,type:"module"},t),(t=Ut.get(c))&&Ni(e,t),i=a.createElement("script"),Ke(i),tt(i,"link",e),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},l.set(c,i))}}function Ef(e,t,a,l){var c=(c=ne.current)?or(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Fl(a.href),a=pl(c).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Fl(a.href);var i=pl(c).hoistableStyles,y=i.get(e);if(y||(c=c.ownerDocument||c,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,y),(i=c.querySelector(Xn(e)))&&!i._p&&(y.instance=i,y.state.loading=5),Ut.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ut.set(e,a),i||z_(c,e,a,y.state))),t&&l===null)throw Error(r(528,""));return y}if(t&&l!==null)throw Error(r(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Zl(a),a=pl(c).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Fl(e){return'href="'+xt(e)+'"'}function Xn(e){return'link[rel="stylesheet"]['+e+"]"}function Nf(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function z_(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),tt(t,"link",a),Ke(t),e.head.appendChild(t))}function Zl(e){return'[src="'+xt(e)+'"]'}function Qn(e){return"script[async]"+e}function Of(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+xt(a.href)+'"]');if(l)return t.instance=l,Ke(l),l;var c=m({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ke(l),tt(l,"style",c),ir(l,a.precedence,e),t.instance=l;case"stylesheet":c=Fl(a.href);var i=e.querySelector(Xn(c));if(i)return t.state.loading|=4,t.instance=i,Ke(i),i;l=Nf(a),(c=Ut.get(c))&&Ei(l,c),i=(e.ownerDocument||e).createElement("link"),Ke(i);var y=i;return y._p=new Promise(function(g,C){y.onload=g,y.onerror=C}),tt(i,"link",l),t.state.loading|=4,ir(i,a.precedence,e),t.instance=i;case"script":return i=Zl(a.src),(c=e.querySelector(Qn(i)))?(t.instance=c,Ke(c),c):(l=a,(c=Ut.get(i))&&(l=m({},a),Ni(l,c)),e=e.ownerDocument||e,c=e.createElement("script"),Ke(c),tt(c,"link",l),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,ir(l,a.precedence,e));return t.instance}function ir(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,i=c,y=0;y<l.length;y++){var g=l[y];if(g.dataset.precedence===t)i=g;else if(i!==c)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Ei(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ni(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ur=null;function Uf(e,t,a){if(ur===null){var l=new Map,c=ur=new Map;c.set(a,l)}else c=ur,l=c.get(a),l||(l=new Map,c.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var i=a[c];if(!(i[nn]||i[lt]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var y=i.getAttribute(t)||"";y=e+y;var g=l.get(y);g?g.push(i):l.set(y,[i])}}return l}function jf(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function H_(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Mf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Fn=null;function k_(){}function L_(e,t,a){if(Fn===null)throw Error(r(475));var l=Fn;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var c=Fl(a.href),i=e.querySelector(Xn(c));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=sr.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=i,Ke(i);return}i=e.ownerDocument||e,a=Nf(a),(c=Ut.get(c))&&Ei(a,c),i=i.createElement("link"),Ke(i);var y=i;y._p=new Promise(function(g,C){y.onload=g,y.onerror=C}),tt(i,"link",a),t.instance=i}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=sr.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function Y_(){if(Fn===null)throw Error(r(475));var e=Fn;return e.stylesheets&&e.count===0&&Oi(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&Oi(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function sr(){if(this.count--,this.count===0){if(this.stylesheets)Oi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var dr=null;function Oi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,dr=new Map,t.forEach(B_,e),dr=null,sr.call(e))}function B_(e,t){if(!(t.state.loading&4)){var a=dr.get(e);if(a)var l=a.get(null);else{a=new Map,dr.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<c.length;i++){var y=c[i];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),l=y)}l&&a.set(null,l)}c=t.instance,y=c.getAttribute("data-precedence"),i=a.get(y)||l,i===l&&a.set(null,c),a.set(y,c),this.count++,l=sr.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),i?i.parentNode.insertBefore(c,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Zn={$$typeof:L,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function V_(e,t,a,l,c,i,y,g){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kt(0),this.hiddenUpdates=Kt(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=i,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=g,this.incompleteTransitions=new Map}function zf(e,t,a,l,c,i,y,g,C,N,Y,G){return e=new V_(e,t,a,y,g,C,N,G),t=1,i===!0&&(t|=24),i=yt(3,null,null,t),e.current=i,i.stateNode=e,t=po(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:l,isDehydrated:a,cache:t},mo(i),e}function Hf(e){return e?(e=Al,e):Al}function kf(e,t,a,l,c,i){c=Hf(c),l.context===null?l.context=c:l.pendingContext=c,l=ba(t),l.payload={element:a},i=i===void 0?null:i,i!==null&&(l.callback=i),a=wa(e,l,t),a!==null&&(bt(a,e,t),Rn(a,e,t))}function Lf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Ui(e,t){Lf(e,t),(e=e.alternate)&&Lf(e,t)}function Yf(e){if(e.tag===13){var t=Rl(e,67108864);t!==null&&bt(t,e,67108864),Ui(e,67108864)}}var fr=!0;function G_(e,t,a,l){var c=z.T;z.T=null;var i=q.p;try{q.p=2,ji(e,t,a,l)}finally{q.p=i,z.T=c}}function $_(e,t,a,l){var c=z.T;z.T=null;var i=q.p;try{q.p=8,ji(e,t,a,l)}finally{q.p=i,z.T=c}}function ji(e,t,a,l){if(fr){var c=Mi(l);if(c===null)bi(e,t,l,pr,a),Vf(e,l);else if(Q_(c,e,t,a,l))l.stopPropagation();else if(Vf(e,l),t&4&&-1<X_.indexOf(e)){for(;c!==null;){var i=fl(c);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var y=Mt(i.pendingLanes);if(y!==0){var g=i;for(g.pendingLanes|=2,g.entangledLanes|=2;y;){var C=1<<31-je(y);g.entanglements[1]|=C,y&=~C}$t(i),(Re&6)===0&&(Pc=Rt()+500,Bn(0))}}break;case 13:g=Rl(i,2),g!==null&&bt(g,i,2),Ic(),Ui(i,2)}if(i=Mi(l),i===null&&bi(e,t,l,pr,a),i===c)break;c=i}c!==null&&l.stopPropagation()}else bi(e,t,l,null,a)}}function Mi(e){return e=Lr(e),zi(e)}var pr=null;function zi(e){if(pr=null,e=dl(e),e!==null){var t=o(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return pr=e,null}function Bf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lc()){case nc:return 2;case cc:return 8;case il:case xr:return 32;case an:return 268435456;default:return 32}default:return 32}}var Hi=!1,Ma=null,za=null,Ha=null,Kn=new Map,Pn=new Map,ka=[],X_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vf(e,t){switch(e){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":Kn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(t.pointerId)}}function Jn(e,t,a,l,c,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:i,targetContainers:[c]},t!==null&&(t=fl(t),t!==null&&Yf(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Q_(e,t,a,l,c){switch(t){case"focusin":return Ma=Jn(Ma,e,t,a,l,c),!0;case"dragenter":return za=Jn(za,e,t,a,l,c),!0;case"mouseover":return Ha=Jn(Ha,e,t,a,l,c),!0;case"pointerover":var i=c.pointerId;return Kn.set(i,Jn(Kn.get(i)||null,e,t,a,l,c)),!0;case"gotpointercapture":return i=c.pointerId,Pn.set(i,Jn(Pn.get(i)||null,e,t,a,l,c)),!0}return!1}function Gf(e){var t=dl(e.target);if(t!==null){var a=o(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,Lp(e.priority,function(){if(a.tag===13){var l=St();l=Dr(l);var c=Rl(a,l);c!==null&&bt(c,a,l),Ui(a,l)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Mi(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);kr=l,a.target.dispatchEvent(l),kr=null}else return t=fl(a),t!==null&&Yf(t),e.blockedOn=a,!1;t.shift()}return!0}function $f(e,t,a){hr(e)&&a.delete(t)}function F_(){Hi=!1,Ma!==null&&hr(Ma)&&(Ma=null),za!==null&&hr(za)&&(za=null),Ha!==null&&hr(Ha)&&(Ha=null),Kn.forEach($f),Pn.forEach($f)}function _r(e,t){e.blockedOn===t&&(e.blockedOn=null,Hi||(Hi=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,F_)))}var yr=null;function Xf(e){yr!==e&&(yr=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){yr===e&&(yr=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],c=e[t+2];if(typeof l!="function"){if(zi(l||a)===null)continue;break}var i=fl(a);i!==null&&(e.splice(t,3),t-=3,zo(i,{pending:!0,data:c,method:a.method,action:l},l,c))}}))}function In(e){function t(C){return _r(C,e)}Ma!==null&&_r(Ma,e),za!==null&&_r(za,e),Ha!==null&&_r(Ha,e),Kn.forEach(t),Pn.forEach(t);for(var a=0;a<ka.length;a++){var l=ka[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ka.length&&(a=ka[0],a.blockedOn===null);)Gf(a),a.blockedOn===null&&ka.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var c=a[l],i=a[l+1],y=c[it]||null;if(typeof i=="function")y||Xf(a);else if(y){var g=null;if(i&&i.hasAttribute("formAction")){if(c=i,y=i[it]||null)g=y.formAction;else if(zi(c)!==null)continue}else g=y.action;typeof g=="function"?a[l+1]=g:(a.splice(l,3),l-=3),Xf(a)}}}function ki(e){this._internalRoot=e}mr.prototype.render=ki.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var a=t.current,l=St();kf(a,l,e,t,null,null)},mr.prototype.unmount=ki.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kf(e.current,2,null,e,null,null),Ic(),t[sl]=null}};function mr(e){this._internalRoot=e}mr.prototype.unstable_scheduleHydration=function(e){if(e){var t=ou();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ka.length&&t!==0&&t<ka[a].priority;a++);ka.splice(a,0,e),a===0&&Gf(e)}};var Qf=s.version;if(Qf!=="19.1.1")throw Error(r(527,Qf,"19.1.1"));q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=_(t),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var Z_={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vr.isDisabled&&vr.supportsFiber)try{P=vr.inject(Z_),ue=vr}catch{}}return ec.createRoot=function(e,t){if(!d(e))throw Error(r(299));var a=!1,l="",c=od,i=id,y=ud,g=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(g=t.unstable_transitionCallbacks)),t=zf(e,1,!1,null,null,a,l,c,i,y,g,null),e[sl]=t.current,Si(e),new ki(t)},ec.hydrateRoot=function(e,t,a){if(!d(e))throw Error(r(299));var l=!1,c="",i=od,y=id,g=ud,C=null,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(g=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(N=a.formState)),t=zf(e,1,!0,t,a??null,l,c,i,y,g,C,N),t.context=Hf(null),a=t.current,l=St(),l=Dr(l),c=ba(l),c.callback=null,wa(a,c,l),a=l,t.current.lanes=a,ln(t,a),$t(t),e[sl]=t.current,Si(e),new mr(t)},ec.version="19.1.1",ec}var ap;function ry(){if(ap)return Bi.exports;ap=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),Bi.exports=cy(),Bi.exports}var oy=ry();/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function iy({onClose:n}){return v.jsx("div",{className:"modal-overlay",onClick:n,children:v.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[v.jsx("button",{className:"btn btn-back modal-close-btn",onClick:n,children:"X"}),v.jsx("h2",{children:"Game Rules"}),v.jsx("h3",{children:"Objective"}),v.jsx("p",{children:"You play as an artificial intelligence trying to compile your own 3 protocols. To do this, you play command cards on the protocols over several rounds and execute their effects. If you reach a total value of at least 10 with your own command cards on a protocol and exceed the other person's total value in the same row, you may compile the protocol (turn it over). The first person to compile their 3 protocols wins."}),v.jsx("h3",{children:"Game Flow"}),v.jsx("p",{children:"The person who chose a protocol first begins. You always play alternately until one person wins. On your turn, handle the following 6 phases in sequence:"}),v.jsxs("ol",{children:[v.jsx("li",{children:"Start"}),v.jsx("li",{children:"Check Control"}),v.jsx("li",{children:"Check Compile"}),v.jsx("li",{children:"Perform Action"}),v.jsx("li",{children:"Check Hand Limit"}),v.jsx("li",{children:"End"})]}),v.jsx("h3",{children:"Phases in Detail"}),v.jsxs("p",{children:[v.jsx("strong",{children:"1. Start:"}),' Resolve all visible "Start" effects of your face-up command cards in an order of your choice.']}),v.jsxs("p",{children:[v.jsx("strong",{children:"2. Check Control:"})," If the total value of your command cards in at least 2 rows is higher than the total value of the other person's command cards in the corresponding rows, take the control card and place it in front of you."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"3. Check Compile:"})," If you can compile protocols, you must now compile 1 of them. If you can compile multiple protocols, choose 1 of them. If you have compiled, you must skip phase 4 and proceed directly to phase 5."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Compile Action:"}),` If your cards in a row have a total value of 10 or more AND this is higher than the other person's total value in that row, you must compile your protocol in that row. To do this, both of you remove all cards on your side of that row and place them on your respective discard piles. Then, turn your protocol in that row to the "Compiled" side. If you compile this protocol again later, you draw 1 card from the other person's deck as a reward instead. Use it from now on as if it were your own card.`]}),v.jsxs("p",{children:[v.jsx("strong",{children:"4. Perform Action:"}),' Play 1 command card from your hand OR fill your hand. If you have no hand cards, you must perform the "Fill Hand" action. If you have 5 or more hand cards, you may not perform the "Fill Hand" action.']}),v.jsxs("p",{children:[v.jsx("strong",{children:"5. Check Hand Limit:"})," If you have more than 5 command cards in your hand, you must reduce to your hand limit: discard hand cards until you have only 5."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"6. End:"}),' Resolve all visible "End" effects of your face-up command cards in an order of your choice.']}),v.jsx("h3",{children:"Glossary"}),v.jsxs("p",{children:[v.jsx("strong",{children:"Clear Cache:"})," Discard down to 5 cards in hand."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Compile:"})," To delete all cards in a line on both players sides and flip a protocol."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Covered:"})," A card with another card on top of it is covered."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Delete:"})," Move a card from the field to the trash."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Discard:"})," Move a card from hand to the owners trash."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Flip:"})," Change the facing of a card from face-down to face-up, or from face-up to face-down."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Line:"})," The area of play through both protocols. The field is made up of 3 lines, each passing through 2 opposing protocols."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Protocol:"})," The header that dictates which line you are allowed to play cards into."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Rearrange:"})," Change the position of protocols."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Refresh:"})," Draw until you have 5 cards in hand."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Return:"})," Move a card from the field to its owners hand."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Reveal:"})," Publicly share information that was hidden or private without effect, then return it to its previous state."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Shift:"})," Move a card to another line on the same side of the field."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Stack:"})," The cards in a line on one players side."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Trash:"})," Where discarded and deleted cards go. This is reshuffled to reform your deck when need be."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Uncovered:"})," The card at the end of a stack, furthest from the protocol is the uncovered card."]})]})})}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function wt({card:n,onMouseDown:s,onMouseEnter:u,onMouseLeave:r,isFaceUp:d,faceDownValue:o=2,isSelected:f,isMultiSelected:h,isTargetable:_,isSourceOfEffect:p,style:m,additionalClassName:S,animationState:b}){const R=({content:Z,className:se})=>v.jsx("div",{className:`card-rule-box ${se||""}`,dangerouslySetInnerHTML:{__html:Z}}),D=(b==null?void 0:b.type)==="playCard"&&b.cardId===n.id?`is-entering-${b.owner}`:"",X=(b==null?void 0:b.type)==="deleteCard"&&b.cardId===n.id?`is-deleting-${b.owner}`:"",W=(b==null?void 0:b.type)==="drawCard"||(b==null?void 0:b.type)==="discardCard"?b.owner:void 0,L=W==="player"&&(b==null?void 0:b.type)==="drawCard"&&b.cardIds.includes(n.id),J=W==="player"&&(b==null?void 0:b.type)==="discardCard"&&b.cardIds.includes(n.id),k=["card-component"];return n.protocol&&k.push(`card-protocol-${n.protocol.toLowerCase()}`),f&&k.push("selected"),h&&k.push("multi-selected"),J&&k.push("is-discarding"),_&&k.push("is-targetable"),p&&k.push("is-source-of-effect"),D&&k.push(D),X&&k.push(X),L&&k.push("is-drawing"),S&&k.push(S),v.jsx("div",{className:k.join(" "),onMouseDown:s,onMouseEnter:u,onMouseLeave:r,role:"button",tabIndex:s?0:-1,style:m,children:v.jsxs("div",{className:`card-inner ${d?"":"is-flipped"}`,children:[v.jsxs("div",{className:"card-face card-front",children:[v.jsxs("div",{className:"card-header",children:[v.jsx("span",{className:"card-protocol",children:n.protocol}),v.jsx("span",{className:"card-value",children:n.value})]}),v.jsxs("div",{className:"card-body",children:[v.jsx(R,{content:n.top,className:"card-rule-top"}),v.jsx(R,{content:n.middle,className:"card-rule-middle"}),v.jsx(R,{content:n.bottom,className:"card-rule-bottom"})]})]}),v.jsx("div",{className:"card-face card-back",children:v.jsx("div",{className:"card-back-value",children:o})})]})})}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const da=[{protocol:"Apathy",value:0,top:"Your total value in this line is increased by 1 for each face-down card in this line.",middle:"",bottom:"",keywords:{}},{protocol:"Apathy",value:1,top:"",middle:"Flip all other face-up cards in this line.",bottom:"",keywords:{flip:!0}},{protocol:"Apathy",value:2,top:"Ignore all middle commands of cards in this line.",middle:"",bottom:"<div><span class='emphasis'>When this card would be covered:</span> First, flip this card.</div>",keywords:{flip:!0}},{protocol:"Apathy",value:3,top:"",middle:"Flip 1 of your opponent's face-up cards.",bottom:"",keywords:{flip:!0}},{protocol:"Apathy",value:4,top:"",middle:"You may flip 1 of your face-up covered cards.",bottom:"",keywords:{flip:!0}},{protocol:"Apathy",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Darkness",value:0,top:"",middle:"Draw 3 cards. Shift 1 of your opponent's covered cards.",bottom:"",keywords:{draw:!0,shift:!0}},{protocol:"Darkness",value:1,top:"",middle:"Flip 1 of your opponent's cards. You may shift that card.",bottom:"",keywords:{flip:!0,shift:!0}},{protocol:"Darkness",value:2,top:"All face-down cards in this stack have a value of 4.",middle:"You may flip 1 covered card in this line.",bottom:"",keywords:{flip:!0}},{protocol:"Darkness",value:3,top:"",middle:"Play 1 card face-down in another line.",bottom:"",keywords:{play:!0}},{protocol:"Darkness",value:4,top:"",middle:"Shift 1 face-down card.",bottom:"",keywords:{shift:!0}},{protocol:"Darkness",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Death",value:0,top:"",middle:"Delete 1 card from each other line.",bottom:"",keywords:{delete:!0}},{protocol:"Death",value:1,top:"<div><span class='emphasis'>Start:</span> You may draw 1 card. If you do, delete 1 other card, then delete this card.</div>",middle:"",bottom:"",keywords:{draw:!0,delete:!0}},{protocol:"Death",value:2,top:"",middle:"Delete all cards in 1 line with values of 1 or 2.",bottom:"",keywords:{delete:!0}},{protocol:"Death",value:3,top:"",middle:"Delete 1 face-down card.",bottom:"",keywords:{delete:!0}},{protocol:"Death",value:4,top:"",middle:"Delete a card with a value of 0 or 1.",bottom:"",keywords:{delete:!0}},{protocol:"Death",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Fire",value:0,top:"",middle:"Flip 1 other card. Draw 2 cards.",bottom:"<div><span class='emphasis'>When this card would be covered:</span> First, draw 1 card and flip 1 other card.</div>",keywords:{draw:!0,flip:!0}},{protocol:"Fire",value:1,top:"",middle:"Discard 1 card. If you do, delete 1 card.",bottom:"",keywords:{delete:!0,discard:!0}},{protocol:"Fire",value:2,top:"",middle:"Discard 1 card. If you do, return 1 card.",bottom:"",keywords:{discard:!0,return:!0}},{protocol:"Fire",value:3,top:"",middle:"",bottom:"<div><span class='emphasis'>End:</span> You may discard 1 card. If you do, flip 1 card.</div>",keywords:{discard:!0,flip:!0}},{protocol:"Fire",value:4,top:"",middle:"Discard 1 or more cards. Draw the amount discarded plus 1.",bottom:"",keywords:{discard:!0,draw:!0}},{protocol:"Fire",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Gravity",value:0,top:"",middle:"For every 2 cards in this line, play the top card of your deck face-down under this card.",bottom:"",keywords:{play:!0}},{protocol:"Gravity",value:1,top:"",middle:"Draw 2 cards. Shift 1 card either to or from this line.",bottom:"",keywords:{draw:!0,shift:!0}},{protocol:"Gravity",value:2,top:"",middle:"Flip 1 card. Shift that card to this line.",bottom:"",keywords:{flip:!0,shift:!0}},{protocol:"Gravity",value:4,top:"",middle:"Shift 1 face-down card to this line.",bottom:"",keywords:{shift:!0}},{protocol:"Gravity",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Gravity",value:6,top:"",middle:"Your opponent plays the top card of their deck face-down in this line.",bottom:"",keywords:{play:!0}},{protocol:"Hate",value:0,top:"",middle:"Delete 1 card.",bottom:"",keywords:{delete:!0}},{protocol:"Hate",value:1,top:"",middle:"Discard 3 cards. Delete 1 card. Delete 1 card.",bottom:"",keywords:{delete:!0,discard:!0}},{protocol:"Hate",value:2,top:"",middle:"Delete your highest value card. Delete your opponent's highest value card.",bottom:"",keywords:{delete:!0}},{protocol:"Hate",value:3,top:"<div><span class='emphasis'>After you delete cards:</span> Draw 1 card.</div>",middle:"",bottom:"",keywords:{draw:!0}},{protocol:"Hate",value:4,top:"",middle:"",bottom:"<div><span class='emphasis'>When this card would be covered:</span> First, delete the lowest value covered card in this line.</div>",keywords:{delete:!0}},{protocol:"Hate",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Life",value:0,top:"",middle:"Play the top card of your deck face-down in each line where you have a card.",bottom:"<div><span class='emphasis'>When this card would be covered:</span> First, delete this card.</div>",keywords:{delete:!0,play:!0}},{protocol:"Life",value:1,top:"",middle:"Flip 1 card. Flip 1 card.",bottom:"",keywords:{flip:!0}},{protocol:"Life",value:2,top:"",middle:"Draw 1 card. You may flip 1 face-down card.",bottom:"",keywords:{draw:!0,flip:!0}},{protocol:"Life",value:3,top:"",middle:"",bottom:"<div><span class='emphasis'>When this card would be covered:</span> First, play the top card of your deck face-down in another line.</div>",keywords:{play:!0}},{protocol:"Life",value:4,top:"",middle:"If this card is covering a card, draw 1 card.",bottom:"",keywords:{draw:!0}},{protocol:"Life",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Light",value:0,top:"",middle:"Flip 1 card. Draw cards equal to that card's value.",bottom:"",keywords:{draw:!0,flip:!0}},{protocol:"Light",value:1,top:"",middle:"",bottom:"<div><span class='emphasis'>End:</span> Draw 1 card.</div>",keywords:{draw:!0}},{protocol:"Light",value:2,top:"",middle:"Draw 2 cards. Reveal 1 face-down card. You may shift or flip that card.",bottom:"",keywords:{draw:!0,flip:!0,reveal:!0,shift:!0}},{protocol:"Light",value:3,top:"",middle:"Shift all face-down cards in this line to another line.",bottom:"",keywords:{shift:!0}},{protocol:"Light",value:4,top:"",middle:"Your opponent reveals their hand.",bottom:"",keywords:{reveal:!0}},{protocol:"Light",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Love",value:1,top:"",middle:"Draw the top card of your opponent's deck.",bottom:"<div><span class='emphasis'>End:</span> You may give 1 card from your hand to your opponent. If you do, draw 2 cards.</div>",keywords:{draw:!0,give:!0}},{protocol:"Love",value:2,top:"",middle:"Your opponent draws 1 card. Refresh.",bottom:"",keywords:{draw:!0,refresh:!0}},{protocol:"Love",value:3,top:"",middle:"Take 1 random card from your opponent's hand. Give 1 card from your hand to your opponent.",bottom:"",keywords:{give:!0,take:!0}},{protocol:"Love",value:4,top:"",middle:"Reveal 1 card from your hand. Flip 1 card.",bottom:"",keywords:{flip:!0,reveal:!0}},{protocol:"Love",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Love",value:6,top:"",middle:"Your opponent draws 2 cards.",bottom:"",keywords:{draw:!0}},{protocol:"Metal",value:0,top:"Your opponent's total value in this line is reduced by 2.",middle:"Flip 1 card.",bottom:"",keywords:{flip:!0}},{protocol:"Metal",value:1,top:"",middle:"Draw 2 cards. Your opponent cannot compile next turn.",bottom:"",keywords:{draw:!0}},{protocol:"Metal",value:2,top:"Your opponent cannot play cards face-down in this line.",middle:"",bottom:"",keywords:{}},{protocol:"Metal",value:3,top:"",middle:"Draw 1 card. Delete all cards in 1 other line with 8 or more cards.",bottom:"",keywords:{delete:!0,draw:!0}},{protocol:"Metal",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Metal",value:6,top:"<div><span class='emphasis'>When this card would be covered or flipped:</span> First, delete this card.</div>",middle:"",bottom:"",keywords:{delete:!0}},{protocol:"Plague",value:0,top:"",middle:"Your opponent discards 1 card.",bottom:"Your opponent cannot play cards in this line.",keywords:{discard:!0}},{protocol:"Plague",value:1,top:"<div><span class='emphasis'>After your opponent discards cards:</span> Draw 1 card.</div>",middle:"Your opponent discards 1 card.",bottom:"",keywords:{discard:!0,draw:!0}},{protocol:"Plague",value:2,top:"",middle:"Dicard 1 or more cards. Your opponent discards the amount of cards discarded plus 1.",bottom:"",keywords:{discard:!0}},{protocol:"Plague",value:3,top:"",middle:"Flip each other face-up card.",bottom:"",keywords:{flip:!0}},{protocol:"Plague",value:4,top:"",middle:"",bottom:"<div><span class='emphasis'>End:</span> Your opponent deletes 1 of their face-down cards. You may flip this card.</div>",keywords:{delete:!0,flip:!0}},{protocol:"Plague",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Psychic",value:0,top:"",middle:"Draw 2 cards. Your opponent discards 2 cards, then reveals their hand.",bottom:"",keywords:{discard:!0,draw:!0,reveal:!0}},{protocol:"Psychic",value:1,top:"Your opponent can only play cards face-down.",middle:"",bottom:"<div><span class='emphasis'>Start:</span> Flip this card.</div>",keywords:{flip:!0}},{protocol:"Psychic",value:2,top:"",middle:"Your opponent discards 2 cards. Rearrange their protocols.",bottom:"",keywords:{discard:!0,rearrange:!0}},{protocol:"Psychic",value:3,top:"",middle:"Your opponent discards 1 card. Shift 1 of their cards.",bottom:"",keywords:{discard:!0,shift:!0}},{protocol:"Psychic",value:4,top:"",middle:"",bottom:"<div><span class='emphasis'>End:</span> You may return 1 of your opponent's cards. If you do, flip this card.</div>",keywords:{flip:!0,return:!0}},{protocol:"Psychic",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Speed",value:0,top:"",middle:"Play 1 card.",bottom:"",keywords:{play:!0}},{protocol:"Speed",value:1,top:"<div><span class='emphasis'>After you clear cache:</span> Draw 1 card.</div>",middle:"Draw 2 cards.",bottom:"",keywords:{draw:!0}},{protocol:"Speed",value:2,top:"<div><span class='emphasis'>When this card would be deleted by compiling:</span> Shift this card, even if this card is covered.</div>",middle:"",bottom:"",keywords:{shift:!0}},{protocol:"Speed",value:3,top:"",middle:"Shift 1 of your other cards.",bottom:"<div><span class='emphasis'>End:</span> You may shift 1 of your cards. If you do, flip this card.</div>",keywords:{flip:!0,shift:!0}},{protocol:"Speed",value:4,top:"",middle:"Shift 1 of your opponent's face-down cards.",bottom:"",keywords:{shift:!0}},{protocol:"Speed",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Spirit",value:0,top:"",middle:"Refresh. Draw 1 card.",bottom:"Skip your check cache phase.",keywords:{draw:!0,refresh:!0}},{protocol:"Spirit",value:1,top:"You can play cards in any line.",middle:"Draw 2 cards.",bottom:"<div><span class='emphasis'>Start:</span> Either discard 1 card or flip this card.</div>",keywords:{discard:!0,draw:!0,flip:!0}},{protocol:"Spirit",value:2,top:"",middle:"You may flip 1 card.",bottom:"",keywords:{flip:!0}},{protocol:"Spirit",value:3,top:"<div><span class='emphasis'>After you draw cards:</span> You may shift this card, even if this card is covered.</div>",middle:"",bottom:"",keywords:{shift:!0}},{protocol:"Spirit",value:4,top:"",middle:"Swap the positions of 2 of your protocols",bottom:"",keywords:{swap:!0}},{protocol:"Spirit",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}},{protocol:"Water",value:0,top:"",middle:"Flip 1 other card. Flip this card.",bottom:"",keywords:{flip:!0}},{protocol:"Water",value:1,top:"",middle:"Play the top card of your deck face-down in each other line.",bottom:"",keywords:{play:!0}},{protocol:"Water",value:2,top:"",middle:"Draw 2 cards. Rearrange your protocols.",bottom:"",keywords:{draw:!0,rearrange:!0}},{protocol:"Water",value:3,top:"",middle:"Return all cards with a value of 2 in 1 line.",bottom:"",keywords:{return:!0}},{protocol:"Water",value:4,top:"",middle:"Return 1 of your cards.",bottom:"",keywords:{return:!0}},{protocol:"Water",value:5,top:"",middle:"You discard 1 card.",bottom:"",keywords:{discard:!0}}],uy=new Set(da.map(n=>n.protocol)),Ji=Array.from(uy).sort();/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function sy(n){const s=[];for(const u of n){const r=da.filter(d=>d.protocol===u);s.push(...r)}return s}function wr(n){const s=[...n];for(let u=s.length-1;u>0;u--){const r=Math.floor(Math.random()*(u+1));[s[u],s[r]]=[s[r],s[u]]}return s}function lp({onNavigate:n,difficulty:s,setDifficulty:u}){const[r,d]=K.useState(!1),[o,f]=K.useState(null),[h,_]=K.useState(null),[p,m]=K.useState(null),[S,b]=K.useState([]);return K.useEffect(()=>{const R=new Set;for(;R.size<2&&R.size<da.length;)R.add(Math.floor(Math.random()*da.length));const T=Array.from(R).map(D=>da[D]);T.length>0&&(m(T[0]),_(T[0])),T.length>1&&f(T[1]),b(wr(da))},[]),v.jsxs("div",{className:"screen main-menu",children:[r&&v.jsx(iy,{onClose:()=>d(!1)}),v.jsx("h1",{children:"COMPILE: MAIN 1"}),v.jsxs("div",{className:"main-menu-layout",children:[v.jsx("div",{className:"main-menu-preview decorative-card",children:h&&v.jsx(wt,{card:{...h,id:"preview",isFaceUp:!0},isFaceUp:!0})}),v.jsxs("div",{className:"main-menu-actions-container",children:[v.jsxs("div",{className:"main-menu-start-group",children:[v.jsxs("div",{className:"difficulty-selector",children:[v.jsx("h3",{className:"difficulty-title",children:"Difficulty"}),v.jsxs("div",{className:"difficulty-options",children:[v.jsx("button",{className:`btn ${s==="easy"?"active":""}`,onClick:()=>u("easy"),children:"Easy"}),v.jsx("button",{className:`btn ${s==="normal"?"active":""}`,onClick:()=>u("normal"),children:"Normal"}),v.jsx("button",{className:`btn ${s==="hard"?"active":""}`,onClick:()=>u("hard"),children:"Hard"})]})]}),v.jsx("button",{className:"btn btn-start",onClick:()=>n("ProtocolSelection"),children:"Start Game"})]}),v.jsxs("div",{className:"main-menu-other-actions",children:[v.jsx("button",{className:"btn",onClick:()=>n("CardLibrary"),children:"Cards"}),v.jsx("button",{className:"btn",onClick:()=>d(!0),children:"Rules"})]})]}),v.jsx("div",{className:"decorative-card decorative-card-right",children:o&&v.jsx(wt,{card:{...o,id:"deco-2",isFaceUp:!0},isFaceUp:!0})})]}),v.jsx("div",{className:"card-ticker-container",onMouseLeave:()=>_(p),children:v.jsxs("div",{className:"card-ticker-track",children:[S.map((R,T)=>v.jsx(wt,{card:{...R,id:`ticker-1-${T}`,isFaceUp:!0},isFaceUp:!0,additionalClassName:"in-hand",onMouseEnter:()=>_(R)},`ticker-1-${T}`)),S.map((R,T)=>v.jsx(wt,{card:{...R,id:`ticker-2-${T}`,isFaceUp:!0},isFaceUp:!0,additionalClassName:"in-hand",onMouseEnter:()=>_(R)},`ticker-2-${T}`))]})})]})}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function xp({title:n,onBack:s}){return v.jsxs("header",{className:"app-header",children:[v.jsx("h2",{children:n}),s&&v.jsx("button",{className:"btn btn-back",onClick:s,children:"Back"})]})}const gr=[{player:"Player",picks:1},{player:"Opponent",picks:2},{player:"Player",picks:2},{player:"Opponent",picks:1}];function dy({onBack:n,onStartGame:s}){const[u,r]=K.useState(0),[d,o]=K.useState([]),[f,h]=K.useState([]),[_,p]=K.useState([]),[m,S]=K.useState(!1),[b,R]=K.useState(null),[T,D]=K.useState(null),M=gr[u],X=(M==null?void 0:M.player)==="Player",W=(M==null?void 0:M.player)==="Opponent",L=K.useMemo(()=>new Set([...d,...f]),[d,f]),J=K.useMemo(()=>_.map(te=>({name:te,cards:da.filter(le=>le.protocol===te).sort((le,re)=>le.value-re.value)})),[_]),k=te=>{!X||m||p(le=>{if(le.includes(te))return le.filter(re=>re!==te);if(le.length<M.picks)return[...le,te];if(le.length===M.picks){const re=le.slice(1);return re.push(te),re}return le})},Z=async()=>{if(!X||m||_.length!==M.picks)return;S(!0);const te=[..._];p([]);for(const le of te)o(re=>[...re,le]),await new Promise(re=>setTimeout(re,300));S(!1),r(le=>le+1)};K.useEffect(()=>{W&&!m&&u<gr.length&&(async()=>{S(!0),await new Promise(xe=>setTimeout(xe,100));const le=[],re=Ji.filter(xe=>!L.has(xe)),Se=[],Me=le.filter(xe=>re.includes(xe));for(let xe=0;xe<M.picks;xe++)if(Me.length>0){const ye=Me.shift();Se.push(ye);const z=re.indexOf(ye);z>-1&&re.splice(z,1)}else if(re.length>0){const ye=Math.floor(Math.random()*re.length);Se.push(re.splice(ye,1)[0])}for(const xe of Se)await new Promise(ye=>setTimeout(ye,1e3)),R(xe),await new Promise(ye=>setTimeout(ye,1e3)),R(null),h(ye=>[...ye,xe]);S(!1),r(xe=>xe+1)})()},[u,W,m,L,M]),K.useEffect(()=>{u>=gr.length&&!m&&setTimeout(()=>{s(d,f)},1e3)},[u,m,s,d,f]);const se=te=>{let le="protocol-card";return _.includes(te)&&(le+=" selected"),L.has(te)&&(le+=" chosen"),b===te&&(le+=" is-scanning"),le},fe=()=>m&&W?"Opponent is selecting protocols...":(M==null?void 0:M.player)==="Player"?`Player, select ${M.picks} protocol(s). (${_.length}/${M.picks})`:u>=gr.length?"Finalizing selections...":"Waiting for Opponent...";return v.jsxs("div",{className:"screen protocol-selection-screen",children:[v.jsx(xp,{title:"Protocol Selection",onBack:n}),v.jsxs("div",{className:"protocol-selection-layout",children:[v.jsxs("div",{className:"protocol-selection-sidebar",children:[v.jsxs("div",{className:"player-protocols-area",children:[v.jsx("h3",{children:"Your Protocols"}),d.map(te=>v.jsx("div",{className:"protocol-display-card player",children:te},te))]}),v.jsx("div",{className:"protocol-preview-area",children:T?v.jsx(wt,{card:{...T,id:"preview",isFaceUp:!0},isFaceUp:!0}):v.jsx("p",{children:J.length>0?"Hover over a card below to see details.":"Select a protocol to see its cards."})})]}),v.jsxs("div",{className:"protocol-grid-container",children:[v.jsx("p",{children:fe()}),v.jsx("div",{className:"protocol-grid",children:Ji.map(te=>v.jsx("div",{className:se(te),onClick:()=>k(te),role:"button","aria-disabled":L.has(te)||!X||m,tabIndex:!L.has(te)&&X&&!m?0:-1,onKeyPress:le=>le.key==="Enter"&&k(te),children:te},te))}),X&&v.jsx("button",{className:"btn",onClick:Z,disabled:m||_.length!==(M==null?void 0:M.picks),children:"Confirm Selection"})]}),v.jsxs("div",{className:"opponent-protocols-area",children:[v.jsx("h3",{children:"Opponent Protocols"}),f.map(te=>v.jsx("div",{className:"protocol-display-card opponent",children:te},te))]})]}),v.jsx("div",{className:"selected-protocol-cards-container",children:J.length>0&&[...J].reverse().map(te=>v.jsx("div",{className:"protocol-card-row",children:te.cards.map(le=>v.jsx(wt,{card:{...le,id:`selection-${le.protocol}-${le.value}`,isFaceUp:!0},isFaceUp:!0,additionalClassName:"in-hand",onMouseEnter:()=>D(le),onMouseLeave:()=>D(null)},`${te.name}-${le.value}`))},te.name))})]})}const at=[];for(let n=0;n<256;++n)at.push((n+256).toString(16).slice(1));function fy(n,s=0){return(at[n[s+0]]+at[n[s+1]]+at[n[s+2]]+at[n[s+3]]+"-"+at[n[s+4]]+at[n[s+5]]+"-"+at[n[s+6]]+at[n[s+7]]+"-"+at[n[s+8]]+at[n[s+9]]+"-"+at[n[s+10]]+at[n[s+11]]+at[n[s+12]]+at[n[s+13]]+at[n[s+14]]+at[n[s+15]]).toLowerCase()}let Xi;const py=new Uint8Array(16);function hy(){if(!Xi){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Xi=crypto.getRandomValues.bind(crypto)}return Xi(py)}const _y=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),np={randomUUID:_y};function Qt(n,s,u){var d;if(np.randomUUID&&!n)return np.randomUUID();n=n||{};const r=n.random??((d=n.rng)==null?void 0:d.call(n))??hy();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,fy(r)}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const $=(n,s,u)=>({...n,log:[...n.log,{player:s,message:u}]});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function pa(n,s,u){let r=[...n],d=[...s],o=[],f=!1;for(let h=0;h<u;h++){if(r.length===0){if(d.length===0)break;r=wr(d),d=[],f=!0}o.push(r.shift())}return{drawnCards:o,remainingDeck:r,newDiscard:d,reshuffled:f}}function au(n,s){const u=n[s];let r=n;const d=u.lanes.flat().filter(o=>o.protocol==="Spirit"&&o.value===3&&o.isFaceUp);if(d.length>0)for(const o of d)r=$(r,s,"Spirit-3 triggers after drawing: You may shift this card."),r.queuedActions=[...r.queuedActions||[],{type:"prompt_shift_for_spirit_3",sourceCardId:o.id,optional:!0,actor:s}];return r}function Ne(n,s,u){const r=n[s],{drawnCards:d,remainingDeck:o,newDiscard:f,reshuffled:h}=pa(r.deck,r.discard,u);if(d.length===0)return n;const _=d.map(b=>({...b,id:Qt(),isFaceUp:!0})),p=_.map(b=>b.id),m={...r,deck:o,discard:f,hand:[...r.hand,..._]};let S={...n,[s]:m};return p.length>0&&(S.animationState={type:"drawCard",owner:s,cardIds:p}),h&&(S=$(S,s,`${s==="player"?"Player":"Opponent"}'s deck is empty. Discard pile has been reshuffled into the deck.`)),d.length>0&&(S=au(S,s)),S}function qp(n,s){const r=5-n[s].hand.length;if(r<=0)return n;const d=s==="player"?"Player":"Opponent";let o=Ne(n,s,r);return $(o,s,`${d} refreshes their hand, drawing ${r} card(s).`)}function jt(n,s){const u={...s},r=d=>d.map(o=>o.map(f=>n.has(f.id)?{...f,isFaceUp:!f.isFaceUp}:f));return u.player.lanes=r(u.player.lanes),u.opponent.lanes=r(u.opponent.lanes),pt(u)}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const cp=n=>{const s=wr(sy(n)),{drawnCards:u,remainingDeck:r}=pa(s,[],5),d={cardsPlayed:0,cardsDiscarded:0,cardsDeleted:0,cardsFlipped:0,cardsShifted:0,cardsDrawn:u.length};return{protocols:n,deck:r,hand:u.map(o=>({...o,id:Qt(),isFaceUp:!0})),lanes:[[],[],[]],discard:[],compiled:[!1,!1,!1],laneValues:[0,0,0],cannotCompile:!1,stats:d}},yy=(n,s)=>{const u=cp(n),r=cp(s),d={player:u,opponent:r,turn:"player",phase:"start",controlCardHolder:null,winner:null,log:[],actionRequired:null,queuedActions:[],animationState:null,compilableLanes:[],processedStartEffectIds:[],processedEndEffectIds:[],lastPlayedCardId:void 0,stats:{player:u.stats,opponent:r.stats}};return $(d,"player","Game Started.")},fa=(n,s)=>n.isFaceUp?n.value:s.some(r=>r.isFaceUp&&r.protocol==="Darkness"&&r.value===2)?4:2,rp=n=>{let s=0;for(const u of n)u.isFaceUp?s+=u.value:s+=2;return Math.max(0,s)};function my(n,s,u){let r=[...s],d=[...u];for(let o=0;o<3;o++)n.opponent.lanes[o].some(f=>f.isFaceUp&&f.protocol==="Metal"&&f.value===0)&&(r[o]=Math.max(0,r[o]-2)),n.player.lanes[o].some(f=>f.isFaceUp&&f.protocol==="Metal"&&f.value===0)&&(d[o]=Math.max(0,d[o]-2));for(let o=0;o<3;o++){for(const f of n.player.lanes[o])if(f.isFaceUp)switch(`${f.protocol}-${f.value}`){case"Apathy-0":{const h=n.player.lanes[o].filter(_=>!_.isFaceUp).length;r[o]+=h;break}case"Darkness-2":{const h=n.player.lanes[o].filter(_=>!_.isFaceUp).length;r[o]+=h*2;break}}for(const f of n.opponent.lanes[o])if(f.isFaceUp)switch(`${f.protocol}-${f.value}`){case"Apathy-0":{const h=n.opponent.lanes[o].filter(_=>!_.isFaceUp).length;d[o]+=h;break}case"Darkness-2":{const h=n.opponent.lanes[o].filter(_=>!_.isFaceUp).length;d[o]+=h*2;break}}}return{finalPlayerValues:r,finalOpponentValues:d}}const pt=n=>{const s=n.player.lanes.map(rp),u=n.opponent.lanes.map(rp),{finalPlayerValues:r,finalOpponentValues:d}=my(n,s,u);return{...n,player:{...n.player,laneValues:r},opponent:{...n.opponent,laneValues:d}}},Dp=(n,s)=>{const u=[],r=n[s],d=n[s==="player"?"opponent":"player"];if(!r.cannotCompile)for(let o=0;o<3;o++){const f=r.laneValues[o],h=d.laneValues[o];f>=10&&f>h&&u.push(o)}return u};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const vy=(n,s,u,r)=>{const d=r==="player"?"opponent":"player",o=u[r].lanes[s],f=u[d].lanes[s],h=new Set;if(o.filter(_=>_.id!==n.id&&_.isFaceUp).forEach(_=>h.add(_.id)),f.filter(_=>_.isFaceUp).forEach(_=>h.add(_.id)),h.size>0){let _={...u};return _=$(_,r,`Apathy-1: Flip ${h.size} card(s) face-down in the line.`),{newState:jt(h,_)}}return{newState:u}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const gy=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o={...u};return o[d].lanes.flat().filter(h=>h.isFaceUp).length>0&&(o.actionRequired={type:"select_opponent_face_up_card_to_flip",count:1,sourceCardId:n.id,actor:r}),{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Sy=(n,s,u,r)=>{let d={...u};return d[r].lanes.flatMap(f=>f.filter((h,_)=>h.isFaceUp&&_<f.length-1)).length>0&&(d.actionRequired={type:"select_own_face_up_covered_card_to_flip",count:1,optional:!0,sourceCardId:n.id,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const ot=(n,s,u,r)=>{let d={...u};return d[r].hand.length>0&&(d.actionRequired={type:"discard",player:r,count:1,sourceCardId:n.id}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const by=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o=Ne(u,r,3);return o=$(o,r,"Darkness-0: Draw 3 cards."),o[d].lanes.flatMap(h=>h.filter((_,p)=>p<h.length-1)).length>0&&(o=$(o,r,"Darkness-0: Prompts to shift 1 of opponent's covered cards."),o.actionRequired={type:"select_opponent_covered_card_to_shift",sourceCardId:n.id,actor:r}),{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const wy=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o={...u};return o[d].lanes.flat().length>0&&(o.actionRequired={type:"select_opponent_card_to_flip",sourceCardId:n.id,actor:r}),{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Cy=(n,s,u,r)=>{let d={...u};return d[r].lanes[s].filter((f,h,_)=>h<_.length-1).length>0&&(d.actionRequired={type:"select_own_covered_card_in_lane_to_flip",laneIndex:s,sourceCardId:n.id,optional:!0,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Ry=(n,s,u,r)=>{let d={...u};return d[r].hand.length>0&&(d.actionRequired={type:"select_card_from_hand_to_play",disallowedLaneIndex:s,sourceCardId:n.id,isFaceDown:!0,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Ay=(n,s,u,r)=>{let d={...u};return[...d.player.lanes.flat(),...d.opponent.lanes.flat()].filter(f=>!f.isFaceUp).length>0&&(d=$(d,r,"Darkness-4: Prompts to shift 1 face-down card."),d.actionRequired={type:"select_face_down_card_to_shift_for_darkness_4",sourceCardId:n.id,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const xy=(n,s,u,r)=>{const d=["player","opponent"],o=[];for(const S of d){const b=u[S].lanes[s];for(let R=0;R<b.length;R++)o.push({card:b[R],owner:S})}if(o.length===0)return{newState:u};const f=o.reduce((S,b)=>{const R=T=>T.card.isFaceUp?T.card.value:u[T.owner].lanes[s].some(M=>M.isFaceUp&&M.protocol==="Darkness"&&M.value===2)?4:2;return R(b)<R(S)?b:S}),h=`${n.protocol}-${n.value}`,_=f.card.isFaceUp?`${f.card.protocol}-${f.card.value}`:"a face-down card",p=f.owner==="player"?"Player's":"Opponent's";return{newState:$(u,r,`${h} effect triggers, deleting the lowest value covered card (${p} ${_}).`),animationRequests:[{type:"delete",cardId:f.card.id,owner:f.owner}]}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const qy=(n,s,u,r)=>{const d=`${n.protocol}-${n.value}`;let o=$(u,r,`${d} On-Cover: Draw 1 card.`);return o=Ne(o,r,1),[...o.player.lanes.flat(),...o.opponent.lanes.flat()].filter(h=>h.id!==n.id).length>0?(o=$(o,r,`${d} On-Cover: Prompts to flip another card.`),o.actionRequired={type:"select_any_other_card_to_flip",sourceCardId:n.id,draws:0,actor:r},u.turn!==r&&(o._interruptedTurn=u.turn,o.turn=r)):o=$(o,r,`${d} On-Cover: No other cards to flip.`),{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Dy=(n,s,u,r)=>{if(u[r].deck.length>0||u[r].discard.length>0){let d={...u};return d.actionRequired={type:"select_lane_for_life_3_play",sourceCardId:n.id,disallowedLaneIndex:s,actor:r},u.turn!==r&&(d._interruptedTurn=u.turn,d.turn=r),{newState:d}}return{newState:u}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Ty=(n,s,u,r)=>{const d=u.turn,o=`${n.protocol}-${n.value}`;let f=$(u,d,`${o} effect triggers: flipping itself face-down.`);return f=jt(new Set([n.id]),f),{newState:f}},Ey=(n,s,u,r)=>{const d=u.turn,o=`${n.protocol}-${n.value}`;return{newState:$(u,d,`${o} effect triggers: deleting itself.`),animationRequests:[{type:"delete",cardId:n.id,owner:r}]}},Ny=(n,s,u,r)=>{const d=u.turn,o=`${n.protocol}-${n.value}`;return{newState:$(u,d,`${o} effect triggers on cover: deleting itself.`),animationRequests:[{type:"delete",cardId:n.id,owner:r}]}},ac={"Apathy-2":Ty,"Hate-4":xy,"Fire-0":qy,"Life-0":Ey,"Life-3":Dy,"Metal-6":Ny};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Oy=(n,s,u,r)=>{let d={...u};const o={...d[r]},f=[];for(let R=0;R<3;R++)d[r].lanes[R].length>0&&f.push(R);if(f.length===0)return{newState:d};const h=f.map(R=>{const T=d[r].lanes[R];return T.length>0?{card:T[T.length-1],laneIndex:R}:null}).filter(R=>R!==null),{drawnCards:_,remainingDeck:p,newDiscard:m}=pa(o.deck,o.discard,f.length);if(_.length===0)return{newState:d};const S=[...o.lanes];for(let R=0;R<_.length;R++){const T=f[R],D={..._[R],id:Qt(),isFaceUp:!1};S[T]=[...S[T],D]}d[r]={...o,lanes:S,deck:p,discard:m},d=$(d,r,`Life-0: Plays ${_.length} card(s) face-down.`);let b={newState:d};for(const{card:R,laneIndex:T}of h){const D=`${R.protocol}-${R.value}`,M=ac[D];if(M){const X=M(R,T,b.newState,r);if(b.newState=X.newState,X.animationRequests&&(b.animationRequests=[...b.animationRequests||[],...X.animationRequests]),b.newState.actionRequired)break}}return b};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Uy=(n,s,u,r)=>{if([...u.player.lanes.flat(),...u.opponent.lanes.flat()].length>0){let o={...u};return o=$(o,r,"Life-1: Prompts to flip 2 cards."),o.actionRequired={type:"select_any_card_to_flip",count:2,sourceCardId:n.id,actor:r},{newState:o}}return{newState:u}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const jy=(n,s,u,r)=>{let d=Ne(u,r,1);return d=$(d,r,"Life-2: Draw 1 card."),[...d.player.lanes.flat(),...d.opponent.lanes.flat()].filter(f=>!f.isFaceUp).length>0&&(d.actionRequired={type:"select_any_face_down_card_to_flip_optional",sourceCardId:n.id,optional:!0,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const My=(n,s,u,r)=>{if(u[r].lanes[s].length>1){let o=Ne(u,r,1);return o=$(o,r,"Life-4: Card is covering another, draw 1 card."),{newState:o}}return{newState:u}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const zy=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o={...u};const f={...o[d]},h={...o[r]},{drawnCards:_,remainingDeck:p,newDiscard:m}=pa(f.deck,f.discard,1);if(_.length>0){const S={..._[0],id:Qt(),isFaceUp:!0};h.hand=[...h.hand,S],f.deck=p,f.discard=m,o={...o,[r]:h,[d]:f},o=$(o,r,`Love-1: ${r==="player"?"Player":"Opponent"} draws the top card of the opponent's deck.`),o=au(o,r)}return{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Hy=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o={...u};return o=$(o,r,"Love-2: Opponent draws 1 card."),o=Ne(o,d,1),o=qp(o,r),{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const ky=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o={...u};const f={...o[d]},h={...o[r]};if(f.hand.length===0)return o=$(o,r,"Love-3: Opponent has no cards to take."),{newState:o};const _=Math.floor(Math.random()*f.hand.length),p=f.hand.splice(_,1)[0];h.hand.push(p),o={...o,[r]:h,[d]:f};const m=r==="player"?"Player":"Opponent",S=r==="player"?`${p.protocol}-${p.value}`:"a random card";return o=$(o,r,`Love-3: ${m} takes ${S} from the opponent.`),o.actionRequired={type:"select_card_from_hand_to_give",sourceCardId:n.id,sourceEffect:"love_3",actor:r},{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Ly=(n,s,u,r)=>{let d={...u};return d[r].hand.length>0&&(d.actionRequired={type:"select_card_from_hand_to_reveal",sourceCardId:n.id,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Yy=(n,s,u,r)=>{let o=Ne(u,r==="player"?"opponent":"player",2);return o=$(o,r,"Love-6: Opponent draws 2 cards."),{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const By=(n,s,u,r)=>[...u.player.lanes.flat(),...u.opponent.lanes.flat()].length>0?{newState:{...u,actionRequired:{type:"select_any_card_to_flip",count:1,sourceCardId:n.id,actor:r}}}:{newState:u};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Vy=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o={...u};return o=Ne(o,r,2),o=$(o,r,"Metal-1: Draw 2 cards."),o[d].cannotCompile=!0,o=$(o,r,"Metal-1: Opponent cannot compile next turn."),{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Gy=(n,s,u,r)=>{let d=Ne(u,r,1);d=$(d,r,"Metal-3: Draw 1 card.");const o=[0,1,2].filter(h=>h!==s);let f=!1;for(const h of o)if(d.player.lanes[h].length+d.opponent.lanes[h].length>=8){f=!0;break}return f&&(d.actionRequired={type:"select_lane_for_metal_3_delete",sourceCardId:n.id,disallowedLaneIndex:s,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const $y=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o={...u};return o[d].hand.length>0&&(o.actionRequired={type:"discard",player:d,count:1,sourceCardId:n.id}),{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Xy=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o={...u};return o[d].hand.length>0&&(o.actionRequired={type:"discard",player:d,count:1,sourceCardId:n.id}),{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Qy=(n,s,u,r)=>{let d={...u};return d[r].hand.length>0&&(r==="player"?d.actionRequired={type:"plague_2_player_discard",sourceCardId:n.id,actor:r}:d.actionRequired={type:"plague_2_opponent_discard",sourceCardId:n.id,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Fy=(n,s,u,r)=>{const d=[...u.player.lanes.flat(),...u.opponent.lanes.flat()],o=new Set(d.filter(f=>f.id!==n.id&&f.isFaceUp).map(f=>f.id));if(o.size>0){let f={...u};return f=$(f,r,`Plague-3: Flip ${o.size} card(s) face-down.`),{newState:jt(o,u)}}return{newState:u}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Zy=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o=Ne(u,r,2);o=$(o,r,"Psychic-0: Draw 2 cards.");const f=o[d].hand.length;return f>0&&(o.actionRequired={type:"discard",player:d,count:Math.min(2,f),sourceCardId:n.id},o.queuedActions=[...o.queuedActions||[],{type:"reveal_opponent_hand",sourceCardId:n.id,actor:r}]),{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Ky=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o={...u};const f=o[d].hand.length,h={type:"prompt_rearrange_protocols",sourceCardId:n.id,target:d,actor:r};return f>0?(o.actionRequired={type:"discard",player:d,count:Math.min(2,f),sourceCardId:n.id},o.queuedActions=[...o.queuedActions||[],h]):o.actionRequired=h,{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Py=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o={...u};const f=o[d].hand.length,h={type:"select_any_opponent_card_to_shift",sourceCardId:n.id,actor:r};return f>0?(o.actionRequired={type:"discard",player:d,count:1,sourceCardId:n.id},o.queuedActions=[...o.queuedActions||[],h]):o[d].lanes.flat().length>0&&(o.actionRequired=h),{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Jy=(n,s,u,r)=>{let d={...u};return d[r].hand.length>0&&(d=$(d,r,"Speed-0: Play another card."),d.actionRequired={type:"select_card_from_hand_to_play",disallowedLaneIndex:-1,sourceCardId:n.id,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Iy=(n,s,u,r)=>{let d=Ne(u,r,2);return d=$(d,r,"Speed-1: Draw 2 cards."),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Wy=(n,s,u,r)=>u[r].lanes.flat().filter(o=>o.id!==n.id).length>0?{newState:{...u,actionRequired:{type:"select_own_other_card_to_shift",sourceCardId:n.id,actor:r}}}:{newState:u};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const em=(n,s,u,r)=>u[r==="player"?"opponent":"player"].lanes.flat().filter(f=>!f.isFaceUp).length>0?{newState:{...u,actionRequired:{type:"select_opponent_face_down_card_to_shift",sourceCardId:n.id,actor:r}}}:{newState:u};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const tm=(n,s,u,r)=>{let d={...u};return d=qp(d,r),d=Ne(d,r,1),d=$(d,r,"Spirit-0: Draw 1 card."),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const am=(n,s,u,r)=>{let d=Ne(u,r,2);return d=$(d,r,"Spirit-1: Draw 2 cards."),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const lm=(n,s,u,r)=>[...u.player.lanes.flat(),...u.opponent.lanes.flat()].length>0?{newState:{...u,actionRequired:{type:"select_any_card_to_flip_optional",sourceCardId:n.id,optional:!0,actor:r}}}:{newState:u};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const nm=(n,s,u,r)=>{const d=$(u,r,"Spirit-4 prompts to swap protocols.");return d.actionRequired={type:"prompt_swap_protocols",sourceCardId:n.id,actor:r},{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const cm=(n,s,u,r)=>[...u.player.lanes.flat(),...u.opponent.lanes.flat()].filter(f=>f.id!==n.id).length>0?{newState:{...u,actionRequired:{type:"select_cards_to_delete",count:1,sourceCardId:n.id,disallowedIds:[n.id],actor:r}}}:{newState:u};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const rm=(n,s,u,r)=>{let d={...u};const o=d[r],f=Math.min(3,o.hand.length);return f>0?d.actionRequired={type:"select_cards_from_hand_to_discard_for_hate_1",count:f,sourceCardId:n.id,actor:r}:d.actionRequired={type:"select_cards_to_delete",count:2,sourceCardId:n.id,disallowedIds:[n.id],actor:r},{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const om=(n,s,u,r)=>{const o=[r,r==="player"?"opponent":"player"],f=[];let h=u;for(const _ of o){const p=u[_].lanes.flat();if(p.length>0){const m=p.reduce((T,D)=>{const M=T.isFaceUp?T.value:2;return(D.isFaceUp?D.value:2)>M?D:T});f.push({type:"delete",cardId:m.id,owner:_});const S=_===r?"Your":"Opponent's",b=m.isFaceUp?`${m.protocol}-${m.value}`:"a face-down card",R=`Hate-2: Deleting ${S} highest value card (${b}).`;h=$(h,r,R)}}return{newState:h,animationRequests:f}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const im=(n,s,u,r)=>{const f=[0,1,2].filter(h=>h!==s).filter(h=>u.player.lanes[h].length>0||u.opponent.lanes[h].length>0).length;return f>0?{newState:{...u,actionRequired:{type:"select_card_from_other_lanes_to_delete",sourceCardId:n.id,disallowedLaneIndex:s,lanesSelected:[],count:f,actor:r}}}:{newState:u}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const um=(n,s,u,r)=>({newState:{...u,actionRequired:{type:"select_lane_for_death_2",sourceCardId:n.id,actor:r}}});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const sm=(n,s,u,r)=>[...u.player.lanes.flat(),...u.opponent.lanes.flat()].filter(o=>!o.isFaceUp).length>0?{newState:{...u,actionRequired:{type:"select_face_down_card_to_delete",sourceCardId:n.id,actor:r}}}:{newState:u};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const dm=(n,s,u,r)=>[...u.player.lanes.flat(),...u.opponent.lanes.flat()].filter(f=>f.isFaceUp&&(f.value===0||f.value===1)).length>0?{newState:{...u,actionRequired:{type:"select_low_value_card_to_delete",sourceCardId:n.id,actor:r}}}:{newState:$(u,r,"Death-4: No valid targets (face-up card with value 0 or 1) found.")};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const fm=(n,s,u,r)=>{if([...u.player.lanes.flat(),...u.opponent.lanes.flat()].filter(o=>o.id!==n.id).length>0)return{newState:{...u,actionRequired:{type:"select_any_other_card_to_flip",sourceCardId:n.id,draws:2,actor:r}}};{let o=$(u,r,"Fire-0: No other cards to flip, drawing 2 cards.");return o=Ne(o,r,2),{newState:o}}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const pm=(n,s,u,r)=>{let d={...u};return d[r].hand.length>0&&(d.actionRequired={type:"discard",player:r,count:1,sourceCardId:n.id,sourceEffect:"fire_1"}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const hm=(n,s,u,r)=>{let d={...u};return d[r].hand.length>0&&(d.actionRequired={type:"discard",player:r,count:1,sourceCardId:n.id,sourceEffect:"fire_2"}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const _m=(n,s,u,r)=>u[r].hand.length>0?{newState:{...u,actionRequired:{type:"select_cards_from_hand_to_discard_for_fire_4",sourceCardId:n.id,actor:r}}}:{newState:u};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const ym=(n,s,u,r)=>{const d=r==="player"?"opponent":"player",o=u[r].lanes[s].length,f=u[d].lanes[s].length,h=o+f,_=Math.floor(h/2);if(_===0)return{newState:u};let p={...u};const m={...p[r]},{drawnCards:S,remainingDeck:b,newDiscard:R}=pa(m.deck,m.discard,_);if(S.length===0)return{newState:p};const T=S.map(X=>({...X,id:Qt(),isFaceUp:!1})),D=[...m.lanes[s]];D.splice(D.length-1,0,...T);const M=[...m.lanes];return M[s]=D,p[r]={...m,lanes:M,deck:b,discard:R},p=$(p,r,`Gravity-0: Plays ${S.length} card(s) face-down under itself.`),{newState:p}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const mm=(n,s,u,r)=>{let d=Ne(u,r,2);return d=$(d,r,"Gravity-1: Draw 2 cards."),[...d.player.lanes.flat(),...d.opponent.lanes.flat()].length>0&&(d.actionRequired={type:"select_card_to_shift_for_gravity_1",sourceCardId:n.id,sourceLaneIndex:s,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const vm=(n,s,u,r)=>{let d={...u};return[...d.player.lanes.flat(),...d.opponent.lanes.flat()].length>0&&(d.actionRequired={type:"select_card_to_flip_and_shift_for_gravity_2",sourceCardId:n.id,targetLaneIndex:s,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const gm=(n,s,u,r)=>{let d={...u};const o=[];return d.player.lanes.forEach((f,h)=>{h!==s&&f.forEach(_=>{_.isFaceUp||o.push(_)})}),d.opponent.lanes.forEach((f,h)=>{h!==s&&f.forEach(_=>{_.isFaceUp||o.push(_)})}),o.length>0?d.actionRequired={type:"select_face_down_card_to_shift_for_gravity_4",sourceCardId:n.id,targetLaneIndex:s,actor:r}:d=$(d,r,"Gravity-4: No valid face-down cards in other lines to shift."),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Sm=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o={...u};const f={...o[d]},h=f.lanes[s],_=h.length>0?h[h.length-1]:null,{drawnCards:p,remainingDeck:m,newDiscard:S}=pa(f.deck,f.discard,1);if(p.length>0){const b={...p[0],id:Qt(),isFaceUp:!1},R=[...f.lanes];R[s]=[...R[s],b],o[d]={...f,lanes:R,deck:m,discard:S};const T=o[d].protocols[s];o=$(o,r,`Gravity-6: Opponent plays the top card of their deck face-down into Protocol ${T}.`);let D={newState:o};if(_){const M=`${_.protocol}-${_.value}`,X=ac[M];if(X){const W=X(_,s,D.newState,d);D.newState=W.newState,W.animationRequests&&(D.animationRequests=[...D.animationRequests||[],...W.animationRequests])}}return D}return{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const bm=(n,s,u,r)=>[...u.player.lanes.flat(),...u.opponent.lanes.flat()].length>0?{newState:{...u,actionRequired:{type:"select_card_to_flip_for_light_0",sourceCardId:n.id,actor:r}}}:{newState:u};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const wm=(n,s,u,r)=>{let d=Ne(u,r,2);return d=$(d,r,"Light-2: Draw 2 cards."),[...d.player.lanes.flat(),...d.opponent.lanes.flat()].filter(f=>!f.isFaceUp).length>0&&(d.actionRequired={type:"select_face_down_card_to_reveal_for_light_2",sourceCardId:n.id,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Cm=(n,s,u,r)=>{let d={...u};return[...d[r].lanes[s],...d[r==="player"?"opponent":"player"].lanes[s]].filter(f=>!f.isFaceUp).length>0&&(d.actionRequired={type:"select_lane_to_shift_cards_for_light_3",sourceCardId:n.id,sourceLaneIndex:s,actor:r}),{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Rm=(n,s,u,r)=>{const d=r==="player"?"opponent":"player";let o={...u};return{...o[d]}.hand.length>0&&(o.actionRequired={type:"reveal_opponent_hand",sourceCardId:n.id,actor:r}),{newState:o}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Am=(n,s,u,r)=>[...u.player.lanes.flat(),...u.opponent.lanes.flat()].filter(o=>o.id!==n.id).length>0?{newState:{...u,actionRequired:{type:"select_any_other_card_to_flip_for_water_0",sourceCardId:n.id,actor:r}}}:{newState:jt(new Set([n.id]),u)};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const xm=(n,s,u,r)=>{let d={...u};const o={...d[r]},f=[0,1,2].filter(R=>R!==s);if(f.length===0)return{newState:d};const h=f.map(R=>{const T=d[r].lanes[R];return T.length>0?{card:T[T.length-1],laneIndex:R}:null}).filter(R=>R!==null),{drawnCards:_,remainingDeck:p,newDiscard:m}=pa(o.deck,o.discard,f.length);if(_.length===0)return{newState:d};const S=[...o.lanes];for(let R=0;R<_.length;R++){const T=f[R],D={..._[R],id:Qt(),isFaceUp:!1};S[T]=[...S[T],D]}d[r]={...o,lanes:S,deck:p,discard:m},d=$(d,r,`Water-1: Plays ${_.length} card(s) face-down in other lines.`);let b={newState:d};for(const{card:R,laneIndex:T}of h){const D=`${R.protocol}-${R.value}`,M=ac[D];if(M){const X=M(R,T,b.newState,r);if(b.newState=X.newState,X.animationRequests&&(b.animationRequests=[...b.animationRequests||[],...X.animationRequests]),b.newState.actionRequired)break}}return b};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const qm=(n,s,u,r)=>{let d=Ne(u,r,2);return d=$(d,r,"Water-2: Draw 2 cards."),d.actionRequired={type:"prompt_rearrange_protocols",sourceCardId:n.id,target:r,actor:r},{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Dm=(n,s,u,r)=>({newState:{...u,actionRequired:{type:"select_lane_for_water_3",sourceCardId:n.id,actor:r}}});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Tm=(n,s,u,r)=>({newState:{...u,actionRequired:{type:"select_own_card_to_return_for_water_4",sourceCardId:n.id,actor:r}}});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Em={"Apathy-1":vy,"Apathy-3":gy,"Apathy-4":Sy,"Apathy-5":ot,"Darkness-0":by,"Darkness-1":wy,"Darkness-2":Cy,"Darkness-3":Ry,"Darkness-4":Ay,"Darkness-5":ot,"Death-0":im,"Death-2":um,"Death-3":sm,"Death-4":dm,"Death-5":ot,"Fire-0":fm,"Fire-1":pm,"Fire-2":hm,"Fire-4":_m,"Fire-5":ot,"Gravity-0":ym,"Gravity-1":mm,"Gravity-2":vm,"Gravity-4":gm,"Gravity-5":ot,"Gravity-6":Sm,"Hate-0":cm,"Hate-1":rm,"Hate-2":om,"Hate-5":ot,"Life-0":Oy,"Life-1":Uy,"Life-2":jy,"Life-4":My,"Life-5":ot,"Light-0":bm,"Light-2":wm,"Light-3":Cm,"Light-4":Rm,"Light-5":ot,"Love-1":zy,"Love-2":Hy,"Love-3":ky,"Love-4":Ly,"Love-5":ot,"Love-6":Yy,"Metal-0":By,"Metal-1":Vy,"Metal-3":Gy,"Metal-5":ot,"Plague-0":$y,"Plague-1":Xy,"Plague-2":Qy,"Plague-3":Fy,"Plague-5":ot,"Psychic-0":Zy,"Psychic-2":Ky,"Psychic-3":Py,"Psychic-5":ot,"Speed-0":Jy,"Speed-1":Iy,"Speed-3":Wy,"Speed-4":em,"Speed-5":ot,"Spirit-0":tm,"Spirit-1":am,"Spirit-2":lm,"Spirit-4":nm,"Spirit-5":ot,"Water-0":Am,"Water-1":xm,"Water-2":qm,"Water-3":Dm,"Water-4":Tm,"Water-5":ot};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Nm=(n,s)=>({newState:{...s,actionRequired:{type:"prompt_death_1_effect",sourceCardId:n.id,optional:!0,actor:s.turn}}});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Om=(n,s)=>{const u=s.turn,r=`${n.protocol}-${n.value}`;let d=$(s,u,`${r} Start Phase: Flipping itself.`);return d=jt(new Set([n.id]),d),d.animationState={type:"flipCard",cardId:n.id},{newState:d}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Um=(n,s)=>({newState:{...s,actionRequired:{type:"prompt_spirit_1_start",sourceCardId:n.id,actor:s.turn}}});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const jm={"Death-1":Nm,"Psychic-1":Om,"Spirit-1":Um};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Mm=(n,s)=>{const u=s.turn;return s[u==="player"?"opponent":"player"].lanes.flat().filter(o=>!o.isFaceUp).length>0?{newState:{...s,actionRequired:{type:"plague_4_opponent_delete",sourceCardId:n.id,actor:u}}}:{newState:{...s,actionRequired:{type:"plague_4_player_flip_optional",sourceCardId:n.id,optional:!0,actor:u}}}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const zm=(n,s)=>{let u=Ne(s,s.turn,1);return u=$(u,s.turn,"Light-1 End Phase: Draw 1 card."),{newState:u}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Hm=(n,s)=>{const u=s.turn;return s[u].hand.length>0?{newState:{...s,actionRequired:{type:"prompt_fire_3_discard",sourceCardId:n.id,optional:!0,actor:u}}}:{newState:s}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const km=(n,s)=>{const u=s.turn;return s[u].lanes.flat().length>0?{newState:{...s,actionRequired:{type:"prompt_shift_for_speed_3",sourceCardId:n.id,optional:!0,actor:u}}}:{newState:s}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Lm=(n,s)=>{const u=s.turn;return s[u].hand.length>0?{newState:{...s,actionRequired:{type:"prompt_give_card_for_love_1",sourceCardId:n.id,optional:!0,actor:u}}}:{newState:s}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Ym=(n,s)=>{const u=s.turn;return s[u==="player"?"opponent":"player"].lanes.flat().length>0?{newState:{...s,actionRequired:{type:"prompt_return_for_psychic_4",sourceCardId:n.id,optional:!0,actor:u}}}:{newState:s}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Bm={"Plague-4":Mm,"Light-1":zm,"Fire-3":Hm,"Speed-3":km,"Love-1":Lm,"Psychic-4":Ym};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function Cr(n,s,u,r){const d=u[r].lanes[s];if(!d.find(b=>b.id===n.id))return{newState:u};if(!(d.length>0&&d[d.length-1].id===n.id))return{newState:u};const h=r==="player"?"opponent":"player",_=u[r].lanes[s].some(b=>b.isFaceUp&&b.protocol==="Apathy"&&b.value===2&&b.id!==n.id),p=u[h].lanes[s].some(b=>b.isFaceUp&&b.protocol==="Apathy"&&b.value===2);if(_||p)return{newState:u};const m=`${n.protocol}-${n.value}`,S=Em[m];if(S){const b=S(n,s,u,r),R=pt(b.newState);return{...b,newState:R}}return{newState:u}}function Vm(n,s,u){if(!n.isFaceUp)return{newState:u};const r=["player","opponent"];let d=null;for(const h of r)if(u[h].lanes[s].some(_=>_.id===n.id)){d=h;break}if(!d)return console.error("Could not find owner for onCover effect card",n),{newState:u};const o=`${n.protocol}-${n.value}`,f=ac[o];if(f){const h=f(n,s,u,d),_=pt(h.newState);return{...h,newState:_}}return{newState:u}}function Tp(n){const s=n.turn;let u={...n};const r=u.processedStartEffectIds||[],d=u[s].lanes.map(o=>o.length>0?o[o.length-1]:null).filter(o=>o!==null&&o.isFaceUp&&(o.top.includes("'emphasis'>Start:")||o.bottom.includes("'emphasis'>Start:"))&&!r.includes(o.id));for(const o of d){const f=`${o.protocol}-${o.value}`,h=jm[f];if(h){const _=h(o,u);if(u=pt(_.newState),u.processedStartEffectIds=[...u.processedStartEffectIds||[],o.id],u.actionRequired)return{newState:u}}}return{newState:u}}function Gm(n){const s=n.turn;let u={...n};const r=u.processedEndEffectIds||[],d=u[s].lanes.map(o=>o.length>0?o[o.length-1]:null).filter(o=>o!==null&&o.isFaceUp&&o.bottom.includes("'emphasis'>End:")&&!r.includes(o.id));for(const o of d){const f=`${o.protocol}-${o.value}`,h=Bm[f];if(h){const _=h(o,u);if(u=pt(_.newState),u.processedEndEffectIds=[...u.processedEndEffectIds||[],o.id],u.actionRequired)return{newState:u}}}return{newState:u}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function he(n,s){if(!s)return null;for(const u of["player","opponent"])for(const r of n[u].lanes){const d=r.find(o=>o.id===s);if(d)return{card:d,owner:u}}return null}function op(n,s,u,r){var h;if(!u||!r)return n;let d={...n};const o=(h=he(d,r))==null?void 0:h.card,f=o?`${o.protocol}-${o.value}`:"A card effect";switch(u){case"fire_1":d=$(d,s,`${f}: Discard successful. Prompting to delete 1 card.`),d.actionRequired={type:"select_cards_to_delete",count:1,sourceCardId:r,disallowedIds:[r],actor:s};break;case"fire_2":d=$(d,s,`${f}: Discard successful. Prompting to return 1 card.`),d.actionRequired={type:"select_card_to_return",sourceCardId:r,actor:s};break;case"fire_3":d=$(d,s,`${f}: Discard successful. Prompting to flip 1 card.`),d.actionRequired={type:"select_card_to_flip_for_fire_3",sourceCardId:r,actor:s};break}return d}function Xt(n,s,u=null){const r=he(n,s);if(!r)return n;const{card:d,owner:o}=r,f=n.turn,h=f==="player"?"Player":"Opponent",_=o==="player"?"Player's":"Opponent's",p=d.isFaceUp?"face-down":"face-up",m=d.isFaceUp?`${d.protocol}-${d.value}`:"a face-down card";let S=$(n,f,`${h} flips ${_} ${m} ${p}.`);return S=jt(new Set([s]),S),S[f].stats.cardsFlipped++,S.animationState={type:"flipCard",cardId:s},S.actionRequired=u,S}function Ii(n,s){const u=he(n,s);if(!u)return n;const{card:r,owner:d}=u;let o={...n};const f={...o[d]};f.lanes=f.lanes.map(S=>S.filter(b=>b.id!==s)),f.hand=[...f.hand,{...r,isFaceUp:!0,isRevealed:!1}],o[d]=f;const h=o.turn,_=h==="player"?"Player":"Opponent",p=d==="player"?"Player's":"Opponent's",m=`${r.protocol}-${r.value}`;return o=$(o,h,`${_} returns ${p} ${m} to their hand.`),o.actionRequired=null,pt(o)}function Jl(n,s,u,r,d){let o={...n};const f={...o[u]},h=f.lanes.flat().find(T=>T.id===s);if(!h)return n;let _=-1;if(f.lanes=f.lanes.map((T,D)=>T.some(M=>M.id===s)?(_=D,T.filter(M=>M.id!==s)):T),_===-1)return n;const p=f.lanes[r].length>0?f.lanes[r][f.lanes[r].length-1]:null;f.lanes[r]=[...f.lanes[r],h],o[u]=f;const m=d==="player"?"Player":"Opponent",S=u==="player"?"Player's":"Opponent's",b=h.isFaceUp?`${h.protocol}-${h.value}`:"a card",R=o[u].protocols[r];if(o=$(o,d,`${m} shifts ${S} ${b} to Protocol ${R}.`),o[d].stats.cardsShifted++,o.actionRequired=null,o=pt(o),p){const T=`${p.protocol}-${p.value}`,D=ac[T];D&&(o=D(p,r,o,u).newState)}return o}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const $m=(n,s)=>{if(n[s].lanes.flat().some(d=>d.isFaceUp&&d.protocol==="Speed"&&d.value===1)){let d={...n};return d=$(d,s,"Speed-1 triggers after clearing cache: Draw 1 card."),d=Ne(d,s,1),d}return n},Il=n=>{if(n.winner)return n;const s=n.turn;let u={...n};switch(n.phase){case"start":return u=Tp(u).newState,u.actionRequired?u:{...u,phase:"control"};case"control":return{...u,phase:"compile"};case"compile":{const r=Dp(u,s);return r.length>0?{...u,compilableLanes:r}:{...u,phase:"action",compilableLanes:[]}}case"action":return{...u,phase:"hand_limit"};case"hand_limit":{const r=u[s];return r.lanes.some(f=>f.length>0&&f[f.length-1].isFaceUp&&f[f.length-1].protocol==="Spirit"&&f[f.length-1].value===0)?{...$(u,s,"Spirit-0: Skipping Check Cache phase."),phase:"end"}:r.hand.length>5?{...u,actionRequired:{type:"discard",player:s,count:r.hand.length-5}}:{...$m(u,s),phase:"end"}}case"end":{const r={...u};u=Gm(u).newState;const d=r.actionRequired,o=u.actionRequired;if(o&&o!==d)return u;const f=s==="player"?"opponent":"player",h={...u[s],cannotCompile:!1};return{...u,[s]:h,turn:f,phase:"start",processedStartEffectIds:[],processedEndEffectIds:[]}}}return n},Ep=n=>{if(n.winner||n.actionRequired)return n;if(n._interruptedTurn){const r=n._interruptedTurn;let d={...n};delete d._interruptedTurn,d.turn=r,n=d}if(n.queuedActions&&n.queuedActions.length>0){let r={...n},d=[...r.queuedActions];for(;d.length>0;){const o=d[0];if(o.type==="reveal_opponent_hand"){d.shift();const f=r.turn==="player"?"opponent":"player",h={...r[f]};if(h.hand.length>0){h.hand=h.hand.map(m=>({...m,isRevealed:!0})),r[f]=h;const _=he(r,o.sourceCardId),p=_?`${_.card.protocol}-${_.card.value}`:"A card effect";r=$(r,r.turn,`${p}: Opponent reveals their hand.`)}else{const _=he(r,o.sourceCardId),p=_?`${_.card.protocol}-${_.card.value}`:"A card effect";r=$(r,r.turn,`${p}: Opponent has no cards to reveal.`)}}else return r.actionRequired=d.shift(),r.queuedActions=d,r}n={...r,queuedActions:[],actionRequired:null}}if(n.queuedEffect){const{card:r,laneIndex:d}=n.queuedEffect,o={...n,queuedEffect:void 0},f=he(o,r.id);if(f){const{card:h,owner:_}=f,{newState:p}=Cr(h,d,o,_);if(p.actionRequired)return p;n=p}else console.error("Queued effect card not found on board!")}let s={...n,phase:"hand_limit",compilableLanes:[]};const u=n.turn;for(;s.turn===u&&!s.winner;){const r=s.actionRequired,d=s.phase;s=Il(s);const o=s.actionRequired;if(o&&o!==r)break;if(s.phase===d&&s.turn===u){console.error("Game is stuck in a phase loop:",s.phase);break}}return s},lu=n=>{if(n.winner)return n;let s={...n};const u=s.turn;for(;s.turn===u&&!s.actionRequired&&!s.winner;){const r=s.phase;if(r==="action")break;if(r==="compile"){const o=Dp(s,u);if(o.length>0){s={...s,compilableLanes:o};break}}const d=s.phase;if(s=Il(s),d===s.phase&&!s.actionRequired){console.error("Game is stuck in an automatic phase loop:",d);break}}return s},Sr=n=>{let s={...n,actionRequired:null};const u=Tp(s).newState;if(u.actionRequired)return u;let r=u;return r=Il({...r,phase:"control"}),r.actionRequired||(r=Il(r)),r},Np=n=>{if(n.winner)return n;let s={...n,phase:"start"};return s=Il(s),s.actionRequired?s:lu(s)},ip=Object.freeze(Object.defineProperty({__proto__:null,advancePhase:Il,continueTurnAfterStartPhaseAction:Sr,continueTurnProgression:lu,processEndOfAction:Ep,processStartOfTurn:Np},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Ya=(n,s)=>{if(n[s].lanes.flat().some(d=>d.isFaceUp&&d.protocol==="Hate"&&d.value===3)){let d={...n};return d=$(d,s,"Hate-3 triggers: Draw 1 card."),d=Ne(d,s,1),d}return n};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const cl=(n,s)=>{const u=he(n,s);if(!u)return{newState:n};const{card:r,owner:d}=u,o=n[d].lanes.findIndex(f=>f.some(h=>h.id===r.id));return o===-1?{newState:n}:Cr(r,o,n,d)};function Xm(n,s,u){const r=he(n,s);if(r&&r.card.protocol==="Metal"&&r.card.value===6){let d=$(n,n.turn,"Metal-6 effect triggers on flip: deleting itself.");d[n.turn].stats.cardsDeleted++;const o=(f,h)=>{let _=Ya(f,f.turn);if(u&&"count"in u&&u.count>1){const p=u.count-1;return _.actionRequired={...u,count:p},_}if(_.actionRequired=null,_.queuedActions&&_.queuedActions.length>0){const p=[..._.queuedActions],m=p.shift();return{..._,actionRequired:m,queuedActions:p}}return h(_)};return{nextState:{...n,actionRequired:null},requiresAnimation:{animationRequests:[{type:"delete",cardId:s,owner:r.owner}],onCompleteCallback:o},requiresTurnEnd:!1}}return null}const Op=(n,s)=>{if(!n.actionRequired)return{nextState:n};let u={...n},r=!0,d=null;const o=Xm(n,s,n.actionRequired);if(o)return o;switch(n.actionRequired.type){case"select_opponent_face_up_card_to_flip":case"select_own_face_up_covered_card_to_flip":case"select_own_covered_card_in_lane_to_flip":case"select_any_card_to_flip_optional":case"select_any_face_down_card_to_flip_optional":case"select_card_to_flip_for_fire_3":{const f=he(n,s);if(u=Xt(n,s),f&&!f.card.isFaceUp){const h=cl(u,s);u=h.newState,h.animationRequests&&(d={animationRequests:h.animationRequests,onCompleteCallback:(_,p)=>_.actionRequired||_.queuedActions&&_.queuedActions.length>0?_:p(_)})}(u.actionRequired||u.queuedActions&&u.queuedActions.length>0)&&(r=!1);break}case"select_opponent_card_to_flip":{const{actor:f}=n.actionRequired,h=he(n,s),_={type:"shift_flipped_card_optional",cardId:s,sourceCardId:n.actionRequired.sourceCardId,optional:!0,actor:f};if(u=Xt(n,s,_),h&&!h.card.isFaceUp){const p=cl(u,s);u=p.newState,p.animationRequests&&(d={animationRequests:p.animationRequests,onCompleteCallback:m=>m})}r=!1;break}case"shift_flipped_card_optional":case"select_opponent_covered_card_to_shift":case"select_face_down_card_to_shift_for_darkness_4":case"select_any_opponent_card_to_shift":{const f=he(n,s);if(f){const{owner:h}=f;let _=-1;for(let p=0;p<n[h].lanes.length;p++)if(n[h].lanes[p].some(m=>m.id===s)){_=p;break}if(_!==-1){const p={type:"select_lane_for_shift",cardToShiftId:s,cardOwner:h,originalLaneIndex:_,sourceCardId:n.actionRequired.sourceCardId,actor:n.turn};u.actionRequired=p}}r=!1;break}case"select_own_other_card_to_shift":{const f=he(n,s);if(f){const{owner:h}=f;let _=-1;for(let p=0;p<n[h].lanes.length;p++)if(n[h].lanes[p].some(m=>m.id===s)){_=p;break}if(_!==-1){const p={type:"select_lane_for_shift",cardToShiftId:s,cardOwner:h,originalLaneIndex:_,sourceCardId:n.actionRequired.sourceCardId,actor:n.turn};u.actionRequired=p}}r=!1;break}case"select_opponent_face_down_card_to_shift":{const f=he(n,s);if(f){const{owner:h}=f;let _=-1;for(let p=0;p<n[h].lanes.length;p++)if(n[h].lanes[p].some(m=>m.id===s)){_=p;break}if(_!==-1){const p={type:"select_lane_for_shift",cardToShiftId:s,cardOwner:h,originalLaneIndex:_,sourceCardId:n.actionRequired.sourceCardId,actor:n.turn};u.actionRequired=p}}r=!1;break}case"select_own_card_to_shift_for_speed_3":{const f=he(n,s);if(f){const{owner:h}=f;let _=-1;for(let p=0;p<n[h].lanes.length;p++)if(n[h].lanes[p].some(m=>m.id===s)){_=p;break}if(_!==-1){const p={type:"select_lane_for_shift",cardToShiftId:s,cardOwner:h,originalLaneIndex:_,sourceCardId:n.actionRequired.sourceCardId,actor:n.turn,sourceEffect:"speed_3_end"};u.actionRequired=p}}r=!1;break}case"select_card_to_delete_for_death_1":{const{sourceCardId:f,actor:h}=n.actionRequired,_=he(n,s),p=he(n,f);if(!_||!p)return{nextState:n};const m=h==="player"?"Player":"Opponent",S=_.owner==="player"?"Player's":"Opponent's",b=_.card.isFaceUp?`${_.card.protocol}-${_.card.value}`:"a face-down card";u=$(u,h,`Death-1: ${m} deletes ${S} ${b} and the Death-1 card itself.`),u[h].stats.cardsDeleted+=2,u.actionRequired=null,d={animationRequests:[{type:"delete",cardId:s,owner:_.owner},{type:"delete",cardId:f,owner:p.owner}],onCompleteCallback:(R,T)=>{let D=Ya(R,h);if(D=Ya(D,h),D.actionRequired=null,D.queuedActions&&D.queuedActions.length>0){const M=[...D.queuedActions],X=M.shift();return{...D,actionRequired:X,queuedActions:M}}return T(D)}},r=!1;break}case"select_cards_to_delete":case"select_face_down_card_to_delete":case"select_low_value_card_to_delete":{const f=he(n,s);if(!f)return{nextState:n};const h=n.turn==="player"?"Player":"Opponent",_=f.owner==="player"?"Player's":"Opponent's",p=f.card.isFaceUp?`${f.card.protocol}-${f.card.value}`:"a face-down card",m=he(n,n.actionRequired.sourceCardId),S=m?`${m.card.protocol}-${m.card.value}`:"a card effect";u=$(u,n.turn,`${S}: ${h} deletes ${_} ${p}.`),u[n.turn].stats.cardsDeleted++,u.actionRequired=null,d={animationRequests:[{type:"delete",cardId:s,owner:f.owner}],onCompleteCallback:(b,R)=>{var M;const T=n.turn;let D=Ya(b,T);if(((M=n.actionRequired)==null?void 0:M.type)==="select_cards_to_delete"){const X=n.actionRequired.count-1;if(X>0)return D.actionRequired={...n.actionRequired,count:X,disallowedIds:[...n.actionRequired.disallowedIds,s]},D}if(D.actionRequired=null,D.queuedActions&&D.queuedActions.length>0){const X=[...D.queuedActions],W=X.shift();return{...D,actionRequired:W,queuedActions:X}}return R(D)}},r=!1;break}case"select_card_from_other_lanes_to_delete":{const f=he(n,s);if(!f)return{nextState:n};let h=-1;for(let R=0;R<n[f.owner].lanes.length;R++)if(n[f.owner].lanes[R].some(T=>T.id===s)){h=R;break}if(h===-1)return{nextState:n};const _=n.turn==="player"?"Player":"Opponent",p=f.owner==="player"?"Player's":"Opponent's",m=f.card.isFaceUp?`${f.card.protocol}-${f.card.value}`:"a face-down card",S=he(n,n.actionRequired.sourceCardId),b=S?`${S.card.protocol}-${S.card.value}`:"a card effect";u=$(u,n.turn,`${b}: ${_} deletes ${p} ${m}.`),u[n.turn].stats.cardsDeleted++,u.actionRequired=null,d={animationRequests:[{type:"delete",cardId:s,owner:f.owner}],onCompleteCallback:(R,T)=>{let D=Ya(R,n.turn);const M=n.actionRequired;if((M==null?void 0:M.type)!=="select_card_from_other_lanes_to_delete")return T(D);const X=M.count-1;if(X>0)return{...D,actionRequired:{...M,lanesSelected:[...M.lanesSelected,h],count:X}};{let W={...D,actionRequired:null};if(W.queuedActions&&W.queuedActions.length>0){const L=[...W.queuedActions],J=L.shift();return{...W,actionRequired:J,queuedActions:L}}return T(W)}}},r=!1;break}case"plague_4_opponent_delete":{const{actor:f}=n.actionRequired,h=he(n,s);if(!h)return{nextState:n};const _=f==="player"?"opponent":"player";if(h.owner===_&&!h.card.isFaceUp){const p=_==="player"?"Player":"Opponent",m=`${h.card.protocol}-${h.card.value}`;u=$(u,_,`Plague-4: ${p} deletes their face-down card (${m}).`),u[_].stats.cardsDeleted++,u.actionRequired=null,d={animationRequests:[{type:"delete",cardId:s,owner:h.owner}],onCompleteCallback:(S,b)=>({...S,actionRequired:{type:"plague_4_player_flip_optional",sourceCardId:n.actionRequired.sourceCardId,optional:!0,actor:f}})}}r=!1;break}case"select_any_other_card_to_flip":{const{draws:f,sourceCardId:h}=n.actionRequired,_=he(n,s);if(u=Xt(n,s),_&&!_.card.isFaceUp){const p=cl(u,s);u=p.newState,p.animationRequests&&(d={animationRequests:p.animationRequests,onCompleteCallback:(m,S)=>m.actionRequired||m.queuedActions&&m.queuedActions.length>0?m:S(m)})}if(f>0){const p=he(u,h),m=p?`${p.card.protocol}-${p.card.value}`:"a card effect";u=$(u,u.turn,`${m}: Draw ${f} card(s).`),u=Ne(u,u.turn,f)}(u.actionRequired||u.queuedActions&&u.queuedActions.length>0)&&(r=!1);break}case"select_card_to_return":case"select_opponent_card_to_return":{if(u=Ii(n,s),n.actionRequired.type==="select_opponent_card_to_return"&&n.actionRequired.sourceCardId){const f=n.actionRequired.sourceCardId;u=$(u,n.turn,"Psychic-4: Flipping itself."),u=jt(new Set([f]),u),u.animationState={type:"flipCard",cardId:f}}break}case"select_card_to_shift_for_gravity_1":{const{sourceLaneIndex:f,sourceCardId:h,actor:_}=n.actionRequired,p=he(n,s);if(!p)return{nextState:n};let m=-1;for(let S=0;S<n[p.owner].lanes.length;S++)if(n[p.owner].lanes[S].some(b=>b.id===s)){m=S;break}m===f?(u.actionRequired={type:"select_lane_for_shift",cardToShiftId:s,cardOwner:p.owner,originalLaneIndex:f,sourceCardId:h,actor:_},r=!1):u=Jl(n,s,p.owner,f,n.turn);break}case"select_card_to_flip_and_shift_for_gravity_2":{const{targetLaneIndex:f,actor:h}=n.actionRequired,_=he(n,s);if(!_)return{nextState:n};const{card:p,owner:m}=_,S=h==="player"?"Player":"Opponent",b=m==="player"?"Player's":"Opponent's",R=p.isFaceUp?"face-down":"face-up",T=p.isFaceUp?`${p.protocol}-${p.value}`:"a face-down card";let D=$(n,h,`${S} flips ${b} ${T} ${R}.`);D[h].stats.cardsFlipped++;let M=jt(new Set([s]),D);M.animationState={type:"flipCard",cardId:s},u=Jl(M,s,_.owner,f,h),u.actionRequired=null;break}case"select_face_down_card_to_shift_for_gravity_4":{const{targetLaneIndex:f,actor:h}=n.actionRequired,_=he(n,s);if(!_||_.card.isFaceUp)return{nextState:n};u=Jl(n,s,_.owner,f,h);break}case"select_any_card_to_flip":{const f=n.actionRequired.count-1;let h=null;f>0&&(h={...n.actionRequired,count:f});const _=he(n,s);if(u=Xt(n,s,h),_&&!_.card.isFaceUp){const p=cl(u,s);u=p.newState,p.animationRequests&&(d={animationRequests:p.animationRequests,onCompleteCallback:(m,S)=>m.actionRequired?m:S(m)})}u.actionRequired||u.queuedActions&&u.queuedActions.length>0?r=!1:r=f<=0;break}case"select_card_to_flip_for_light_0":{const f=he(n,s);if(!f)return{nextState:n};let h=Xt(n,s);if(!f.card.isFaceUp){const _=cl(h,s);h=_.newState,_.animationRequests&&(d={animationRequests:_.animationRequests,onCompleteCallback:(p,m)=>{const S=he(p,s).card,b=S.isFaceUp?S.value:2,R=Ne(p,p.turn,b),T=$(R,p.turn,`Light-0: Drawing ${b} card(s).`);return m(T)}})}if(d)u=h;else{const _=he(h,s).card,p=_.isFaceUp?_.value:2;u=Ne(h,n.turn,p),u=$(u,n.turn,`Light-0: Drawing ${p} card(s).`)}(u.actionRequired||u.queuedActions&&u.queuedActions.length>0)&&(r=!1);break}case"select_face_down_card_to_reveal_for_light_2":{const{actor:f}=n.actionRequired,h=he(n,s),_={type:"prompt_shift_or_flip_for_light_2",sourceCardId:n.actionRequired.sourceCardId,revealedCardId:s,optional:!0,actor:f};if(u=Xt(n,s,_),h&&!h.card.isFaceUp){const p=cl(u,s);u=p.newState,p.animationRequests&&(d={animationRequests:p.animationRequests,onCompleteCallback:m=>m})}r=!1;break}case"select_any_other_card_to_flip_for_water_0":{const f=he(n,s);let h=Xt(n,s);if(f&&!f.card.isFaceUp){const p=cl(h,s);h=p.newState,p.animationRequests}const _=n.actionRequired.sourceCardId;u=Xt(h,_),u=$(u,n.turn,"Water-0: Flips itself."),(u.actionRequired||u.queuedActions&&u.queuedActions.length>0)&&(r=!1);break}case"select_own_card_to_return_for_water_4":{const f=he(n,s);f&&f.owner===n.turn&&(u=Ii(n,s));break}default:return{nextState:n}}return!d&&(u.actionRequired||u.queuedActions&&u.queuedActions.length>0)&&(r=!1),{nextState:u,requiresAnimation:d,requiresTurnEnd:r}},up=(n,s)=>{const u=n.actionRequired;if((u==null?void 0:u.type)==="select_opponent_card_to_flip"){const{actor:d}=u;return Xt(n,s,{type:"shift_flipped_card_optional",cardId:s,sourceCardId:u.sourceCardId,optional:!0,actor:d})}return Xt(n,s)},sp=(n,s)=>Ii(n,s);/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Wi=(n,s,u,r,d)=>{const f={...n[d]}.hand.find(L=>L.id===s);if(!f)return{newState:n};if(n[d==="player"?"opponent":"player"].lanes[u].some(L=>L.isFaceUp&&L.protocol==="Plague"&&L.value===0))return{newState:n};let p={newState:n};const m=n[d].lanes[u];if(m.length>0){const L=m[m.length-1];p=Vm(L,u,n)}const S=p.newState,b={...S[d]};b.hand=b.hand.filter(L=>L.id!==s),b.stats.cardsPlayed++;const R=[...b.lanes],T={...f,isFaceUp:r,isRevealed:!1};R[u]=[...R[u],T],b.lanes=R;let D={...S,[d]:b};D.lastPlayedCardId=T.id,D=pt(D);const M=d==="player"?"Player":"Opponent",X=D[d].protocols[u];let W;if(d==="opponent"&&!r)W=`${M} plays a face-down card into Protocol ${X}.`;else{const L=`${f.protocol}-${f.value}`;W=`${M} plays ${L}`,r||(W+=" face-down"),W+=` into Protocol ${X}.`}if(D=$(D,d,W),S.actionRequired)return r&&(D.queuedEffect={card:T,laneIndex:u}),{newState:D,animationRequests:p.animationRequests};{if(d==="opponent")return r&&(D.queuedEffect={card:T,laneIndex:u}),{newState:D,animationRequests:p.animationRequests};let L={newState:D};r&&(L=Cr(T,u,D,d));const J=[...p.animationRequests||[],...L.animationRequests||[]];return{newState:L.newState,animationRequests:J.length>0?J:void 0}}},dp=(n,s)=>{const u=n[s];if(u.hand.length>=5)return n;const r=5-u.hand.length;if(r<=0)return n;const{drawnCards:d,remainingDeck:o,newDiscard:f,reshuffled:h}=pa(u.deck,u.discard,r);if(d.length===0)return n;const _=d.map(R=>({...R,id:Qt(),isFaceUp:!0})),p=_.map(R=>R.id),m={...u,deck:o,discard:f,hand:[...u.hand,..._]};let S={...n,[s]:m,animationState:{type:"drawCard",owner:s,cardIds:p}};return h&&(S=$(S,s,`${s==="player"?"Player":"Opponent"}'s deck is empty. Discard pile has been reshuffled into the deck.`)),S=$(S,s,`${s==="player"?"Player":"Opponent"} fills their hand, drawing ${r} card(s).`),S=au(S,s),S};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const nu=(n,s)=>{if(!n.actionRequired)return{nextState:n};let u={...n},r=null;switch(n.actionRequired.type){case"select_lane_for_shift":{const{cardToShiftId:d,cardOwner:o,actor:f,sourceEffect:h}=n.actionRequired;if(u=Jl(n,d,o,s,f),h==="speed_3_end"){const _=n.actionRequired.sourceCardId;u=$(u,f,"Speed-3: Flipping itself after shifting a card."),u=jt(new Set([_]),u),u.animationState={type:"flipCard",cardId:_}}break}case"shift_flipped_card_optional":{const d=n.actionRequired.cardId,o=n.turn==="player"?"opponent":"player";u=Jl(n,d,o,s,n.turn);break}case"select_lane_for_play":{const{cardInHandId:d,isFaceDown:o,actor:f}=n.actionRequired,h=n[f].hand.find(m=>m.id===d);if(!h){console.error("Card for play not found in hand"),u.actionRequired=null;break}let _;typeof o=="boolean"?_=!o:_=n[f].lanes.flat().some(S=>S.isFaceUp&&S.protocol==="Spirit"&&S.value===1)||h.protocol===n[f].protocols[s];const{newState:p}=Wi(n,d,s,_,f);u=p,u.actionRequired=null;break}case"select_lane_for_death_2":{const d=n.turn,o=d==="player"?"Player":"Opponent",f=n.player.protocols[s];u=$(u,d,`Death-2: ${o} targets Protocol ${f}.`);const h=[],_=[];for(const p of["player","opponent"]){const m=n[p],S=m.lanes[s].some(b=>b.isFaceUp&&b.protocol==="Darkness"&&b.value===2)?4:2;for(const b of m.lanes[s]){const R=b.isFaceUp?b.value:S;if(R===1||R===2){h.push({type:"delete",cardId:b.id,owner:p});const T=p==="player"?"Player's":"Opponent's",D=b.isFaceUp?`${b.protocol}-${b.value}`:"a face-down card";_.push(`${T} ${D}`)}}}if(_.length>0){const p=he(n,n.actionRequired.sourceCardId),m=p?`${p.card.protocol}-${p.card.value}`:"Death-2";u=$(u,d,`${m}: Deleting ${_.join(", ")}.`),u[d].stats.cardsDeleted+=_.length}u.actionRequired=null,h.length>0&&(r={animationRequests:h,onCompleteCallback:(p,m)=>{let S=Ya(p,n.turn);if(S.queuedActions&&S.queuedActions.length>0){const b=[...S.queuedActions],R=b.shift();return{...S,actionRequired:R,queuedActions:b}}return m(S)}});break}case"select_lane_for_metal_3_delete":{const d=n.turn,o=d==="player"?"Player":"Opponent",f=n.player.protocols[s];u=$(u,d,`Metal-3: ${o} targets Protocol ${f} for deletion.`);const h=[];for(const _ of["player","opponent"])for(const p of n[_].lanes[s])h.push({type:"delete",cardId:p.id,owner:_});u[d].stats.cardsDeleted+=h.length,u.actionRequired=null,h.length>0&&(r={animationRequests:h,onCompleteCallback:(_,p)=>{let m=_;for(let S=0;S<h.length;S++)m=Ya(m,n.turn);if(m.queuedActions&&m.queuedActions.length>0){const S=[...m.queuedActions],b=S.shift();return{...m,actionRequired:b,queuedActions:S}}return p(m)}});break}case"select_lane_for_life_3_play":{const{actor:d}=n.actionRequired,o={...n[d]},{drawnCards:f,remainingDeck:h,newDiscard:_}=pa(o.deck,o.discard,1);if(f.length>0){const p={...f[0],id:Qt(),isFaceUp:!1},m=[...o.lanes];m[s]=[...m[s],p];const S={...o,lanes:m,deck:h,discard:_};u={...n,[d]:S,actionRequired:null},u=$(u,d,"Life-3 On-Cover: Plays a card face-down.")}else u.actionRequired=null;break}case"select_lane_to_shift_revealed_card_for_light_2":{const{revealedCardId:d,actor:o}=n.actionRequired,f=he(n,d);f&&(u=Jl(n,d,f.owner,s,o));break}case"select_lane_to_shift_cards_for_light_3":{const{sourceLaneIndex:d,actor:o}=n.actionRequired,f=o==="player"?"opponent":"player",h=n[o].lanes[d].filter(b=>!b.isFaceUp),_=n[f].lanes[d].filter(b=>!b.isFaceUp),p=n[o].lanes.map((b,R)=>R===d?b.filter(T=>T.isFaceUp):R===s?[...b,...h]:b),m=n[f].lanes.map((b,R)=>R===d?b.filter(T=>T.isFaceUp):R===s?[...b,..._]:b);u={...n,[o]:{...n[o],lanes:p},[f]:{...n[f],lanes:m},actionRequired:null};const S=h.length+_.length;if(S>0){const b=n[o].protocols[d],R=n[o].protocols[s];u=$(u,o,`Light-3: Shifts ${S} face-down card(s) from Protocol ${b} to Protocol ${R}.`),u[o].stats.cardsShifted+=S}break}case"select_lane_for_water_3":{const d=n.turn,o=d==="player"?"opponent":"player",f={...n[d]},h={...n[o]},_=f.lanes[s].filter(R=>fa(R,f.lanes[s])===2),p=h.lanes[s].filter(R=>fa(R,h.lanes[s])===2);if(_.length===0&&p.length===0){u={...n,actionRequired:null};break}const m=new Set(_.map(R=>R.id)),S=new Set(p.map(R=>R.id));f.lanes[s]=f.lanes[s].filter(R=>!m.has(R.id)),h.lanes[s]=h.lanes[s].filter(R=>!S.has(R.id)),f.hand.push(..._),h.hand.push(...p),u={...n,[d]:f,[o]:h,actionRequired:null};const b=_.length+p.length;if(b>0){const R=d==="player"?"Player":"Opponent",T=he(n,n.actionRequired.sourceCardId),D=T?`${T.card.protocol}-${T.card.value}`:"a card effect";u=$(u,d,`${D}: ${R} returns ${b} card(s) with value 2.`)}break}default:return{nextState:n}}if(!r&&u.actionRequired===null&&u.queuedActions&&u.queuedActions.length>0){const d=[...u.queuedActions],o=d.shift();u={...u,actionRequired:o,queuedActions:d}}return{nextState:pt(u),requiresAnimation:r}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Qi=(n,s)=>{const u=s==="player"?"opponent":"player";if(n[u].lanes.flat().some(o=>o.isFaceUp&&o.protocol==="Plague"&&o.value===1)){let o={...n};return o=$(o,u,"Plague-1 triggers after opponent discards: Draw 1 card."),o=Ne(o,u,1),o}return n};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const rl=(n,s,u)=>{var T,D,M;const r=n[u],d=new Set(s),o=r.hand.filter(X=>d.has(X.id));if(o.length===0)return n;const f=r.hand.filter(X=>!d.has(X.id)),h=[...r.discard,...o.map(({id:X,isFaceUp:W,...L})=>L)],_=((T=n.animationState)==null?void 0:T.type)==="discardCard"&&((D=n.animationState.originalAction)==null?void 0:D.type)==="discard"?n.animationState.originalAction:((M=n.actionRequired)==null?void 0:M.type)==="discard"?n.actionRequired:null;let p={...n,[u]:{...r,hand:f,discard:h},actionRequired:null};p[u].stats.cardsDiscarded+=o.length;const m=u==="player"?"Player":"Opponent";let S;if(u==="player"||o.every(X=>X.isRevealed)){const X=o.map(W=>`${W.protocol}-${W.value}`).join(", ");S=`${m} discards ${X}.`}else{const X=o.length===1?"card":"cards";S=`${m} discards ${o.length} ${X}.`}if(p=$(p,u,S),_&&_.player===u){const X=_.count-s.length;if(X>0)return p.actionRequired={..._,count:X},p;{const W=Qi(p,u);return op(W,u,_.sourceEffect,_.sourceCardId)}}const b=n.actionRequired;if(b&&b.type==="discard"&&b.player===u){const X=b.count-s.length;if(X>0)return p.actionRequired={...b,count:X},p;{const W=Qi(p,u);return op(W,u,b.sourceEffect,b.sourceCardId)}}return Qi(p,u)},Qm=(n,s)=>{var f;if(((f=n.actionRequired)==null?void 0:f.type)!=="plague_2_player_discard")return n;const u=n.turn,r=u==="player"?"opponent":"player";let d=rl(n,s,u);const o=s.length+1;return d[r].hand.length>0?d.actionRequired={type:"discard",player:r,count:Math.min(o,d[r].hand.length),sourceCardId:n.actionRequired.sourceCardId}:d.actionRequired=null,d},Up=(n,s)=>{var f;if(((f=n.actionRequired)==null?void 0:f.type)!=="plague_2_opponent_discard")return n;const u="opponent",r="player";let d=rl(n,s,u);const o=s.length+1;return d[r].hand.length>0?d.actionRequired={type:"discard",player:r,count:Math.min(o,d[r].hand.length),sourceCardId:n.actionRequired.sourceCardId}:d.actionRequired=null,d},fp=(n,s)=>{var o;if(((o=n.actionRequired)==null?void 0:o.type)!=="select_cards_from_hand_to_discard_for_fire_4")return n;const u=n.turn;let r=rl(n,s,u);const d=s.length+1;return r=$(r,u,`Fire-4: Drawing ${d} card(s).`),r=Ne(r,u,d),r},Fi=(n,s)=>{var o;if(((o=n.actionRequired)==null?void 0:o.type)!=="select_cards_from_hand_to_discard_for_hate_1")return n;const u=n.turn,{sourceCardId:r}=n.actionRequired;let d=rl(n,s,u);return d.actionRequired={type:"select_cards_to_delete",count:2,sourceCardId:r,disallowedIds:[r],actor:u},d};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const pp=(n,s)=>{var o;if(((o=n.actionRequired)==null?void 0:o.type)!=="prompt_death_1_effect")return n;const{sourceCardId:u,actor:r}=n.actionRequired;let d={...n};return s?(d=$(d,r,"Death-1: Player chooses to draw and delete."),d=Ne(d,r,1),d.actionRequired={type:"select_card_to_delete_for_death_1",sourceCardId:u,actor:r}):(d=$(d,r,"Death-1: Player skips the effect."),d.actionRequired=null),d},Zi=(n,s)=>{var d;if(((d=n.actionRequired)==null?void 0:d.type)!=="prompt_give_card_for_love_1")return n;const{actor:u}=n.actionRequired;let r={...n};return s?(r=$(r,u,"Love-1 End: Player chooses to give 1 card to draw 2."),r.actionRequired={type:"select_card_from_hand_to_give",sourceCardId:n.actionRequired.sourceCardId,sourceEffect:"love_1_end",actor:u}):(r=$(r,u,"Love-1 End: Player skips the effect."),r.actionRequired=null),r},hp=(n,s,u)=>{var d;if(((d=n.actionRequired)==null?void 0:d.type)!=="plague_4_player_flip_optional")return n;let r={...n,actionRequired:null};if(s){const{sourceCardId:o}=n.actionRequired;r=$(r,u,`Plague-4: ${u==="player"?"Player":"Opponent"} chooses to flip the card.`),r=jt(new Set([o]),r),r.animationState={type:"flipCard",cardId:o}}else r=$(r,u,`Plague-4: ${u==="player"?"Player":"Opponent"} skips flipping the card.`);return r},_p=(n,s)=>{var d;if(((d=n.actionRequired)==null?void 0:d.type)!=="prompt_fire_3_discard")return n;const{actor:u}=n.actionRequired;let r={...n};return s?(r=$(r,u,"Fire-3 End: Player chooses to discard 1 to flip 1."),r.actionRequired={type:"discard",player:u,count:1,sourceCardId:n.actionRequired.sourceCardId,sourceEffect:"fire_3"}):(r=$(r,u,"Fire-3 End: Player skips the effect."),r.actionRequired=null),r},yp=(n,s)=>{var d;if(((d=n.actionRequired)==null?void 0:d.type)!=="prompt_shift_for_speed_3")return n;const{actor:u}=n.actionRequired;let r={...n};return s?(r=$(r,u,"Speed-3 End: Player chooses to shift a card."),r.actionRequired={type:"select_own_card_to_shift_for_speed_3",sourceCardId:n.actionRequired.sourceCardId,actor:u}):(r=$(r,u,"Speed-3 End: Player skips the shift."),r.actionRequired=null),r},Ki=(n,s)=>{var f;if(((f=n.actionRequired)==null?void 0:f.type)!=="prompt_shift_or_flip_for_light_2")return n;const{actor:u,sourceCardId:r,revealedCardId:d}=n.actionRequired;let o={...n};switch(s){case"shift":o=$(o,u,"Light-2: Player chooses to shift the revealed card."),o.actionRequired={type:"select_lane_to_shift_revealed_card_for_light_2",sourceCardId:r,revealedCardId:d,actor:u};break;case"flip":o=$(o,u,"Light-2: Player chooses to flip the card back face-down."),o=jt(new Set([d]),o),o.animationState={type:"flipCard",cardId:d},o.actionRequired=null;break;case"skip":o=$(o,u,"Light-2: Player chooses to do nothing with the revealed card."),o.actionRequired=null;break}return o},mp=(n,s)=>{var m;if(((m=n.actionRequired)==null?void 0:m.type)!=="prompt_rearrange_protocols")return n;const{target:u,actor:r}=n.actionRequired;let d={...n};const o={...d[u]},f={};o.protocols.forEach((S,b)=>{f[S]=o.compiled[b]});const h=s.map(S=>f[S]);return o.protocols=s,o.compiled=h,d[u]=o,d.actionRequired=null,d=$(d,r,`${r==="player"?"Player":"Opponent"} rearranges ${u==="player"?"Player":"Opponent"}'s protocols.`),pt(d)},vp=(n,s)=>{var d;if(((d=n.actionRequired)==null?void 0:d.type)!=="prompt_return_for_psychic_4")return n;const{actor:u}=n.actionRequired;let r={...n};return s?(r=$(r,u,"Psychic-4 End: Player chooses to return an opponent's card."),r.actionRequired={type:"select_opponent_card_to_return",sourceCardId:n.actionRequired.sourceCardId,actor:u}):(r=$(r,u,"Psychic-4 End: Player skips the effect."),r.actionRequired=null),r},gp=(n,s)=>{var o;if(((o=n.actionRequired)==null?void 0:o.type)!=="prompt_spirit_1_start")return n;const{actor:u,sourceCardId:r}=n.actionRequired;let d={...n};return s==="discard"?(d=$(d,u,"Spirit-1 Start: Player chooses to discard 1 card."),d.actionRequired={type:"discard",player:u,count:1,sourceCardId:r,sourceEffect:"spirit_1_start"}):(d=$(d,u,"Spirit-1 Start: Player chooses to flip the card."),d=jt(new Set([r]),d),d.animationState={type:"flipCard",cardId:r},d.actionRequired=null),d},Sp=(n,s)=>{var o;if(((o=n.actionRequired)==null?void 0:o.type)!=="prompt_shift_for_spirit_3")return n;const{actor:u,sourceCardId:r}=n.actionRequired;let d={...n};if(s){const f=he(d,r);if(f){const{owner:h,card:_}=f;let p=-1;for(let m=0;m<d[h].lanes.length;m++)if(d[h].lanes[m].some(S=>S.id===_.id)){p=m;break}p!==-1&&(d=$(d,u,"Spirit-3 Trigger: Player chooses to shift the card."),d.actionRequired={type:"select_lane_for_shift",cardToShiftId:r,cardOwner:h,originalLaneIndex:p,sourceCardId:r,actor:u,sourceEffect:"speed_3_end"})}}else d=$(d,u,"Spirit-3 Trigger: Player skips the shift."),d.actionRequired=null;return d},bp=(n,s)=>{var p;if(((p=n.actionRequired)==null?void 0:p.type)!=="prompt_swap_protocols")return n;const{actor:u}=n.actionRequired,r={...n[u]},[d,o]=s.sort((m,S)=>m-S),f=[...r.protocols],h=[...r.compiled];[f[d],f[o]]=[f[o],f[d]],[h[d],h[o]]=[h[o],h[d]],r.protocols=f,r.compiled=h;let _={...n,[u]:r,actionRequired:null};return _=$(_,u,`${u==="player"?"Player":"Opponent"} swaps protocols ${f[o]} and ${f[d]}.`),pt(_)};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const wp=(n,s,u)=>{const r=n.turn,d=r==="player"?"opponent":"player";let o={...n};const f={...o[r]},h={...o[d]},_=f.compiled[s],p=[],m=[],S=f.lanes[s].filter(k=>k.protocol==="Speed"&&k.value===2&&k.isFaceUp?(p.push(k),!1):!0),b=h.lanes[s].filter(k=>k.protocol==="Speed"&&k.value===2&&k.isFaceUp?(m.push(k),!1):!0);f.stats.cardsDeleted+=S.length,h.stats.cardsDeleted+=b.length,f.discard=[...f.discard,...S.map(({id:k,isFaceUp:Z,...se})=>se)],h.discard=[...h.discard,...b.map(({id:k,isFaceUp:Z,...se})=>se)];const R=[...f.lanes];R[s]=p,f.lanes=R;const T=[...h.lanes];T[s]=m,h.lanes=T;const D=[...f.compiled];D[s]=!0,f.compiled=D,o={...o,[r]:f,[d]:h};const M=r==="player"?"Player":"Opponent",X=f.protocols[s];if(o=$(o,r,`${M} compiles Protocol ${X}!`),_&&(o=$(o,r,`${M} draws 1 card from the opponent's deck as a re-compile reward.`),o=Ne(o,r,1)),o=pt(o),f.compiled.every(k=>k===!0))return o.winner=r,u(r,o),o;const L=S.length+b.length;for(let k=0;k<L;k++)o=Ya(o,r);const J=[...o.queuedActions];for(const k of p)o=$(o,r,"Speed-2 survives compilation and must be shifted."),J.push({type:"select_lane_for_shift",cardToShiftId:k.id,cardOwner:r,originalLaneIndex:s,sourceCardId:k.id,actor:r});for(const k of m)o=$(o,d,"Speed-2 survives compilation and must be shifted."),J.push({type:"select_lane_for_shift",cardToShiftId:k.id,cardOwner:d,originalLaneIndex:s,sourceCardId:k.id,actor:d});return m.length>0?(o._interruptedTurn=r,o.turn=d,o.actionRequired=J.shift()):J.length>0&&(o.actionRequired=J.shift()),o.queuedActions=J,o},Fm=(n,s)=>{var f;if(((f=n.actionRequired)==null?void 0:f.type)!=="select_card_from_hand_to_play")return n;const{disallowedLaneIndex:u,sourceCardId:r,isFaceDown:d,actor:o}=n.actionRequired;return{...n,actionRequired:{type:"select_lane_for_play",cardInHandId:s,disallowedLaneIndex:u,sourceCardId:r,isFaceDown:d,actor:o}}},Cp=n=>{if(!n.actionRequired||!("optional"in n.actionRequired)||!n.actionRequired.optional)return n;const s=n.turn,u=s==="player"?"Player":"Opponent";let r={...n,actionRequired:null};return r=$(r,s,`${u} skips the optional action.`),r},Rp=n=>{var d;if(((d=n.actionRequired)==null?void 0:d.type)!=="reveal_opponent_hand")return n;const s=n.turn==="player"?"opponent":"player";let u={...n};const r={...u[s]};if(r.hand.length>0){r.hand=r.hand.map(h=>({...h,isRevealed:!0})),u[s]=r;const o=he(u,n.actionRequired.sourceCardId),f=o?`${o.card.protocol}-${o.card.value}`:"A card effect";u=$(u,n.turn,`${f}: Opponent reveals their hand.`)}return u.actionRequired=null,u};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Pi=(n,s)=>{if(!n.actionRequired)return n;const{actionRequired:u}=n,r=n.turn,d=r==="player"?"opponent":"player";switch(u.type){case"select_card_from_hand_to_give":{const o=n[r].hand.find(S=>S.id===s);if(!o)return n;let f={...n};const h={...f[r]},_={...f[d]};h.hand=h.hand.filter(S=>S.id!==s),_.hand=[..._.hand,o],f={...f,[r]:h,[d]:_};const p=r==="player"?"Player":"Opponent",m=`${o.protocol}-${o.value}`;return f=$(f,r,`${p} gives ${m} to the opponent.`),u.sourceEffect==="love_1_end"&&(f=$(f,r,`Love-1: ${p} draws 2 cards.`),f=Ne(f,r,2)),f.actionRequired=null,f}case"select_card_from_hand_to_reveal":{const o=n[r].hand.find(S=>S.id===s);if(!o)return n;let f={...n};const h={...f[r]},_=h.hand.map(S=>S.id===s?{...S,isRevealed:!0}:S);h.hand=_,f={...f,[r]:h};const p=r==="player"?"Player":"Opponent",m=`${o.protocol}-${o.value}`;return f=$(f,r,`Love-4: ${p} reveals ${m} from their hand.`),f.actionRequired={type:"select_any_card_to_flip",count:1,sourceCardId:u.sourceCardId,actor:r},f}default:return n}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Zm=n=>{const{opponent:s,player:u}=n;if(s.hand.length===0)return null;const r=u.lanes.flat().some(h=>h.isFaceUp&&h.protocol==="Psychic"&&h.value===1);for(let h=0;h<3;h++)if(!s.compiled[h]&&(s.laneValues[h]===8||s.laneValues[h]===9))return{cardId:s.hand[0].id,laneIndex:h,isFaceUp:!1};const o=[...s.hand].sort((h,_)=>_.value-h.value)[0];if(!r){for(let h=0;h<3;h++)if(o.protocol===s.protocols[h])return{cardId:o.id,laneIndex:h,isFaceUp:!0}}const f=Math.floor(Math.random()*3);return{cardId:o.id,laneIndex:f,isFaceUp:!1}},Km=(n,s)=>{switch(s.type){case"discard":return{type:"discardCards",cardIds:[...n.opponent.hand].sort((o,f)=>o.value-f.value).slice(0,s.count).map(o=>o.id)};case"select_cards_to_delete":case"select_face_down_card_to_delete":case"select_card_to_delete_for_death_1":case"plague_4_opponent_delete":{const o="disallowedIds"in s&&s.disallowedIds?s.disallowedIds:[],f=n.player.lanes.flat().filter(_=>!o.includes(_.id));if(f.length>0)return{type:"deleteCard",cardId:f[0].id};const h=n.opponent.lanes.flat().filter(_=>!o.includes(_.id));return h.length>0?{type:"deleteCard",cardId:h[0].id}:{type:"skip"}}case"select_card_from_other_lanes_to_delete":{const{disallowedLaneIndex:o,lanesSelected:f}=s,h=[];for(let _=0;_<3;_++){if(_===o||f.includes(_))continue;const p=n.player.lanes[_];if(p.length>0){h.push(p[p.length-1]);continue}const m=n.opponent.lanes[_];m.length>0&&h.push(m[m.length-1])}return h.length>0?{type:"deleteCard",cardId:h[0].id}:{type:"skip"}}case"select_low_value_card_to_delete":{const o=[...n.player.lanes.flat(),...n.opponent.lanes.flat()].filter(f=>f.isFaceUp&&(f.value===0||f.value===1));return o.length>0?{type:"deleteCard",cardId:o[0].id}:{type:"skip"}}case"select_opponent_face_up_card_to_flip":{const o=n.player.lanes.flat().filter(f=>f.isFaceUp);return o.length>0?(o.sort((f,h)=>h.value-f.value),{type:"flipCard",cardId:o[0].id}):{type:"skip"}}case"select_opponent_card_to_flip":{const o=n.player.lanes.flat();if(o.length>0){const f=o.filter(_=>_.isFaceUp);return f.length>0?(f.sort((_,p)=>p.value-_.value),{type:"flipCard",cardId:f[0].id}):{type:"flipCard",cardId:o[Math.floor(Math.random()*o.length)].id}}return{type:"skip"}}case"select_own_face_up_covered_card_to_flip":case"select_any_other_card_to_flip":case"select_any_card_to_flip":case"select_any_card_to_flip_optional":case"select_card_to_flip_for_fire_3":case"select_card_to_flip_for_light_0":case"select_face_down_card_to_reveal_for_light_2":case"select_any_other_card_to_flip_for_water_0":{const o=n.player.lanes.flat().filter(_=>_.isFaceUp);if(o.length>0)return o.sort((_,p)=>p.value-_.value),{type:"flipCard",cardId:o[0].id};const f=n.opponent.lanes.flat().filter(_=>!_.isFaceUp);if(f.length>0)return{type:"flipCard",cardId:f[0].id};if("optional"in s&&s.optional)return{type:"skip"};const h=n.player.lanes.flat().filter(_=>!_.isFaceUp);return h.length>0?{type:"flipCard",cardId:h[0].id}:{type:"skip"}}case"select_any_face_down_card_to_flip_optional":{const o=[...n.player.lanes.flat(),...n.opponent.lanes.flat()].filter(f=>!f.isFaceUp);return o.length>0?{type:"flipCard",cardId:o[Math.floor(Math.random()*o.length)].id}:{type:"skip"}}case"select_own_covered_card_in_lane_to_flip":{const{laneIndex:o}=s,h=n.opponent.lanes[o].filter((_,p,m)=>p<m.length-1);return h.length>0?{type:"flipCard",cardId:h[0].id}:{type:"skip"}}case"select_card_to_return":case"select_opponent_card_to_return":{const o=[...n.player.lanes.flat(),...n.opponent.lanes.flat()];return o.length>0?{type:"returnCard",cardId:o[0].id}:"optional"in s&&s.optional?{type:"skip"}:{type:"skip"}}case"select_own_card_to_return_for_water_4":{const o=n.opponent.lanes.flat();return o.length>0?{type:"returnCard",cardId:o[Math.floor(Math.random()*o.length)].id}:"optional"in s&&s.optional?{type:"skip"}:{type:"skip"}}case"select_card_to_shift_for_gravity_1":{const o=[...n.player.lanes.flat(),...n.opponent.lanes.flat()];return o.length>0?{type:"deleteCard",cardId:o[Math.floor(Math.random()*o.length)].id}:{type:"skip"}}case"select_card_to_flip_and_shift_for_gravity_2":{const o=n.player.lanes.flat();return o.length>0?{type:"deleteCard",cardId:o[Math.floor(Math.random()*o.length)].id}:{type:"skip"}}case"select_face_down_card_to_shift_for_gravity_4":{const{targetLaneIndex:o}=s,f=[];for(const h of["player","opponent"])for(let _=0;_<n[h].lanes.length;_++)if(_!==o)for(const p of n[h].lanes[_])p.isFaceUp||f.push(p);return f.length>0?{type:"deleteCard",cardId:f[Math.floor(Math.random()*f.length)].id}:{type:"skip"}}case"select_lane_for_shift":case"shift_flipped_card_optional":case"select_lane_for_play":case"select_lane_for_death_2":case"select_lane_for_life_3_play":case"select_lane_to_shift_revealed_card_for_light_2":case"select_lane_to_shift_cards_for_light_3":case"select_lane_for_metal_3_delete":case"select_lane_for_water_3":{let o=[0,1,2];return"disallowedLaneIndex"in s&&s.disallowedLaneIndex!==void 0&&(o=o.filter(f=>f!==s.disallowedLaneIndex)),"originalLaneIndex"in s&&s.originalLaneIndex!==void 0&&(o=o.filter(f=>f!==s.originalLaneIndex)),o.length>0?{type:"selectLane",laneIndex:o[Math.floor(Math.random()*o.length)]}:"optional"in s&&s.optional?{type:"skip"}:{type:"skip"}}case"prompt_death_1_effect":return{type:"resolveDeath1Prompt",accept:Math.random()>.7};case"prompt_give_card_for_love_1":return{type:"resolveLove1Prompt",accept:!1};case"plague_4_player_flip_optional":return{type:"resolvePlague4Flip",accept:!1};case"prompt_fire_3_discard":return{type:"resolveFire3Prompt",accept:!1};case"prompt_shift_for_speed_3":return{type:"resolveSpeed3Prompt",accept:!1};case"prompt_shift_for_spirit_3":return{type:"resolveSpirit3Prompt",accept:!1};case"prompt_return_for_psychic_4":return{type:"resolvePsychic4Prompt",accept:!1};case"prompt_spirit_1_start":return{type:"resolveSpirit1Prompt",choice:"flip"};case"prompt_shift_or_flip_for_light_2":return{type:"resolveLight2Prompt",choice:"skip"};case"plague_2_opponent_discard":return n.opponent.hand.length>0?{type:"resolvePlague2Discard",cardIds:[n.opponent.hand[0].id]}:{type:"skip"};case"select_cards_from_hand_to_discard_for_fire_4":return n.opponent.hand.length>0?{type:"resolveFire4Discard",cardIds:[n.opponent.hand[0].id]}:{type:"skip"};case"select_cards_from_hand_to_discard_for_hate_1":return n.opponent.hand.length>0?{type:"resolveHate1Discard",cardIds:n.opponent.hand.slice(0,s.count).map(o=>o.id)}:{type:"skip"};case"select_card_from_hand_to_play":if(n.opponent.hand.length>0){const o=n.opponent.hand[0],f=[0,1,2].filter(h=>h!==s.disallowedLaneIndex);return{type:"playCard",cardId:o.id,laneIndex:f[0],isFaceUp:!1}}return{type:"skip"};case"select_card_from_hand_to_give":return n.opponent.hand.length>0?{type:"giveCard",cardId:n.opponent.hand[0].id}:{type:"skip"};case"select_card_from_hand_to_reveal":return n.opponent.hand.length>0?{type:"revealCard",cardId:n.opponent.hand[0].id}:{type:"skip"};case"prompt_rearrange_protocols":return{type:"rearrangeProtocols",newOrder:wr([...n[s.target].protocols])};case"prompt_swap_protocols":return{type:"skip"};case"select_own_other_card_to_shift":{const o=n.opponent.lanes.flat().find(f=>f.id!==s.sourceCardId);return o?{type:"deleteCard",cardId:o.id}:{type:"skip"}}case"select_own_card_to_shift_for_speed_3":return{type:"deleteCard",cardId:n.opponent.lanes.flat()[0].id};case"select_opponent_covered_card_to_shift":{const o=[];for(const f of n.player.lanes)for(let h=0;h<f.length-1;h++)o.push(f[h]);return o.length>0?{type:"deleteCard",cardId:o[Math.floor(Math.random()*o.length)].id}:{type:"skip"}}case"select_any_opponent_card_to_shift":{const o=n.player.lanes.flat();return o.length>0?{type:"deleteCard",cardId:o[Math.floor(Math.random()*o.length)].id}:{type:"skip"}}}return{type:"skip"}},jp=(n,s)=>{if(s)return Km(n,s);if(n.phase==="compile"&&n.compilableLanes.length>0)return{type:"compile",laneIndex:n.compilableLanes[0]};if(n.phase==="action"){const u=Zm(n);return u?{type:"playCard",...u}:{type:"fillHand"}}return{type:"fillHand"}};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Mp=["delete","flip","shift","return","discard"],Kl=n=>{let s=n.value;return Mp.some(u=>n.keywords[u])&&(s+=4),n.keywords.draw&&(s+=3),n.keywords.play&&(s+=5),s},Pm=n=>{const{opponent:s,player:u}=n,r=[],d=u.lanes.flat().some(o=>o.isFaceUp&&o.protocol==="Psychic"&&o.value===1);for(const o of s.hand)for(let f=0;f<3;f++){if(s.compiled[f])continue;if(o.protocol===s.protocols[f]&&!d){let S=0;const b=o.value,R=s.laneValues[f]+b;R>=10&&R>u.laneValues[f]?S+=200:R>=8&&(S+=100),u.laneValues[f]>=8&&Mp.some(D=>o.keywords[D])&&(S+=150),S+=Kl(o),S+=R-u.laneValues[f],o.protocol==="Metal"&&o.value===6&&s.lanes[f].length<4&&(S-=50),r.push({move:{type:"playCard",cardId:o.id,laneIndex:f,isFaceUp:!0},score:S})}let _=0;const p=fa({...o,isFaceUp:!1},s.lanes[f]),m=s.laneValues[f]+p;m>=10&&m>u.laneValues[f]&&(_+=250),_+=p+(m-u.laneValues[f]),o.protocol==="Metal"&&o.value===6&&s.lanes[f].length<4&&(_-=50),r.push({move:{type:"playCard",cardId:o.id,laneIndex:f,isFaceUp:!1},score:_})}if(s.hand.length<5){const f=10-s.hand.reduce((h,_)=>h+Kl(_),0)/(s.hand.length||1);r.push({move:{type:"fillHand"},score:f})}return r.length===0?{type:"fillHand"}:(r.sort((o,f)=>f.score-o.score),r[0].move)},Jm=(n,s)=>{switch(s.type){case"discard":return{type:"discardCards",cardIds:[...n.opponent.hand].sort((h,_)=>Kl(h)-Kl(_)).slice(0,s.count).map(h=>h.id)};case"select_cards_to_delete":case"select_card_to_delete_for_death_1":{const h=s.type==="select_cards_to_delete"?s.disallowedIds:s.type==="select_card_to_delete_for_death_1"?[s.sourceCardId]:[],_=n.player.lanes.flat().filter(m=>!h.includes(m.id));if(_.length>0)return{type:"deleteCard",cardId:_.reduce((S,b)=>{const R=fa(S,[]);return fa(b,[])>R?b:S}).id};const p=n.opponent.lanes.flat().filter(m=>!h.includes(m.id));return p.length>0?{type:"deleteCard",cardId:p.reduce((S,b)=>b.value<S.value?b:S).id}:{type:"skip"}}case"select_any_face_down_card_to_flip_optional":{const h=[];return n.opponent.lanes.forEach((_,p)=>{_.forEach(m=>{if(!m.isFaceUp){let S=5;S+=n.opponent.laneValues[p],h.push({cardId:m.id,score:S})}})}),n.player.lanes.forEach((_,p)=>{_.forEach(m=>{m.isFaceUp||h.push({cardId:m.id,score:1})})}),h.length>0?(h.sort((_,p)=>p.score-_.score),{type:"flipCard",cardId:h[0].cardId}):{type:"skip"}}case"select_any_card_to_flip_optional":case"select_any_card_to_flip":case"select_card_to_flip_for_fire_3":case"select_any_other_card_to_flip":case"select_card_to_flip_for_light_0":case"select_any_other_card_to_flip_for_water_0":case"select_opponent_face_up_card_to_flip":case"select_opponent_card_to_flip":{const h=[];return n.player.lanes.flat().forEach(_=>{_.isFaceUp&&h.push({cardId:_.id,score:_.value*2+2})}),n.opponent.lanes.flat().forEach(_=>{_.isFaceUp||h.push({cardId:_.id,score:3})}),h.length>0?(h.sort((_,p)=>p.score-_.score),{type:"flipCard",cardId:h[0].cardId}):"optional"in s&&s.optional?{type:"skip"}:{type:"skip"}}case"select_card_from_other_lanes_to_delete":{const{disallowedLaneIndex:h,lanesSelected:_}=s,p=[];for(let m=0;m<3;m++){if(m===h||_.includes(m))continue;const S=n.player.lanes[m];S.length>0&&p.push(...S)}return p.length>0?(p.sort((m,S)=>S.value-m.value),{type:"deleteCard",cardId:p[0].id}):{type:"skip"}}case"select_face_down_card_to_delete":{const h=n.player.laneValues.map((p,m)=>({value:p,index:m})).sort((p,m)=>m.value-p.value);for(const p of h){const m=n.player.lanes[p.index].find(S=>!S.isFaceUp);if(m)return{type:"deleteCard",cardId:m.id}}const _=n.opponent.laneValues.map((p,m)=>({value:p,index:m})).sort((p,m)=>p.value-m.value);for(const p of _){const m=n.opponent.lanes[p.index].find(S=>!S.isFaceUp);if(m)return{type:"deleteCard",cardId:m.id}}return{type:"skip"}}case"plague_4_opponent_delete":{const h=n.opponent.laneValues.map((p,m)=>({diff:p-n.player.laneValues[m],index:m})).sort((p,m)=>p.diff-m.diff);for(const p of h){const m=n.opponent.lanes[p.index].find(S=>!S.isFaceUp);if(m)return{type:"deleteCard",cardId:m.id}}const _=n.opponent.lanes.flat().find(p=>!p.isFaceUp);return _?{type:"deleteCard",cardId:_.id}:{type:"skip"}}case"select_low_value_card_to_delete":{const h=[...n.player.lanes.flat(),...n.opponent.lanes.flat()].filter(_=>_.isFaceUp&&(_.value===0||_.value===1));return h.length>0?(h.sort((_,p)=>{const m=n.player.lanes.flat().some(b=>b.id===_.id),S=n.player.lanes.flat().some(b=>b.id===p.id);return m&&!S?-1:!m&&S?1:p.value-_.value}),{type:"deleteCard",cardId:h[0].id}):{type:"skip"}}case"select_own_covered_card_in_lane_to_flip":{const{laneIndex:h}=s,m=n.opponent.lanes[h].filter((S,b,R)=>b<R.length-1).find(S=>!S.isFaceUp);return m?{type:"flipCard",cardId:m.id}:{type:"skip"}}case"select_own_card_to_return_for_water_4":{const h=n.opponent.lanes.flat();return h.length>0?(h.sort((_,p)=>_.value-p.value),{type:"returnCard",cardId:h[0].id}):{type:"skip"}}case"prompt_rearrange_protocols":return{type:"rearrangeProtocols",newOrder:n[s.target].protocols.map((h,_)=>({protocol:h,value:n[s.target].laneValues[_]})).sort((h,_)=>_.value-h.value).map(h=>h.protocol)};case"select_card_to_shift_for_gravity_1":{const h=n.player.lanes.flat();if(h.length>0)return h.sort((p,m)=>m.value-p.value),{type:"deleteCard",cardId:h[0].id};const _=n.opponent.lanes.flat();return _.length>0?(_.sort((p,m)=>p.value-m.value),{type:"deleteCard",cardId:_[0].id}):{type:"skip"}}case"select_card_to_flip_and_shift_for_gravity_2":{const h=n.player.lanes.flat().filter(p=>p.isFaceUp);if(h.length>0)return h.sort((p,m)=>m.value-p.value),{type:"deleteCard",cardId:h[0].id};const _=n.player.lanes.flat().filter(p=>!p.isFaceUp);return _.length>0?{type:"deleteCard",cardId:_[Math.floor(Math.random()*_.length)].id}:{type:"skip"}}case"select_face_down_card_to_shift_for_gravity_4":{const{targetLaneIndex:h}=s,_=[];for(let m=0;m<n.player.lanes.length;m++)m!==h&&n.player.lanes[m].forEach(S=>{S.isFaceUp||_.push(S)});if(_.length>0)return{type:"deleteCard",cardId:_[0].id};const p=[];for(let m=0;m<n.opponent.lanes.length;m++)m!==h&&n.opponent.lanes[m].forEach(S=>{S.isFaceUp||p.push(S)});return p.length>0?{type:"deleteCard",cardId:p[0].id}:{type:"skip"}}case"select_any_opponent_card_to_shift":{const h=n.player.lanes.flat();return h.length>0?(h.sort((_,p)=>p.value-_.value),{type:"deleteCard",cardId:h[0].id}):{type:"skip"}}case"select_lane_for_shift":{const{cardOwner:h,originalLaneIndex:_}=s,p=[0,1,2].filter(m=>m!==_);return h==="opponent"?{type:"selectLane",laneIndex:p.map(S=>({value:n.opponent.laneValues[S],index:S})).sort((S,b)=>S.value-b.value)[0].index}:{type:"selectLane",laneIndex:p.map(S=>({value:n.player.laneValues[S],index:S})).sort((S,b)=>b.value-S.value)[0].index}}case"select_own_card_to_shift_for_speed_3":{const h=n.opponent.lanes.flat();return h.sort((_,p)=>Kl(_)-Kl(p)),{type:"deleteCard",cardId:h[0].id}}case"prompt_death_1_effect":return{type:"resolveDeath1Prompt",accept:!0};case"prompt_give_card_for_love_1":return{type:"resolveLove1Prompt",accept:!0};case"plague_4_player_flip_optional":return{type:"resolvePlague4Flip",accept:!0};case"prompt_fire_3_discard":return{type:"resolveFire3Prompt",accept:n.opponent.hand.length>2};case"prompt_shift_for_speed_3":return{type:"resolveSpeed3Prompt",accept:!0};case"prompt_shift_for_spirit_3":return{type:"resolveSpirit3Prompt",accept:!0};case"prompt_return_for_psychic_4":return{type:"resolvePsychic4Prompt",accept:!0};case"prompt_spirit_1_start":return{type:"resolveSpirit1Prompt",choice:"flip"};case"prompt_shift_or_flip_for_light_2":return{type:"resolveLight2Prompt",choice:"shift"};case"select_opponent_covered_card_to_shift":{const h=[];for(let _=0;_<n.player.lanes.length;_++){const p=n.player.lanes[_];for(let m=0;m<p.length-1;m++)h.push({card:p[m],laneIndex:_})}return h.length>0?(h.sort((_,p)=>_.card.isFaceUp&&!p.card.isFaceUp?-1:!_.card.isFaceUp&&p.card.isFaceUp?1:_.card.isFaceUp&&p.card.isFaceUp?p.card.value-_.card.value:0),{type:"deleteCard",cardId:h[0].card.id}):{type:"skip"}}default:const f=jp(n,s);return f||{type:"skip"}}},zp=(n,s)=>s?Jm(n,s):n.phase==="compile"&&n.compilableLanes.length>0?{type:"compile",laneIndex:n.compilableLanes.reduce((r,d)=>n.opponent.laneValues[r]>n.opponent.laneValues[d]?r:d)}:n.phase==="action"?Pm(n):{type:"fillHand"};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Hp=["delete","flip","shift","return","discard"],Pl=n=>{let s=10-n.value;return Hp.some(u=>n.keywords[u])&&(s+=5),n.keywords.draw&&(s+=3),n.keywords.play&&(s+=6),s},Be=(n,s,u)=>{let r;for(const o of u[s].lanes)if(o.some(f=>f.id===n.id)){r=o;break}if(!r)return 0;if(!n.isFaceUp)return r.some(f=>f.isFaceUp&&f.protocol==="Darkness"&&f.value===2)?4:2;let d=n.value*2;return n.top.length>0&&(d+=5),(n.bottom.includes("Start:")||n.bottom.includes("End:"))&&(d+=6),n.bottom.includes("covered:")&&(d+=4),d},Im=n=>{const{opponent:s,player:u}=n,r=[],d=u.laneValues.map((h,_)=>u.compiled[_]?0:h>=10?3:h>=8?2:h>=6?1:0),o=u.lanes.flat().filter(h=>h.isFaceUp).sort((h,_)=>Be(_,"player",n)-Be(h,"player",n))[0],f=u.lanes.flat().some(h=>h.isFaceUp&&h.protocol==="Psychic"&&h.value===1);for(const h of s.hand)for(let _=0;_<3;_++){if(s.compiled[_])continue;const p=Pl(h);if(h.protocol===s.protocols[_]&&!f){if(h.protocol==="Metal"&&h.value===6&&s.lanes[_].length<4){const L=h.value,J=s.laneValues[_]+L;if(!(J>=10&&J>u.laneValues[_]))continue}let T=p,D=`Play ${h.protocol}-${h.value} face-up in lane ${_}.`;const M=h.value,X=s.laneValues[_]+M;T+=M,X>=10&&X>u.laneValues[_]?T+=200:X>=8&&(T+=100),T+=X-u.laneValues[_],Hp.some(L=>h.keywords[L])&&(d[_]>0&&(T+=150*d[_],D+=` [DEFENSIVE: Disrupts player threat level ${d[_]}]`),o&&(h.keywords.flip||h.keywords.delete)&&(T+=Be(o,"player",n)*2,D+=` [PROACTIVE: Targets strongest card ${o.protocol}-${o.value}]`)),r.push({move:{type:"playCard",cardId:h.id,laneIndex:_,isFaceUp:!0},score:T,description:D})}if(h.protocol==="Metal"&&h.value===6&&s.lanes[_].length<4)continue;let m=0,S=`Play ${h.protocol}-${h.value} face-down in lane ${_}.`;const b=fa({...h,isFaceUp:!1},s.lanes[_]),R=s.laneValues[_]+b;R>=10&&R>u.laneValues[_]&&s.laneValues[_]>=8?(m+=250,S+=" [WINNING MOVE: Sets up compile]"):s.laneValues[_]>=6?(m+=20*s.laneValues[_],S+=" [Secures strong lane]"):m+=1,r.push({move:{type:"playCard",cardId:h.id,laneIndex:_,isFaceUp:!1},score:m,description:S})}if(s.hand.length<5){let h=1;s.hand.reduce((p,m)=>p+Pl(m),0)/(s.hand.length||1)<8&&(h=5),s.hand.length===0&&(h=500),r.push({move:{type:"fillHand"},score:h,description:"Fill hand."})}return r.length===0?{type:"fillHand"}:(r.sort((h,_)=>_.score-h.score),r[0].move)},Wm=(n,s)=>{var d;const{player:u,opponent:r}=n;switch(s.type){case"discard":return{type:"discardCards",cardIds:[...r.hand].sort((p,m)=>Pl(p)-Pl(m)).slice(0,s.count).map(p=>p.id)};case"select_cards_to_delete":case"select_card_to_delete_for_death_1":{const p=s.type==="select_cards_to_delete"?s.disallowedIds:s.type==="select_card_to_delete_for_death_1"?[s.sourceCardId]:[],m=u.lanes.flat().filter(S=>!p.includes(S.id));return m.length>0?{type:"deleteCard",cardId:m.sort((b,R)=>Be(R,"player",n)-Be(b,"player",n))[0].id}:{type:"skip"}}case"select_any_face_down_card_to_flip_optional":{const p=[];return n.opponent.lanes.forEach((m,S)=>{m.forEach(b=>{if(!b.isFaceUp){const R=fa(b,m),T=b.value-R;let D=5+T;n.opponent.laneValues[S]+T>=10&&(D+=100),p.push({card:b,score:D})}})}),n.player.lanes.forEach((m,S)=>{m.forEach(b=>{if(!b.isFaceUp){let R=3-n.player.laneValues[S];p.push({card:b,score:R})}})}),p.length>0&&(p.sort((m,S)=>S.score-m.score),p[0].score>0)?{type:"flipCard",cardId:p[0].card.id}:{type:"skip"}}case"select_any_card_to_flip_optional":case"select_any_card_to_flip":case"select_card_to_flip_for_fire_3":case"select_any_other_card_to_flip":case"select_card_to_flip_for_light_0":case"select_any_other_card_to_flip_for_water_0":case"select_opponent_face_up_card_to_flip":case"select_opponent_card_to_flip":{const p=[];return u.lanes.flat().forEach(m=>{m.isFaceUp&&p.push({cardId:m.id,score:Be(m,"player",n)})}),r.lanes.flat().forEach(m=>{if(!m.isFaceUp){const S=Be({...m,isFaceUp:!0},"opponent",n)-Be(m,"opponent",n);p.push({cardId:m.id,score:S+3})}}),p.length>0&&(p.sort((m,S)=>S.score-m.score),p[0].score>0)?{type:"flipCard",cardId:p[0].cardId}:"optional"in s&&s.optional?{type:"skip"}:{type:"skip"}}case"select_card_from_other_lanes_to_delete":{const{disallowedLaneIndex:p,lanesSelected:m}=s,S=[];for(let b=0;b<3;b++){if(b===p||m.includes(b))continue;const R=n.player.lanes[b];S.push(...R)}return S.length>0?(S.sort((b,R)=>Be(R,"player",n)-Be(b,"player",n)),{type:"deleteCard",cardId:S[0].id}):{type:"skip"}}case"select_low_value_card_to_delete":{const p=[...n.player.lanes.flat(),...n.opponent.lanes.flat()].filter(m=>m.isFaceUp&&(m.value===0||m.value===1));return p.length>0?(p.sort((m,S)=>{const b=n.player.lanes.flat().some(T=>T.id===m.id),R=n.player.lanes.flat().some(T=>T.id===S.id);return b&&!R?-1:!b&&R?1:Be(S,b?"player":"opponent",n)-Be(m,R?"player":"opponent",n)}),{type:"deleteCard",cardId:p[0].id}):{type:"skip"}}case"select_own_covered_card_in_lane_to_flip":{const{laneIndex:p}=s,b=n.opponent.lanes[p].filter((R,T,D)=>T<D.length-1).find(R=>!R.isFaceUp);return b?{type:"flipCard",cardId:b.id}:{type:"skip"}}case"select_own_card_to_return_for_water_4":{const p=r.lanes.flat();if(p.length>0){const m=p.map(S=>{let b=10-S.value;return(S.keywords.delete||S.keywords.play||S.keywords.draw||S.keywords.flip)&&(b+=5),{card:S,score:b}});return m.sort((S,b)=>b.score-S.score),{type:"returnCard",cardId:m[0].card.id}}return{type:"skip"}}case"select_lane_for_shift":{const{cardToShiftId:p,cardOwner:m,originalLaneIndex:S}=s,b=(d=he(n,p))==null?void 0:d.card;if(!b)return{type:"skip"};const R=[0,1,2].filter(T=>T!==S);if(m==="opponent"){const T=R.map(D=>{const M=fa(b,n.opponent.lanes[D]),X=n.opponent.laneValues[D]+M;let L=X-n.player.laneValues[D];return X>=10&&X>n.player.laneValues[D]&&(L+=100),{laneIndex:D,score:L}});return T.sort((D,M)=>M.score-D.score),{type:"selectLane",laneIndex:T[0].laneIndex}}else{const T=R.map(D=>{const M=fa(b,n.player.lanes[D]),W=n.player.laneValues[D]+M-n.opponent.laneValues[D];return{laneIndex:D,score:W}});return T.sort((D,M)=>D.score-M.score),{type:"selectLane",laneIndex:T[0].laneIndex}}}case"select_own_card_to_shift_for_speed_3":{const p=n.opponent.lanes.flat();return p.sort((m,S)=>Be(S,"opponent",n)-Be(m,"opponent",n)),{type:"deleteCard",cardId:p[0].id}}case"prompt_rearrange_protocols":return{type:"rearrangeProtocols",newOrder:n[s.target].protocols.map((p,m)=>({protocol:p,valueDifference:n.opponent.laneValues[m]-n.player.laneValues[m]})).sort((p,m)=>m.valueDifference-p.valueDifference).map(p=>p.protocol)};case"select_card_to_shift_for_gravity_1":{const p=n.player.lanes.flat();if(p.length>0)return p.sort((S,b)=>Be(b,"player",n)-Be(S,"player",n)),{type:"deleteCard",cardId:p[0].id};const m=n.opponent.lanes.flat();return m.length>0?(m.sort((S,b)=>Pl(S)-Pl(b)),{type:"deleteCard",cardId:m[0].id}):{type:"skip"}}case"select_card_to_flip_and_shift_for_gravity_2":{const p=[...n.player.lanes.flat(),...n.opponent.lanes.flat()];return p.length>0?(p.sort((m,S)=>{const b=n.player.lanes.flat().some(T=>T.id===m.id),R=n.player.lanes.flat().some(T=>T.id===S.id);return b&&!R?-1:!b&&R?1:Be(S,b?"player":"opponent",n)-Be(m,R?"player":"opponent",n)}),{type:"deleteCard",cardId:p[0].id}):{type:"skip"}}case"select_face_down_card_to_shift_for_gravity_4":{const{targetLaneIndex:p}=s;let m=null,S=-1;for(let R=0;R<n.player.lanes.length;R++){if(R===p)continue;const T=n.player.laneValues[R];if(T>S){const D=n.player.lanes[R].find(M=>!M.isFaceUp);D&&(S=T,m=D)}}if(m)return{type:"deleteCard",cardId:m.id};const b=[];for(let R=0;R<n.opponent.lanes.length;R++)R!==p&&n.opponent.lanes[R].forEach(T=>{T.isFaceUp||b.push(T)});return b.length>0?{type:"deleteCard",cardId:b[0].id}:{type:"skip"}}case"select_any_opponent_card_to_shift":{const p=n.player.lanes.flat();return p.length>0?(p.sort((m,S)=>Be(S,"player",n)-Be(m,"player",n)),{type:"deleteCard",cardId:p[0].id}):{type:"skip"}}case"prompt_death_1_effect":return{type:"resolveDeath1Prompt",accept:!0};case"prompt_give_card_for_love_1":return{type:"resolveLove1Prompt",accept:!0};case"plague_4_player_flip_optional":return{type:"resolvePlague4Flip",accept:!0};case"prompt_fire_3_discard":return{type:"resolveFire3Prompt",accept:n.opponent.hand.length>1};case"prompt_shift_for_speed_3":return{type:"resolveSpeed3Prompt",accept:!0};case"prompt_shift_for_spirit_3":return{type:"resolveSpirit3Prompt",accept:!0};case"prompt_return_for_psychic_4":return{type:"resolvePsychic4Prompt",accept:!0};case"prompt_spirit_1_start":return{type:"resolveSpirit1Prompt",choice:"flip"};case"prompt_shift_or_flip_for_light_2":return{type:"resolveLight2Prompt",choice:"shift"};case"select_opponent_covered_card_to_shift":{const p=[];for(let m=0;m<n.player.lanes.length;m++){const S=n.player.lanes[m];for(let b=0;b<S.length-1;b++)p.push({card:S[b],laneIndex:m})}return p.length>0?(p.sort((m,S)=>{const b=n.player.laneValues[m.laneIndex],R=n.player.laneValues[S.laneIndex];return b!==R?R-b:Be(S.card,"player",n)-Be(m.card,"player",n)}),{type:"deleteCard",cardId:p[0].card.id}):{type:"skip"}}default:const _=zp(n,s);return _||{type:"skip"}}},ev=(n,s)=>s?Wm(n,s):n.phase==="compile"&&n.compilableLanes.length>0?{type:"compile",laneIndex:n.compilableLanes.reduce((r,d)=>{const o=n.opponent.laneValues[r]-n.player.laneValues[r],f=n.opponent.laneValues[d]-n.player.laneValues[d];return o>f?r:d})}:n.phase==="action"?Im(n):{type:"fillHand"};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const br=(n,s,u)=>{switch(u){case"normal":return zp(n,s);case"hard":return ev(n,s);default:return jp(n,s)}},tv=(n,s,u,r,d,o)=>{s(f=>{const h=f.actionRequired;if(!h)return f;let _=!1;if((h.type==="discard"&&h.player==="opponent"||h.type==="plague_4_opponent_delete"&&h.actor==="player"||"actor"in h&&h.actor==="opponent")&&(_=!0),!_)return f;const p=br(f,h,u);if(p.type==="discardCards"&&h.type==="discard"){const S=r.discardCards(f,p.cardIds,"opponent");return S.actionRequired?S:d.processEndOfAction(S)}if(p.type==="selectLane"&&h.type==="select_lane_for_shift"){const{nextState:S}=nu(f,p.laneIndex);return d.processEndOfAction(S)}if(p.type==="deleteCard"&&h.type==="plague_4_opponent_delete"&&f.actionRequired){const S=f.actionRequired.sourceCardId,b={...f,actionRequired:null};return o([{type:"delete",cardId:p.cardId,owner:"opponent"}],()=>s(R=>({...R,actionRequired:{type:"plague_4_player_flip_optional",sourceCardId:S,optional:!0,actor:"player"}}))),b}if(h.type==="reveal_opponent_hand"){const S=r.revealOpponentHand(f);return d.processEndOfAction(S)}console.warn(`AI has no logic for mandatory action during player turn, clearing it: ${h.type}`);const m={...f,actionRequired:null};return d.processEndOfAction(m)})},av=(n,s,u,r,d,o)=>{const f=br(n,n.actionRequired,u),h=n.actionRequired;if(f.type==="skip"){const p=r.skipAction(n);return n.phase==="start"?o.continueTurnAfterStartPhaseAction(p):o.processEndOfAction(p)}if(f.type==="resolveDeath1Prompt"&&h.type==="prompt_death_1_effect"){const p=r.resolveDeath1Prompt(n,f.accept);return p.actionRequired?p:o.continueTurnAfterStartPhaseAction(p)}if(f.type==="resolveLove1Prompt"&&h.type==="prompt_give_card_for_love_1"){const p=r.resolveLove1Prompt(n,f.accept);return p.actionRequired?p:o.processEndOfAction(p)}if(f.type==="resolvePlague2Discard"&&h.type==="plague_2_opponent_discard")return Up(n,f.cardIds);if(f.type==="resolvePlague4Flip"&&h.type==="plague_4_player_flip_optional")return r.resolvePlague4Flip(n,f.accept,"opponent");if(f.type==="resolveFire3Prompt"&&h.type==="prompt_fire_3_discard"){const p=r.resolveFire3Prompt(n,f.accept);return p.actionRequired?p:o.processEndOfAction(p)}if(f.type==="resolveSpeed3Prompt"&&h.type==="prompt_shift_for_speed_3"){const p=r.resolveSpeed3Prompt(n,f.accept);return p.actionRequired?p:o.processEndOfAction(p)}if(f.type==="resolvePsychic4Prompt"&&h.type==="prompt_return_for_psychic_4"){const p=r.resolvePsychic4Prompt(n,f.accept);return p.actionRequired?p:o.processEndOfAction(p)}if(f.type==="resolveSpirit1Prompt"&&h.type==="prompt_spirit_1_start"){const p=r.resolveSpirit1Prompt(n,f.choice);return p.actionRequired?p:o.continueTurnAfterStartPhaseAction(p)}if(f.type==="resolveSpirit3Prompt"&&h.type==="prompt_shift_for_spirit_3"){const p=r.resolveSpirit3Prompt(n,f.accept);return p.actionRequired?p:o.processEndOfAction(p)}if(f.type==="resolveSwapProtocols"&&h.type==="prompt_swap_protocols"){const p=r.resolveSwapProtocols(n,f.indices);return o.processEndOfAction(p)}if(f.type==="resolveFire4Discard"&&h.type==="select_cards_from_hand_to_discard_for_fire_4"){const p=r.resolveFire4Discard(n,f.cardIds);return o.processEndOfAction(p)}if(f.type==="resolveHate1Discard"&&h.type==="select_cards_from_hand_to_discard_for_hate_1")return r.resolveHate1Discard(n,f.cardIds);if(f.type==="resolveLight2Prompt"&&h.type==="prompt_shift_or_flip_for_light_2"){const p=r.resolveLight2Prompt(n,f.choice);return p.actionRequired?p:o.processEndOfAction(p)}if(f.type==="rearrangeProtocols"&&h.type==="prompt_rearrange_protocols"){const p=r.resolveRearrangeProtocols(n,f.newOrder);return o.processEndOfAction(p)}if(f.type==="selectLane"&&(h.type==="select_lane_for_shift"||h.type==="select_lane_for_death_2"||h.type==="select_lane_for_play"||h.type==="select_lane_for_water_3"||h.type==="select_lane_for_metal_3_delete")){const{nextState:p,requiresAnimation:m}=nu(n,f.laneIndex);if(m){const{animationRequests:S,onCompleteCallback:b}=m;return d(S,()=>{s(R=>b(R,T=>n.phase==="start"?o.continueTurnAfterStartPhaseAction(T):o.processEndOfAction(T)))}),p}return o.processEndOfAction(p)}if(f.type==="flipCard"||f.type==="deleteCard"||f.type==="returnCard"){const{nextState:p,requiresAnimation:m,requiresTurnEnd:S}=Op(n,f.cardId);if(m){const{animationRequests:b,onCompleteCallback:R}=m;return d(b,()=>{s(T=>R(T,D=>D.actionRequired?(tc(D,s,u,r,d,o),D):D.phase==="start"?o.continueTurnAfterStartPhaseAction(D):o.processEndOfAction(D)))}),p}return S?o.processEndOfAction(p):p}if(f.type==="playCard"&&h.type==="select_card_from_hand_to_play"){const{cardId:p,laneIndex:m,isFaceUp:S}=f,{newState:b,animationRequests:R}=r.playCard({...n,actionRequired:null},p,m,S,"opponent"),T={...b,animationState:{type:"playCard",cardId:p,owner:"opponent"}};return setTimeout(()=>{s(D=>{let M={...D,animationState:null};return R&&R.length>0?(d(R,()=>s(X=>o.processEndOfAction(X))),M):M.actionRequired?(tc(M,s,u,r,d,o),M):o.processEndOfAction(M)})},500),T}if(f.type==="discardCards"&&h.type==="discard"){const p=r.discardCards(n,f.cardIds,"opponent");return p.actionRequired?p:o.processEndOfAction(p)}if(f.type==="giveCard"&&h.type==="select_card_from_hand_to_give"){const p=r.resolveActionWithHandCard(n,f.cardId);return p.actionRequired?p:o.processEndOfAction(p)}if(f.type==="revealCard"&&h.type==="select_card_from_hand_to_reveal")return r.resolveActionWithHandCard(n,f.cardId);console.warn(`AI has no logic for mandatory action, clearing it: ${h.type}`);const _={...n,actionRequired:null};return o.processEndOfAction(_)},tc=(n,s,u,r,d,o)=>{s(f=>{if(f.turn!=="opponent"||f.winner||f.animationState)return f;if(f.actionRequired){const _=f.actionRequired;let p=!1;if((_.type==="discard"&&_.player==="player"||_.type==="plague_4_opponent_delete"&&_.actor==="opponent"||"actor"in _&&_.actor==="player")&&(p=!0),p)return f}let h={...f};if(h.actionRequired&&h.actionRequired.type==="reveal_opponent_hand"){const _=r.revealOpponentHand(h);return o.processEndOfAction(_)}if(h.phase==="start"&&(h=o.processStartOfTurn(h)),h.actionRequired)return av(h,s,u,r,d,o);if(h.phase==="compile"&&h.compilableLanes.length>0){const _=br(h,null,u);if(_.type==="compile"){const p=_.laneIndex;return setTimeout(()=>{s(m=>{const S=r.compileLane(m,p);return S.winner?S:o.processEndOfAction(S)})},1e3),{...h,animationState:{type:"compile",laneIndex:p},compilableLanes:[]}}}if(h.phase==="action"){const _=br(h,null,u);if(_.type==="fillHand"){const p=r.fillHand(h,"opponent");return o.processEndOfAction(p)}if(_.type==="playCard"){const{newState:p,animationRequests:m}=r.playCard(h,_.cardId,_.laneIndex,_.isFaceUp,"opponent"),S={...p,animationState:{type:"playCard",cardId:_.cardId,owner:"opponent"}};return setTimeout(()=>{const b=()=>{s(R=>{let T={...R},D={newState:T};if(T.queuedEffect){const{card:L,laneIndex:J}=T.queuedEffect;D=Cr(L,J,T,"opponent"),D.newState.queuedEffect=void 0}const M=D.animationRequests,X=D.newState,W=()=>{s(L=>(L.actionRequired?tc(L,s,u,r,d,o):s(o.processEndOfAction(L)),L))};return M&&M.length>0?(d(M,W),X):(X.actionRequired?tc(X,s,u,r,d,o):s(o.processEndOfAction(X)),X)})};s(R=>{const T={...R,animationState:null};return m&&m.length>0?d(m,b):b(),T})},500),S}}return o.processEndOfAction(h)})};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function lv(n,s){let u=null,r=null;const d=["player","opponent"];for(const m of d){for(const S of n[m].lanes){const b=S.find(R=>R.id===s);if(b){u=m,r=b;break}}if(u)break}if(!u||!r)return console.error("Card to delete not found on board:",s),n;const o={...n},f={...o[u]};f.lanes=f.lanes.map(m=>m.filter(S=>S.id!==s));const{id:h,isFaceUp:_,...p}=r;return f.discard=[...f.discard,p],o[u]=f,o}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const nv=(n,s,u,r)=>{const[d,o]=K.useState(()=>{const q=yy(n,s);return pt(q)}),[f,h]=K.useState(null),_=K.useCallback(q=>{switch(q){case"start":return Sr;case"end":return lu;case"action":case"hand_limit":case"compile":case"control":default:return Ep}},[]),p=K.useCallback((q,j)=>{if(q.length===0){j();return}const[V,...w]=q;o(H=>({...H,animationState:{type:"deleteCard",cardId:V.cardId,owner:V.owner}})),setTimeout(()=>{o(H=>{const F=lv(H,V.cardId);return{...pt(F),animationState:null}}),w.length>0?p(w,j):j()},500)},[]),m=(q,j)=>{if(!f||d.turn!=="player"||d.phase!=="action")return;const V=f;h(null),o(w=>{const H=_(w.phase),{newState:F,animationRequests:Q}=Wi(w,V,q,j,"player"),I={...F,animationState:{type:"playCard",cardId:V,owner:"player"}};return setTimeout(()=>{o(me=>{let ne={...me,animationState:null};return Q&&Q.length>0?(p(Q,()=>o(Ve=>Ve.actionRequired?Ve:H(Ve))),ne):ne.actionRequired?ne:H(ne)})},500),I})},S=()=>{d.turn!=="player"||d.phase!=="action"||d.actionRequired||o(q=>{const j=_(q.phase),V=dp(q,"player");return j(V)})},b=K.useCallback(q=>{o(j=>{var V;return((V=j.actionRequired)==null?void 0:V.type)!=="discard"?j:{...j,animationState:{type:"discardCard",owner:"player",cardIds:[q],originalAction:j.actionRequired}}})},[]),R=K.useCallback(q=>{o(j=>{if(j.winner||j.phase!=="compile")return j;const V=_(j.phase),w={...j,animationState:{type:"compile",laneIndex:q},compilableLanes:[]};return setTimeout(()=>{o(H=>{const F=wp(H,q,u);return F.winner?F:{...V(F),animationState:null}})},1e3),w})},[u,_]),T=q=>{o(j=>{const V=_(j.phase),{nextState:w,requiresAnimation:H,requiresTurnEnd:F}=Op(j,q);return H?(p(H.animationRequests,()=>{o(Q=>H.onCompleteCallback(Q,V))}),w):w.actionRequired?w:F?V(w):w})},D=q=>{o(j=>{const V=_(j.phase),{nextState:w,requiresAnimation:H}=nu(j,q);return H?(p(H.animationRequests,()=>{o(F=>{const Q=H.onCompleteCallback(F,I=>I);return Q.actionRequired?Q:V(Q)})}),w):w.actionRequired?w:V(w)})},M=q=>{o(j=>{const V=_(j.phase),w=Pi(j,q);return w.actionRequired?w:V(w)})},X=q=>{o(j=>Fm(j,q))},W=()=>{o(q=>{var w,H;const j=_(q.phase);let V={...q,animationState:null};return((w=V.actionRequired)==null?void 0:w.type)==="prompt_shift_or_flip_for_light_2"?V=Ki(V,"skip"):V=Cp(V),((H=V.actionRequired)==null?void 0:H.type)==="plague_4_player_flip_optional"?V:j(V)})},L=K.useCallback(q=>{o(j=>{_(j.phase);const V=pp(j,q);return V.actionRequired?V:Sr(V)})},[_]),J=K.useCallback(q=>{o(j=>{const V=_(j.phase),w=Zi(j,q);return q?w:V(w)})},[_]),k=K.useCallback(q=>{o(j=>{var V;return((V=j.actionRequired)==null?void 0:V.type)!=="plague_2_player_discard"?j:{...j,animationState:{type:"discardCard",owner:"player",cardIds:q,originalAction:j.actionRequired}}})},[]),Z=K.useCallback(q=>{o(j=>{const V=_(j.phase),w=hp(j,q,"player");return V(w)})},[_]),se=K.useCallback(q=>{o(j=>{const V=_(j.phase),w=_p(j,q);return q?w:V(w)})},[_]),fe=K.useCallback(q=>{o(j=>{const V=_(j.phase),w=yp(j,q);return q?w:V(w)})},[_]),te=K.useCallback(q=>{o(j=>{var V;return((V=j.actionRequired)==null?void 0:V.type)!=="select_cards_from_hand_to_discard_for_fire_4"?j:{...j,animationState:{type:"discardCard",owner:"player",cardIds:q,originalAction:j.actionRequired}}})},[]),le=K.useCallback(q=>{o(j=>{var V;return((V=j.actionRequired)==null?void 0:V.type)!=="select_cards_from_hand_to_discard_for_hate_1"?j:{...j,animationState:{type:"discardCard",owner:"player",cardIds:q,originalAction:j.actionRequired}}})},[]),re=K.useCallback(q=>{o(j=>{const V=_(j.phase),w=Ki(j,q);return w.actionRequired?w:V(w)})},[_]),Se=K.useCallback(q=>{o(j=>{const V=_(j.phase),w=mp(j,q);return V(w)})},[_]),Me=K.useCallback(q=>{o(j=>{const V=_(j.phase),w=vp(j,q);return q?w:V(w)})},[_]),xe=K.useCallback(q=>{o(j=>{_(j.phase);const V=gp(j,q);return V.actionRequired?V:Sr(V)})},[_]),ye=K.useCallback(q=>{o(j=>{const V=_(j.phase),w=Sp(j,q);return w.actionRequired?w:V(w)})},[_]),z=K.useCallback(q=>{o(j=>{const V=_(j.phase),w=bp(j,q);return V(w)})},[_]);return K.useEffect(()=>{const q=d.animationState;if(!q)return;let j=0,V=!1;if(q.type==="flipCard"?(j=600,V=!0):q.type==="drawCard"?(j=1e3,V=!0):q.type==="discardCard"&&(j=800,V=!0),V){const w=setTimeout(()=>{o(H=>({...H,animationState:null}))},j);return()=>clearTimeout(w)}},[d.animationState]),K.useEffect(()=>{const q=d.animationState;if((q==null?void 0:q.type)==="discardCard"&&q.owner==="player"){const j=setTimeout(()=>{o(V=>{const w=V.animationState;if((w==null?void 0:w.type)!=="discardCard"||!w.originalAction)return V;const{cardIds:H,originalAction:F}=w,Q=_(V.phase);let I;return F.type==="plague_2_player_discard"?I=Qm(V,H):F.type==="select_cards_from_hand_to_discard_for_fire_4"?I=fp(V,H):F.type==="select_cards_from_hand_to_discard_for_hate_1"?I=Fi(V,H):I=rl(V,H,"player"),I.animationState=null,I.actionRequired?I:Q(I)})},500);return()=>clearTimeout(j)}},[d.animationState,_]),K.useEffect(()=>{if(d.turn==="opponent"&&!d.winner&&!d.animationState){const q=setTimeout(()=>{tc(d,o,r,{compileLane:(j,V)=>wp(j,V,u),playCard:Wi,fillHand:dp,discardCards:rl,flipCard:up,deleteCard:(j,V)=>({newState:j,animationRequests:[{type:"delete",cardId:V,owner:"opponent"}]}),returnCard:sp,skipAction:Cp,resolveDeath1Prompt:pp,resolveLove1Prompt:Zi,resolvePlague4Flip:(j,V)=>hp(j,V,"opponent"),resolvePlague2Discard:Up,resolveFire3Prompt:_p,resolveSpeed3Prompt:yp,resolveFire4Discard:fp,resolveHate1Discard:Fi,resolveLight2Prompt:Ki,resolveRearrangeProtocols:mp,resolveActionWithHandCard:Pi,resolvePsychic4Prompt:vp,resolveSpirit1Prompt:gp,resolveSpirit3Prompt:Sp,resolveSwapProtocols:bp,revealOpponentHand:Rp},p,ip)},1500);return()=>clearTimeout(q)}},[d.turn,d.winner,d.animationState,r,u,p,d.actionRequired]),K.useEffect(()=>{const q=d.actionRequired;if(d.turn==="player"&&!d.animationState&&q&&(q.type==="discard"&&q.player==="opponent"||q.type==="select_lane_for_shift"&&q.actor==="opponent"||q.type==="plague_4_opponent_delete"||q.type==="reveal_opponent_hand")){const V=setTimeout(()=>{tv(d,o,r,{discardCards:rl,flipCard:up,returnCard:sp,deleteCard:(w,H)=>({newState:w,animationRequests:[{type:"delete",cardId:H,owner:"opponent"}]}),resolveActionWithHandCard:Pi,resolveLove1Prompt:Zi,resolveHate1Discard:Fi,revealOpponentHand:Rp},ip,p)},1500);return()=>clearTimeout(V)}},[d.actionRequired,d.turn,d.animationState,r,p]),K.useEffect(()=>{o(q=>q.turn==="player"&&q.phase==="start"&&!q.actionRequired?Np(q):q)},[d.turn,d.phase]),{gameState:d,selectedCard:f,setSelectedCard:h,playSelectedCard:m,fillHand:S,discardCardFromHand:b,compileLane:R,resolveActionWithCard:T,resolveActionWithLane:D,selectHandCardForAction:X,skipAction:W,resolvePlague2Discard:k,resolveActionWithHandCard:M,resolvePlague4Flip:Z,resolveFire3Prompt:se,resolveFire4Discard:te,resolveHate1Discard:le,resolveLight2Prompt:re,resolveRearrangeProtocols:Se,resolveSpeed3Prompt:fe,resolveDeath1Prompt:L,resolveLove1Prompt:J,resolvePsychic4Prompt:Me,resolveSpirit1Prompt:xe,resolveSpirit3Prompt:ye,resolveSwapProtocols:z}},Ap=({cards:n,isPlayable:s,isCompilable:u,isShiftTarget:r,isEffectTarget:d,isMatching:o,onLaneMouseDown:f,onCardMouseDown:h,onCardMouseEnter:_,onCardMouseLeave:p,owner:m,animationState:S,isCardTargetable:b,faceDownValue:R,sourceCardId:T})=>{const D=["lane"];return s&&D.push("playable"),o&&D.push("matching-protocol"),u&&D.push("compilable"),r&&D.push("shift-target"),d&&D.push("effect-target"),v.jsx("div",{className:D.join(" "),onMouseDown:f,children:v.jsx("div",{className:"lane-stack",children:n.map((M,X)=>v.jsx(wt,{card:M,isFaceUp:M.isFaceUp,style:{"--i":X},onMouseDown:W=>{W.stopPropagation(),h(M)},onMouseEnter:()=>_(M),onMouseLeave:()=>p(M),animationState:S,isTargetable:b(M),isSourceOfEffect:M.id===T,faceDownValue:R},M.id))})})};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const eu=(n,s)=>{const{actionRequired:u}=s;if(!u)return!1;let r=null,d=-1,o=[];for(const f of["player","opponent"]){for(let h=0;h<s[f].lanes.length;h++)if(s[f].lanes[h].some(_=>_.id===n.id)){r=f,d=h,o=s[f].lanes[h];break}if(r)break}if(!r)return!1;switch(u.type){case"select_opponent_face_up_card_to_flip":return r==="opponent"&&n.isFaceUp;case"select_own_face_up_covered_card_to_flip":{const f=o.findIndex(h=>h.id===n.id);return r==="player"&&n.isFaceUp&&f<o.length-1}case"select_opponent_covered_card_to_shift":{const f=o.findIndex(_=>_.id===n.id),h=s.turn==="player"?"opponent":"player";return r===h&&f<o.length-1}case"select_opponent_card_to_flip":return r==="opponent";case"shift_flipped_card_optional":return n.id===u.cardId;case"select_own_covered_card_in_lane_to_flip":{const f=o.findIndex(h=>h.id===n.id);return r==="player"&&d===u.laneIndex&&f<o.length-1}case"select_face_down_card_to_shift_for_darkness_4":return!n.isFaceUp;case"select_cards_to_delete":return!u.disallowedIds.includes(n.id);case"select_card_to_delete_for_death_1":return n.id!==u.sourceCardId;case"select_face_down_card_to_delete":return!n.isFaceUp;case"select_low_value_card_to_delete":return n.isFaceUp&&(n.value===0||n.value===1);case"select_card_from_other_lanes_to_delete":{const{disallowedLaneIndex:f,lanesSelected:h}=u;return d!==f&&!h.includes(d)}case"plague_4_opponent_delete":return(s.turn==="player"?"opponent":"player")==="player"?r==="player"&&!n.isFaceUp:!1;case"select_any_other_card_to_flip":return n.id!==u.sourceCardId;case"select_card_to_return":return!0;case"select_card_to_flip_for_fire_3":return!0;case"select_card_to_shift_for_gravity_1":return!0;case"select_card_to_flip_and_shift_for_gravity_2":return!0;case"select_face_down_card_to_shift_for_gravity_4":return!n.isFaceUp&&d!==u.targetLaneIndex;case"select_any_card_to_flip":case"select_any_card_to_flip_optional":return!0;case"select_any_face_down_card_to_flip_optional":return!n.isFaceUp;case"select_card_to_flip_for_light_0":return!0;case"select_face_down_card_to_reveal_for_light_2":return!n.isFaceUp;case"select_any_other_card_to_flip_for_water_0":return n.id!==u.sourceCardId;case"select_own_card_to_return_for_water_4":return r===s.turn;case"select_own_other_card_to_shift":return r===s.turn&&n.id!==u.sourceCardId;case"select_own_card_to_shift_for_speed_3":return r===s.turn;case"select_opponent_face_down_card_to_shift":return r!==s.turn&&!n.isFaceUp;case"select_any_opponent_card_to_shift":return r!==s.turn;case"select_opponent_card_to_return":return r==="opponent";default:return!1}},cv=({gameState:n,onLaneMouseDown:s,onCardMouseDown:u,onCardMouseEnter:r,onCardMouseLeave:d,onOpponentHandCardMouseEnter:o,onOpponentHandCardMouseLeave:f,selectedCardId:h,sourceCardId:_})=>{const{player:p,opponent:m,animationState:S,phase:b,turn:R,compilableLanes:T,actionRequired:D}=n,M=k=>{const Z=b==="compile"&&!D&&T.includes(k),se=R==="player",fe=b==="action"&&!D&&h,te=(D==null?void 0:D.type)==="select_lane_for_play";if(!se||!fe&&!te)return{isPlayable:!1,isMatching:!1,isCompilable:Z};let le;if(fe?le=p.hand.find(q=>q.id===h):te&&(le=p.hand.find(q=>q.id===D.cardInHandId)),!le)return{isPlayable:!1,isMatching:!1,isCompilable:Z};if(te&&k===D.disallowedLaneIndex)return{isPlayable:!1,isMatching:!1,isCompilable:Z};const re=m.lanes[k];if(re.length>0&&re[re.length-1].isFaceUp&&re[re.length-1].protocol==="Plague"&&re[re.length-1].value===0)return{isPlayable:!1,isMatching:!1,isCompilable:Z};const Me=m.lanes.flat().some(q=>q.isFaceUp&&q.protocol==="Psychic"&&q.value===1),ye=(p.lanes.flat().some(q=>q.isFaceUp&&q.protocol==="Spirit"&&q.value===1)||le.protocol===p.protocols[k])&&!Me;return re.some(q=>q.isFaceUp&&q.protocol==="Metal"&&q.value===2)&&!ye?{isPlayable:!1,isMatching:!1,isCompilable:Z}:{isPlayable:!0,isMatching:ye,isCompilable:Z}},X=k=>{if(!D||R!=="player")return!1;switch(D.type){case"select_lane_for_death_2":case"select_lane_for_water_3":return!0;case"select_lane_for_metal_3_delete":return k===D.disallowedLaneIndex?!1:p.lanes[k].length+m.lanes[k].length>=8;default:return!1}},W=(k,Z)=>{if(!D||R!=="player")return!1;switch(D.type){case"select_lane_for_shift":return Z===D.cardOwner&&k!==D.originalLaneIndex;case"shift_flipped_card_optional":{if(Z!=="opponent")return!1;const fe=D.cardId;let te=-1;for(let le=0;le<m.lanes.length;le++)if(m.lanes[le].some(re=>re.id===fe)){te=le;break}return k!==te}case"select_lane_for_life_3_play":return Z==="player"&&k!==D.disallowedLaneIndex;case"select_lane_to_shift_revealed_card_for_light_2":return Z==="player";case"select_lane_to_shift_cards_for_light_3":return k!==D.sourceLaneIndex;default:return!1}},L=(k,Z,se)=>{let fe=[k];return Z&&fe.push("compiled"),(S==null?void 0:S.type)==="compile"&&S.laneIndex===se&&fe.push("is-compiling"),fe.join(" ")},J=k=>k.some(se=>se.isFaceUp&&se.protocol==="Darkness"&&se.value===2)?4:2;return v.jsxs("div",{className:"game-board",children:[v.jsx("div",{className:"opponent-hand-area",children:m.hand.map(k=>v.jsx(wt,{card:k,isFaceUp:k.isRevealed||!1,additionalClassName:"in-hand",onMouseEnter:()=>o(k),onMouseLeave:f},k.id))}),v.jsx("div",{className:`player-side opponent-side ${R==="opponent"?"active-turn":""}`,children:v.jsx("div",{className:"lanes",children:m.lanes.map((k,Z)=>{const se=J(k);return v.jsx(Ap,{cards:k,isPlayable:!1,isCompilable:!1,isShiftTarget:W(Z,"opponent"),isEffectTarget:X(Z),onLaneMouseDown:()=>s(Z),onCardMouseDown:fe=>u(fe,"opponent",Z),onCardMouseEnter:fe=>r(fe,"opponent"),onCardMouseLeave:()=>d(),owner:"opponent",animationState:S,isCardTargetable:fe=>eu(fe,n),faceDownValue:se,sourceCardId:_},`opp-lane-${Z}`)})})}),v.jsxs("div",{className:"protocol-bars-container",children:[v.jsx("div",{className:"protocol-bar opponent-bar",children:m.protocols.map((k,Z)=>v.jsxs("div",{className:L("protocol-display",m.compiled[Z],Z),children:[v.jsx("span",{className:"protocol-name",children:k}),v.jsx("span",{className:"protocol-value",children:m.laneValues[Z]})]},`opp-proto-${k}-${Z}`))}),v.jsx("div",{className:"protocol-bar player-bar",children:p.protocols.map((k,Z)=>v.jsxs("div",{className:L("protocol-display",p.compiled[Z],Z),children:[v.jsx("span",{className:"protocol-name",children:k}),v.jsx("span",{className:"protocol-value",children:p.laneValues[Z]})]},`player-proto-${k}-${Z}`))})]}),v.jsx("div",{className:`player-side ${R==="player"?"active-turn":""}`,children:v.jsx("div",{className:"lanes",children:p.lanes.map((k,Z)=>{const{isPlayable:se,isMatching:fe,isCompilable:te}=M(Z),le=J(k);return v.jsx(Ap,{cards:k,isPlayable:se,isMatching:fe,isCompilable:te,isShiftTarget:W(Z,"player"),isEffectTarget:X(Z),onLaneMouseDown:()=>s(Z),onCardMouseDown:re=>u(re,"player",Z),onCardMouseEnter:re=>r(re,"player"),onCardMouseLeave:()=>d(),owner:"player",animationState:S,isCardTargetable:re=>eu(re,n),faceDownValue:le,sourceCardId:_},`player-lane-${Z}`)})})})]})};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const rv=({gameState:n,onFillHand:s,onSkipAction:u,onResolvePlague2Discard:r,onResolvePlague4Flip:d,onResolveFire3Prompt:o,onResolveSpeed3Prompt:f,onResolveFire4Discard:h,onResolveHate1Discard:_,onResolveLight2Prompt:p,onResolveDeath1Prompt:m,onResolveLove1Prompt:S,onResolvePsychic4Prompt:b,onResolveSpirit1Prompt:R,onResolveSpirit3Prompt:T,selectedCardId:D,multiSelectedCardIds:M})=>{const{phase:X,turn:W,actionRequired:L,player:J,compilableLanes:k}=n,Z=Se=>{for(const Me of["player","opponent"])for(const xe of n[Me].lanes){const ye=xe.find(z=>z.id===Se);if(ye)return ye}return null},se=L==null?void 0:L.sourceCardId,fe=se?Z(se):null,te=W.charAt(0).toUpperCase()+W.slice(1),le=()=>{if(W!=="player")return v.jsx("button",{className:"btn",disabled:!0,children:"Processing..."});if((L==null?void 0:L.type)==="prompt_death_1_effect")return v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>m(!0),children:"Draw & Delete"}),v.jsx("button",{className:"btn btn-back",onClick:()=>m(!1),children:"Skip"})]});if((L==null?void 0:L.type)==="prompt_give_card_for_love_1")return v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>S(!0),children:"Give 1 Card"}),v.jsx("button",{className:"btn btn-back",onClick:()=>S(!1),children:"Skip"})]});if((L==null?void 0:L.type)==="prompt_fire_3_discard")return v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>o(!0),children:"Discard 1 Card"}),v.jsx("button",{className:"btn btn-back",onClick:()=>o(!1),children:"Skip"})]});if((L==null?void 0:L.type)==="prompt_shift_for_speed_3")return v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>f(!0),children:"Shift"}),v.jsx("button",{className:"btn btn-back",onClick:()=>f(!1),children:"Skip"})]});if((L==null?void 0:L.type)==="prompt_spirit_1_start")return v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>R("discard"),children:"Discard 1"}),v.jsx("button",{className:"btn btn-back",onClick:()=>R("flip"),children:"Flip Card"})]});if((L==null?void 0:L.type)==="prompt_shift_for_spirit_3")return v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>T(!0),children:"Shift"}),v.jsx("button",{className:"btn btn-back",onClick:()=>T(!1),children:"Skip"})]});if((L==null?void 0:L.type)==="prompt_return_for_psychic_4")return v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>b(!0),children:"Return Card"}),v.jsx("button",{className:"btn btn-back",onClick:()=>b(!1),children:"Skip"})]});if((L==null?void 0:L.type)==="prompt_shift_or_flip_for_light_2")return v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>p("shift"),children:"Shift"}),v.jsx("button",{className:"btn",onClick:()=>p("flip"),children:"Flip Back"}),v.jsx("button",{className:"btn btn-back",onClick:()=>p("skip"),children:"Skip"})]});if((L==null?void 0:L.type)==="plague_2_player_discard"||(L==null?void 0:L.type)==="select_cards_from_hand_to_discard_for_fire_4"||(L==null?void 0:L.type)==="select_cards_from_hand_to_discard_for_hate_1"){let Se,Me=0;return L.type==="plague_2_player_discard"?(Se=r,Me=1):L.type==="select_cards_from_hand_to_discard_for_fire_4"?(Se=h,Me=1):(Se=_,Me=L.count),v.jsxs("button",{className:"btn",onClick:()=>Se(M),disabled:M.length<Me,children:["Confirm Discard (",M.length,")"]})}if((L==null?void 0:L.type)==="plague_4_player_flip_optional")return v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>d(!0),children:"Flip Plague-4"}),v.jsx("button",{className:"btn btn-back",onClick:()=>d(!1),children:"Skip"})]});if(L&&"optional"in L&&L.optional)return v.jsx("button",{className:"btn btn-back",onClick:u,children:"Skip Action"});if(L)return v.jsx("button",{className:"btn",disabled:!0,children:"Action Required"});if(X==="compile"&&k.length>0)return v.jsx("button",{className:"btn",disabled:!0,children:"Select Lane to Compile"});if(X==="action"){const Se=J.hand.length<5;return J.hand.length===0?v.jsx("button",{className:"btn",onClick:s,children:"Fill Hand (Required)"}):v.jsx("button",{className:"btn",onClick:s,disabled:!Se||!!D,children:"Fill Hand"})}return v.jsx("button",{className:"btn",disabled:!0,children:"Processing..."})},re=()=>{if(L)switch(L.type){case"discard":return L.player==="player"?`Action: Discard ${L.count} card(s) from your hand`:"Waiting for Opponent to discard...";case"select_opponent_face_up_card_to_flip":return"Action: Select an opponent's face-up card to flip";case"select_own_face_up_covered_card_to_flip":return"Action: Select one of your face-up, covered cards to flip";case"select_opponent_covered_card_to_shift":return"Action: Select one of your opponent's covered cards to shift";case"select_lane_for_shift":return"Action: Select a new lane for the card";case"select_opponent_card_to_flip":return"Action: Select an opponent's card to flip";case"shift_flipped_card_optional":return"Action: You may shift the card you just flipped. Select a lane or skip.";case"select_own_covered_card_in_lane_to_flip":return"Action: You may flip one of your covered cards in this lane. Select a card or skip.";case"select_card_from_hand_to_play":return"Action: Select a card from your hand to play";case"select_lane_for_play":return"Action: Select another lane to play your card in";case"select_face_down_card_to_shift_for_darkness_4":return"Action: Select any face-down card to shift";case"select_cards_to_delete":return`Action: Select a card to delete (${L.count} remaining)`;case"select_face_down_card_to_delete":return"Action: Select a face-down card to delete";case"select_low_value_card_to_delete":return"Action: Select a card with value 0 or 1 to delete";case"select_card_from_other_lanes_to_delete":return`Action: Select a card to delete (${L.count} remaining)`;case"select_lane_for_death_2":return"Action: Select a lane to delete cards with value 1 or 2";case"prompt_death_1_effect":return"Start Phase: Use Death-1 effect?";case"select_card_to_delete_for_death_1":return"Action: Select a card to delete";case"prompt_give_card_for_love_1":return"End Phase: Give 1 card to draw 2?";case"select_card_from_hand_to_give":return"Action: Select a card from your hand to give";case"select_card_from_hand_to_reveal":return"Action: Select a card from your hand to reveal";case"plague_2_player_discard":return"Action: Select 1 or more cards to discard";case"plague_4_opponent_delete":return"Waiting for opponent to delete one of their face-down cards";case"plague_4_player_flip_optional":return"Action: You may flip Plague-4";case"select_any_other_card_to_flip":return"Action: Select any other card to flip";case"select_card_to_return":return"Action: Select a card to return to its owner's hand";case"prompt_fire_3_discard":return"End Phase: Discard 1 card to flip 1 card?";case"select_card_to_flip_for_fire_3":return"Action: Select a card to flip";case"prompt_shift_for_speed_3":return"End Phase: Shift 1 card?";case"select_own_card_to_shift_for_speed_3":case"select_own_other_card_to_shift":return"Action: Select one of your cards to shift";case"select_opponent_face_down_card_to_shift":return"Action: Select an opponent's face-down card to shift";case"prompt_spirit_1_start":return"Start Phase: Discard 1 card or flip Spirit-1?";case"select_any_card_to_flip_optional":return"Action: You may flip one card. Select a card or skip.";case"prompt_shift_for_spirit_3":return"Triggered: You may shift your Spirit-3. Select a lane or skip.";case"prompt_swap_protocols":return"Action: Swap two of your protocols.";case"select_cards_from_hand_to_discard_for_fire_4":return"Action: Select 1 or more cards to discard";case"select_cards_from_hand_to_discard_for_hate_1":return`Action: Select ${L.count} card(s) to discard for Hate-1`;case"select_any_card_to_flip":return`Action: Select a card to flip (${L.count} remaining)`;case"select_any_face_down_card_to_flip_optional":return"Action: You may flip a face-down card. Select a card or skip.";case"select_lane_for_life_3_play":return"Action: Select another lane to play a card into";case"select_card_to_flip_for_light_0":return"Action: Select any card to flip";case"select_face_down_card_to_reveal_for_light_2":return"Action: Select a face-down card to reveal";case"prompt_shift_or_flip_for_light_2":return"Action: Choose to shift, flip back, or skip";case"select_lane_to_shift_revealed_card_for_light_2":return"Action: Select a lane to shift the revealed card to";case"select_lane_to_shift_cards_for_light_3":return"Action: Select a lane to shift all face-down cards to";case"select_lane_for_metal_3_delete":return"Action: Select a lane with 8+ cards to delete";case"select_any_other_card_to_flip_for_water_0":return"Action: Select any other card to flip";case"prompt_rearrange_protocols":return"Action: Rearrange protocols";case"select_lane_for_water_3":return"Action: Select a lane to return cards from";case"select_own_card_to_return_for_water_4":return"Action: Select one of your cards to return to your hand";case"prompt_return_for_psychic_4":return"End Phase: Return an opponent's card?";case"select_any_opponent_card_to_shift":return"Action: Select an opponent's card to shift";case"select_opponent_card_to_return":return"Action: Select an opponent's card to return";default:return"Action Required"}return X==="compile"&&k.length>0?"Phase: Compile":`Phase: ${X.replace("_"," ")}`};return v.jsxs("div",{className:"phase-controller",children:[v.jsxs("div",{className:"effect-source-info",children:[v.jsxs("span",{children:[te,"'s Turn"]}),L&&fe&&v.jsxs(v.Fragment,{children:[" | Effect from: ",v.jsxs("span",{children:[fe.protocol,"-",fe.value]})]})]}),v.jsxs("div",{className:"phase-controller-main",children:[v.jsx("div",{className:"phase-info",children:re()}),v.jsx("div",{className:"phase-actions",children:le()})]})]})};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const ov=({gameState:n,turn:s,animationState:u,onPlayerClick:r,onOpponentClick:d})=>{const{player:o,opponent:f}=n,h=_=>{const p=["info-section"];return p.push(_==="player"?"player-info":"opponent-info"),s===_&&p.push("active-turn"),(u==null?void 0:u.type)==="drawCard"&&u.owner===_&&p.push("is-drawing"),(u==null?void 0:u.type)==="discardCard"&&u.owner===_&&p.push("is-discarding"),p.join(" ")};return v.jsxs("div",{className:"game-info-panel",children:[v.jsxs("div",{className:h("opponent"),onClick:d,children:[v.jsx("h3",{children:"Opponent"}),v.jsxs("div",{className:"info-line",children:[v.jsx("span",{children:"Hand:"}),v.jsx("span",{children:f.hand.length})]}),v.jsxs("div",{className:"info-line",children:[v.jsx("span",{children:"Deck:"}),v.jsx("span",{children:f.deck.length})]}),v.jsxs("div",{className:"info-line",children:[v.jsx("span",{children:"Discard:"}),v.jsx("span",{children:f.discard.length})]})]}),v.jsxs("div",{className:h("player"),onClick:r,children:[v.jsx("h3",{children:"Player"}),v.jsxs("div",{className:"info-line",children:[v.jsx("span",{children:"Hand:"}),v.jsx("span",{children:o.hand.length})]}),v.jsxs("div",{className:"info-line",children:[v.jsx("span",{children:"Deck:"}),v.jsx("span",{children:o.deck.length})]}),v.jsxs("div",{className:"info-line",children:[v.jsx("span",{children:"Discard:"}),v.jsx("span",{children:o.discard.length})]})]})]})};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function iv({log:n,onClose:s}){return v.jsx("div",{className:"modal-overlay",onClick:s,children:v.jsxs("div",{className:"modal-content log-modal-content",onClick:u=>u.stopPropagation(),children:[v.jsx("button",{className:"btn btn-back modal-close-btn",onClick:s,children:"X"}),v.jsx("h2",{children:"Game Log"}),v.jsx("ol",{className:"log-list",children:n.map((u,r)=>v.jsx("li",{className:`log-entry log-entry-${u.player}`,children:u.message},r))})]})})}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function uv({message:n,player:s}){return v.jsx("div",{className:`toaster toaster-${s}`,children:n})}function sv({gameState:n,targetPlayer:s,onConfirm:u}){const[r,d]=K.useState(n[s].protocols),o=K.useRef(null),f=K.useRef(null),h=n[s],p=n[s==="player"?"opponent":"player"],m=K.useMemo(()=>{const J={};return h.protocols.forEach((k,Z)=>{J[k]={value:h.laneValues[Z],compiled:h.compiled[Z]}}),J},[h.protocols,h.laneValues,h.compiled]),S=(J,k)=>{let Z=[J];return k&&Z.push("compiled"),Z.join(" ")},b=(J,k)=>{o.current=k,J.dataTransfer.effectAllowed="move"},R=(J,k)=>{J.preventDefault(),f.current=k},T=()=>{if(o.current!==null&&f.current!==null&&o.current!==f.current){const J=[...r],k=J.splice(o.current,1)[0];J.splice(f.current,0,k),o.current=null,f.current=null,d(J)}},D=J=>{J.preventDefault()},M=s==="player",X=M?"Rearrange Your Protocols":"Rearrange Opponent's Protocols",W=v.jsx("div",{className:`protocol-bar ${M?"player-bar":"opponent-bar"}`,onDragOver:D,children:r.map((J,k)=>{const Z=m[J];return v.jsxs("div",{className:S("protocol-display rearrange-item",Z.compiled),draggable:!0,onDragStart:se=>b(se,k),onDragEnter:se=>R(se,k),onDragEnd:T,children:[v.jsx("span",{className:"protocol-name",children:J}),v.jsx("span",{className:"protocol-value",children:Z.value})]},J)})}),L=v.jsx("div",{className:`protocol-bar ${M?"opponent-bar":"player-bar"}`,children:p.protocols.map((J,k)=>v.jsxs("div",{className:S("protocol-display",p.compiled[k]),children:[v.jsx("span",{className:"protocol-name",children:J}),v.jsx("span",{className:"protocol-value",children:p.laneValues[k]})]},`other-proto-${J}-${k}`))});return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content rearrange-modal-content",onClick:J=>J.stopPropagation(),children:[v.jsx("h2",{children:X}),v.jsx("p",{children:"Drag and drop the protocols to reorder them."}),v.jsx("div",{className:"rearrange-board-view",children:v.jsxs("div",{className:"protocol-bars-container",children:[M?L:W,M?W:L]})}),v.jsx("div",{className:"rearrange-actions",children:v.jsx("button",{className:"btn",onClick:()=>u(r),children:"Confirm Rearrangement"})})]})})}function dv({gameState:n,onConfirm:s,onCancel:u}){const[r,d]=K.useState([]),o=n.player,f=p=>{r.includes(p)?d(m=>m.filter(S=>S!==p)):r.length<2&&d(m=>[...m,p])},h=()=>{r.length===2&&s(r)},_=p=>{let m=["protocol-display","rearrange-item"];return o.compiled[p]&&m.push("compiled"),r.includes(p)&&m.push("selected"),m.join(" ")};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content rearrange-modal-content",onClick:p=>p.stopPropagation(),children:[v.jsx("h2",{children:"Swap Protocols"}),v.jsx("p",{children:"Select two of your protocols to swap their positions."}),v.jsx("div",{className:"rearrange-board-view",children:v.jsx("div",{className:"protocol-bars-container",children:v.jsx("div",{className:"protocol-bar player-bar",children:o.protocols.map((p,m)=>v.jsxs("div",{className:_(m),onClick:()=>f(m),children:[v.jsx("span",{className:"protocol-name",children:p}),v.jsx("span",{className:"protocol-value",children:o.laneValues[m]})]},p))})})}),v.jsxs("div",{className:"rearrange-actions",children:[v.jsx("button",{className:"btn",onClick:h,disabled:r.length!==2,children:"Confirm Swap"}),v.jsx("button",{className:"btn btn-back",onClick:u,children:"Cancel"})]})]})})}function fv({player:n,playerState:s,onClose:u}){const r=n.charAt(0).toUpperCase()+n.slice(1),d=(o,f)=>{const h=o.map((_,p)=>({..._,id:`${f}-${_.protocol}-${_.value}-${p}`,isFaceUp:!0}));return v.jsxs(v.Fragment,{children:[v.jsxs("h3",{children:[f," (",h.length,")"]}),v.jsx("div",{className:"debug-card-grid",children:h.length>0?h.map(_=>v.jsx(wt,{card:_,isFaceUp:!0,additionalClassName:"in-hand"},_.id)):v.jsxs("p",{className:"no-cards",children:["No cards in ",f.toLowerCase(),"."]})})]})};return v.jsx("div",{className:"modal-overlay",onClick:u,children:v.jsxs("div",{className:"modal-content debug-modal-content",onClick:o=>o.stopPropagation(),children:[v.jsx("button",{className:"btn btn-back modal-close-btn",onClick:u,children:"X"}),v.jsxs("h2",{children:[r,"'s Info"]}),d(s.deck,"Deck"),d(s.discard,"Discard Pile")]})})}const pv=(n,s)=>{if(!s)return null;for(const u of["player","opponent"])for(const r of n[u].lanes){const d=r.find(o=>o.id===s);if(d)return{card:d,owner:u}}return null};function hv({onBack:n,onEndGame:s,playerProtocols:u,opponentProtocols:r,difficulty:d}){var an,rc,oc;const{gameState:o,selectedCard:f,setSelectedCard:h,playSelectedCard:_,fillHand:p,discardCardFromHand:m,compileLane:S,resolveActionWithCard:b,resolveActionWithLane:R,selectHandCardForAction:T,resolveActionWithHandCard:D,skipAction:M,resolveDeath1Prompt:X,resolveLove1Prompt:W,resolvePlague2Discard:L,resolvePlague4Flip:J,resolveFire3Prompt:k,resolveFire4Discard:Z,resolveHate1Discard:se,resolveLight2Prompt:fe,resolveRearrangeProtocols:te,resolveSpirit1Prompt:le,resolveSpirit3Prompt:re,resolveSwapProtocols:Se,resolveSpeed3Prompt:Me,resolvePsychic4Prompt:xe}=nv(u,r,s,d),[ye,z]=K.useState(null),[q,j]=K.useState([]),[V,w]=K.useState(!1),[H,F]=K.useState([]),Q=K.useRef(o.log.length),[I,me]=K.useState(!1),[ne,Ve]=K.useState(!1),[qe,Ct]=K.useState(null),Wl=K.useMemo(()=>{if(o.lastPlayedCardId){const P=pv(o,o.lastPlayedCardId);if(P){const ue=P.owner==="player"||P.card.isFaceUp;return{card:P.card,showContents:ue}}}return null},[o.lastPlayedCardId,o.player.lanes,o.opponent.lanes]),Ba=ye||Wl;K.useEffect(()=>{o.log.length>Q.current&&o.log.slice(Q.current).forEach(ue=>{if(ue.message!=="Game Started."){const ze={message:ue.message,player:ue.player,id:Qt()};F(je=>[...je,ze]),setTimeout(()=>{F(je=>je.filter(ha=>ha.id!==ze.id))},5e3)}}),Q.current=o.log.length},[o.log]),K.useEffect(()=>{var P,ue,ze;((P=o.actionRequired)==null?void 0:P.type)!=="plague_2_player_discard"&&((ue=o.actionRequired)==null?void 0:ue.type)!=="select_cards_from_hand_to_discard_for_fire_4"&&((ze=o.actionRequired)==null?void 0:ze.type)!=="select_cards_from_hand_to_discard_for_hate_1"&&j([])},[o.actionRequired]),K.useEffect(()=>{var P,ue;me(((P=o.actionRequired)==null?void 0:P.type)==="prompt_rearrange_protocols"&&o.turn==="player"),Ve(((ue=o.actionRequired)==null?void 0:ue.type)==="prompt_swap_protocols"&&o.turn==="player")},[o.actionRequired,o.turn]),K.useEffect(()=>{const P=ue=>{ue.ctrlKey&&ue.shiftKey&&(ue.preventDefault(),ue.key.toLowerCase()==="w"?(console.log("Debug: Forcing player win."),s("player",o)):ue.key.toLowerCase()==="l"&&(console.log("Debug: Forcing opponent win."),s("opponent",o)))};return window.addEventListener("keydown",P),()=>{window.removeEventListener("keydown",P)}},[o,s]);const ol=P=>{const{actionRequired:ue,turn:ze,phase:je,compilableLanes:ha,player:Ft,opponent:ul}=o,_a=ze==="player"&&ue&&["select_lane_for_shift","shift_flipped_card_optional","select_lane_for_play","select_lane_for_death_2","select_lane_for_life_3_play","select_lane_to_shift_revealed_card_for_light_2","select_lane_to_shift_cards_for_light_3","select_lane_for_water_3"].includes(ue.type),Zt=ze==="player"&&!ue&&je==="compile"&&ha.includes(P),Mt=ul.lanes.flat().some(ht=>ht.isFaceUp&&ht.protocol==="Psychic"&&ht.value===1),ya=f&&je==="action"&&!ue&&Ft.hand.some(ht=>ht.id===f)&&!ul.lanes[P].some(ht=>ht.isFaceUp&&ht.protocol==="Plague"&&ht.value===0);if(_a||Zt||ya){if(_a)R(P);else if(Zt)S(P);else if(ya){const ht=Ft.hand.find(Kt=>Kt.id===f),ic=(Ft.lanes.flat().some(Kt=>Kt.isFaceUp&&Kt.protocol==="Spirit"&&Kt.value===1)||ht.protocol===Ft.protocols[P])&&!Mt;_(P,ic),z(null)}}else f&&(h(null),z(null))},en=P=>{if(o.actionRequired){if(o.actionRequired.type==="discard"&&o.actionRequired.player==="player"){m(P.id);return}if(o.actionRequired.type==="select_card_from_hand_to_play"){T(P.id);return}if(o.actionRequired.type==="select_card_from_hand_to_give"||o.actionRequired.type==="select_card_from_hand_to_reveal"){D(P.id);return}if(o.actionRequired.type==="plague_2_player_discard"||o.actionRequired.type==="select_cards_from_hand_to_discard_for_fire_4"||o.actionRequired.type==="select_cards_from_hand_to_discard_for_hate_1"){j(ue=>ue.includes(P.id)?ue.filter(ze=>ze!==P.id):[...ue,P.id]);return}return}o.turn!=="player"||o.phase!=="action"&&o.phase!=="compile"||(P.id===f?(h(null),z(null)):(h(P.id),z({card:P,showContents:!0})))},tn=(P,ue,ze)=>{const{actionRequired:je,turn:ha,phase:Ft,compilableLanes:ul}=o;if(je&&["select_lane_for_shift","shift_flipped_card_optional","select_lane_for_play","select_lane_for_death_2","select_lane_for_life_3_play","select_lane_to_shift_revealed_card_for_light_2","select_lane_to_shift_cards_for_light_3","select_lane_for_water_3"].includes(je.type)){const Lt=ue==="player"||P.isFaceUp;z({card:P,showContents:Lt});return}const Zt=ha==="player"&&!je&&f&&Ft==="action",Mt=ha==="player"&&!je&&Ft==="compile"&&ul.includes(ze);if(Zt||Mt){ol(ze);return}if(eu(P,o))b(P.id);else if(f)h(null),z(null);else{const Lt=ue==="player"||P.isFaceUp;z({card:P,showContents:Lt})}},Rr=P=>{f||z({card:P,showContents:!0})},Ar=()=>{f||z(null)},Rt=(P,ue)=>{if(!f){const ze=ue==="player"||P.isFaceUp;z({card:P,showContents:ze})}},lc=()=>{f||z(null)},nc=P=>{!f&&!o.actionRequired&&z({card:P,showContents:P.isRevealed||!1})},cc=()=>{if(!Ba)return null;const{card:P,showContents:ue}=Ba;return v.jsx(wt,{card:P,isFaceUp:ue})},il=o.turn==="player"&&!o.actionRequired&&o.phase==="compile"&&o.compilableLanes.length>0,xr=((an=o.actionRequired)==null?void 0:an.sourceCardId)??null;return v.jsxs("div",{className:"screen game-screen",children:[qe&&v.jsx(fv,{player:qe,playerState:o[qe],onClose:()=>Ct(null)}),I&&((rc=o.actionRequired)==null?void 0:rc.type)==="prompt_rearrange_protocols"&&v.jsx(sv,{gameState:o,targetPlayer:o.actionRequired.target,onConfirm:P=>{te(P),me(!1)}}),ne&&((oc=o.actionRequired)==null?void 0:oc.type)==="prompt_swap_protocols"&&v.jsx(dv,{gameState:o,onConfirm:P=>{Se(P),Ve(!1)},onCancel:()=>{M(),Ve(!1)}}),v.jsx("div",{className:"toaster-container",children:H.map(P=>v.jsx(uv,{message:P.message,player:P.player},P.id))}),V&&v.jsx(iv,{log:o.log,onClose:()=>w(!1)}),v.jsx("button",{className:"btn log-button",onClick:()=>w(!0),children:"Log"}),v.jsxs("div",{className:"game-screen-layout",children:[v.jsxs("div",{className:"game-preview-container",children:[v.jsx("h2",{children:"Mainframe"}),v.jsx(ov,{gameState:o,turn:o.turn,animationState:o.animationState,onPlayerClick:()=>Ct("player"),onOpponentClick:()=>Ct("opponent")}),v.jsx("div",{className:"preview-card-area",children:cc()}),v.jsx("button",{className:"btn btn-back",onClick:n,children:"Back"})]}),v.jsxs("div",{className:"game-main-area",children:[il&&v.jsx("div",{className:"compile-prompt-container",children:v.jsx("h3",{children:"Select a Protocol to Compile"})}),v.jsx(cv,{gameState:o,onLaneMouseDown:ol,selectedCardId:f,onCardMouseDown:tn,onCardMouseEnter:Rt,onCardMouseLeave:lc,onOpponentHandCardMouseEnter:nc,onOpponentHandCardMouseLeave:lc,sourceCardId:xr}),v.jsxs("div",{className:"player-action-area",children:[v.jsx(rv,{gameState:o,onFillHand:p,onSkipAction:M,onResolveDeath1Prompt:X,onResolveLove1Prompt:W,onResolvePlague2Discard:L,onResolvePlague4Flip:J,onResolveFire3Prompt:k,onResolveSpeed3Prompt:Me,onResolveFire4Discard:Z,onResolveHate1Discard:se,onResolveLight2Prompt:fe,onResolvePsychic4Prompt:xe,onResolveSpirit1Prompt:le,onResolveSpirit3Prompt:re,selectedCardId:f,multiSelectedCardIds:q}),v.jsx("div",{className:`player-hand-area ${o.actionRequired?"action-required":""}`,children:o.player.hand.map(P=>v.jsx(wt,{card:P,isFaceUp:!0,onMouseDown:()=>en(P),onMouseEnter:()=>Rr(P),onMouseLeave:Ar,isSelected:P.id===f,isMultiSelected:q.includes(P.id),animationState:o.animationState,additionalClassName:"in-hand"},P.id))})]})]})]})]})}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function _v({onPlayAgain:n,winner:s,finalState:u}){if(!u)return v.jsxs("div",{className:"screen",children:[v.jsx("h1",{children:"Loading Results..."}),v.jsx("button",{className:"btn",onClick:n,children:"Back to Menu"})]});const r=s==="player",d=(o,f)=>{let h=[o];return f&&h.push("compiled"),h.join(" ")};return v.jsx("div",{className:`screen results-screen ${r?"victory":"defeat"}`,children:v.jsxs("div",{className:"results-screen-content",children:[v.jsxs("header",{className:"results-header",children:[v.jsx("h1",{children:r?"VICTORY":"DEFEAT"}),v.jsx("p",{children:r?"System compiled successfully.":"Critical error in the mainframe."})]}),v.jsxs("div",{className:"results-body",children:[v.jsxs("div",{className:"final-score-section",children:[v.jsx("h3",{children:"Final Score"}),v.jsx("h4",{className:"results-label results-opponent-label",children:"Opponent (AI)"}),v.jsxs("div",{className:"protocol-bars-container",children:[v.jsx("div",{className:"protocol-bar opponent-bar",children:u.opponent.protocols.map((o,f)=>v.jsxs("div",{className:d("protocol-display",u.opponent.compiled[f]),children:[v.jsx("span",{className:"protocol-name",children:o}),v.jsx("span",{className:"protocol-value",children:u.opponent.laneValues[f]})]},`opp-proto-${o}-${f}`))}),v.jsx("div",{className:"protocol-bar player-bar",children:u.player.protocols.map((o,f)=>v.jsxs("div",{className:d("protocol-display",u.player.compiled[f]),children:[v.jsx("span",{className:"protocol-name",children:o}),v.jsx("span",{className:"protocol-value",children:u.player.laneValues[f]})]},`player-proto-${o}-${f}`))})]}),v.jsx("h4",{className:"results-label results-player-label",children:"Player"})]}),v.jsxs("div",{className:"stats-section",children:[v.jsx("h3",{children:"Statistics"}),v.jsxs("div",{className:"stats-grid",children:[v.jsxs("div",{className:"stat-item",children:[v.jsx("span",{className:"stat-item-label",children:"Cards Played"}),v.jsx("span",{className:"stat-item-value opponent",children:u.stats.opponent.cardsPlayed}),v.jsx("span",{className:"stat-item-value player",children:u.stats.player.cardsPlayed})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("span",{className:"stat-item-label",children:"Cards Drawn"}),v.jsx("span",{className:"stat-item-value opponent",children:u.stats.opponent.cardsDrawn}),v.jsx("span",{className:"stat-item-value player",children:u.stats.player.cardsDrawn})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("span",{className:"stat-item-label",children:"Cards Discarded"}),v.jsx("span",{className:"stat-item-value opponent",children:u.stats.opponent.cardsDiscarded}),v.jsx("span",{className:"stat-item-value player",children:u.stats.player.cardsDiscarded})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("span",{className:"stat-item-label",children:"Cards Deleted"}),v.jsx("span",{className:"stat-item-value opponent",children:u.stats.opponent.cardsDeleted}),v.jsx("span",{className:"stat-item-value player",children:u.stats.player.cardsDeleted})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("span",{className:"stat-item-label",children:"Cards Flipped"}),v.jsx("span",{className:"stat-item-value opponent",children:u.stats.opponent.cardsFlipped}),v.jsx("span",{className:"stat-item-value player",children:u.stats.player.cardsFlipped})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("span",{className:"stat-item-label",children:"Cards Shifted"}),v.jsx("span",{className:"stat-item-value opponent",children:u.stats.opponent.cardsShifted}),v.jsx("span",{className:"stat-item-value player",children:u.stats.player.cardsShifted})]})]})]})]}),v.jsx("button",{className:"btn",onClick:n,children:"Play Again"})]})})}function yv({onBack:n}){const[s,u]=K.useState(da[0]),r=K.useMemo(()=>{const f={};for(const h of da)f[h.protocol]||(f[h.protocol]=[]),f[h.protocol].push(h);for(const h in f)f[h].sort((_,p)=>_.value-p.value);return f},[]),d=f=>{u(f)},o=()=>{if(!s)return null;const f={...s,id:"preview",isFaceUp:!0};return v.jsx(wt,{card:f,isFaceUp:!0})};return v.jsxs("div",{className:"screen card-library-screen",children:[v.jsx(xp,{title:"Card Library",onBack:n}),v.jsxs("div",{className:"card-library-layout",children:[v.jsxs("div",{className:"game-preview-container",children:[v.jsx("h2",{children:"Card Preview"}),v.jsx("div",{className:"preview-card-area",children:o()})]}),v.jsx("div",{className:"card-list-container",children:Ji.map(f=>v.jsxs("div",{className:"protocol-group",children:[v.jsx("h3",{children:f}),v.jsx("div",{className:"protocol-card-grid",children:r[f].map(h=>{const _={...h,id:`${h.protocol}-${h.value}`,isFaceUp:!0};return v.jsx(wt,{card:_,isFaceUp:!0,additionalClassName:"in-hand",onMouseEnter:()=>d(h),onMouseDown:()=>d(h)},_.id)})})]},f))})]})]})}function mv(){const[n,s]=K.useState("MainMenu"),[u,r]=K.useState([]),[d,o]=K.useState([]),[f,h]=K.useState(null),[_,p]=K.useState("easy"),[m,S]=K.useState(null),b=K.useCallback(()=>{s("MainMenu"),r([]),o([]),h(null),S(null)},[]);K.useEffect(()=>{const M=X=>{X.key==="Escape"&&b()};return window.addEventListener("keydown",M),()=>{window.removeEventListener("keydown",M)}},[b]);const R=K.useCallback((M,X)=>{r(M),o(X),h(null),S(null),s("GameScreen")},[]),T=K.useCallback((M,X)=>{h(M),S(X),s("ResultsScreen")},[]),D=()=>{switch(n){case"MainMenu":return v.jsx(lp,{onNavigate:M=>s(M),difficulty:_,setDifficulty:p});case"ProtocolSelection":return v.jsx(dy,{onBack:b,onStartGame:R});case"GameScreen":return v.jsx(hv,{onBack:b,onEndGame:T,playerProtocols:u,opponentProtocols:d,difficulty:_});case"ResultsScreen":return v.jsx(_v,{onPlayAgain:b,winner:f,finalState:m});case"CardLibrary":return v.jsx(yv,{onBack:b});default:return v.jsx(lp,{onNavigate:M=>s(M),difficulty:_,setDifficulty:p})}};return v.jsx(v.Fragment,{children:D()})}const vv=document.getElementById("root"),gv=oy.createRoot(vv);gv.render(v.jsx(ey.StrictMode,{children:v.jsx(mv,{})}));
